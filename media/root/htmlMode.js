data:application/javascript;base64,LyohLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFZlcnNpb246IDAuNDYuMCgyMTAwNzM2MGNhZDI4NjQ4YmRmNDYyODJhMjU5MmNiNDdjM2E3YTZmKQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9tb25hY28tZWRpdG9yL2Jsb2IvbWFpbi9MSUNFTlNFLnR4dAogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KZGVmaW5lKCJ2cy9sYW5ndWFnZS9odG1sL2h0bWxNb2RlIiwgWyJyZXF1aXJlIiwicmVxdWlyZSJdLChyZXF1aXJlKT0+ewoidXNlIHN0cmljdCI7dmFyIG1vZHVsZUV4cG9ydHM9KCgpPT57dmFyIHJuPU9iamVjdC5jcmVhdGU7dmFyIFE9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBvbj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO3ZhciBzbj1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lczt2YXIgYW49T2JqZWN0LmdldFByb3RvdHlwZU9mLHVuPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dmFyIGRuPShuPT50eXBlb2YgcmVxdWlyZTwidSI/cmVxdWlyZTp0eXBlb2YgUHJveHk8InUiP25ldyBQcm94eShuLHtnZXQ6KHQsaSk9Pih0eXBlb2YgcmVxdWlyZTwidSI/cmVxdWlyZTp0KVtpXX0pOm4pKGZ1bmN0aW9uKG4pe2lmKHR5cGVvZiByZXF1aXJlPCJ1IilyZXR1cm4gcmVxdWlyZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhyb3cgRXJyb3IoJ0R5bmFtaWMgcmVxdWlyZSBvZiAiJytuKyciIGlzIG5vdCBzdXBwb3J0ZWQnKX0pO3ZhciBjbj0obix0KT0+KCk9Pih0fHxuKCh0PXtleHBvcnRzOnt9fSkuZXhwb3J0cyx0KSx0LmV4cG9ydHMpLGxuPShuLHQpPT57Zm9yKHZhciBpIGluIHQpUShuLGkse2dldDp0W2ldLGVudW1lcmFibGU6ITB9KX0scT0obix0LGkscik9PntpZih0JiZ0eXBlb2YgdD09Im9iamVjdCJ8fHR5cGVvZiB0PT0iZnVuY3Rpb24iKWZvcihsZXQgZSBvZiBzbih0KSkhdW4uY2FsbChuLGUpJiZlIT09aSYmUShuLGUse2dldDooKT0+dFtlXSxlbnVtZXJhYmxlOiEocj1vbih0LGUpKXx8ci5lbnVtZXJhYmxlfSk7cmV0dXJuIG59LG1lPShuLHQsaSk9PihxKG4sdCwiZGVmYXVsdCIpLGkmJnEoaSx0LCJkZWZhdWx0IikpLGhlPShuLHQsaSk9PihpPW4hPW51bGw/cm4oYW4obikpOnt9LHEodHx8IW58fCFuLl9fZXNNb2R1bGU/UShpLCJkZWZhdWx0Iix7dmFsdWU6bixlbnVtZXJhYmxlOiEwfSk6aSxuKSksZ249bj0+cShRKHt9LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxuKTt2YXIgVGU9Y24oKFNuLHZlKT0+e3ZhciBmbj1oZShkbigidnMvZWRpdG9yL2VkaXRvci5hcGkiKSk7dmUuZXhwb3J0cz1mbn0pO3ZhciBEbj17fTtsbihEbix7Q29tcGxldGlvbkFkYXB0ZXI6KCk9PkIsRGVmaW5pdGlvbkFkYXB0ZXI6KCk9PmNlLERpYWdub3N0aWNzQWRhcHRlcjooKT0+ZGUsRG9jdW1lbnRDb2xvckFkYXB0ZXI6KCk9PmdlLERvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcjooKT0+SCxEb2N1bWVudEhpZ2hsaWdodEFkYXB0ZXI6KCk9PlMsRG9jdW1lbnRMaW5rQWRhcHRlcjooKT0+QSxEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlcjooKT0+SyxEb2N1bWVudFN5bWJvbEFkYXB0ZXI6KCk9Pk0sRm9sZGluZ1JhbmdlQWRhcHRlcjooKT0+VSxIb3ZlckFkYXB0ZXI6KCk9PkwsUmVmZXJlbmNlQWRhcHRlcjooKT0+bGUsUmVuYW1lQWRhcHRlcjooKT0+RixTZWxlY3Rpb25SYW5nZUFkYXB0ZXI6KCk9PmosV29ya2VyTWFuYWdlcjooKT0+Yixmcm9tUG9zaXRpb246KCk9PkMsZnJvbVJhbmdlOigpPT5mZSxzZXR1cE1vZGU6KCk9PlduLHNldHVwTW9kZTE6KCk9PlBuLHRvUmFuZ2U6KCk9PnksdG9UZXh0RWRpdDooKT0+RH0pO3ZhciBkPXt9O21lKGQsaGUoVGUoKSkpO3ZhciBwbj0yKjYwKjFlMyxiPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX2RlZmF1bHRzPXQsdGhpcy5fd29ya2VyPW51bGwsdGhpcy5fY2xpZW50PW51bGwsdGhpcy5faWRsZUNoZWNrSW50ZXJ2YWw9d2luZG93LnNldEludGVydmFsKCgpPT50aGlzLl9jaGVja0lmSWRsZSgpLDMwKjFlMyksdGhpcy5fbGFzdFVzZWRUaW1lPTAsdGhpcy5fY29uZmlnQ2hhbmdlTGlzdGVuZXI9dGhpcy5fZGVmYXVsdHMub25EaWRDaGFuZ2UoKCk9PnRoaXMuX3N0b3BXb3JrZXIoKSl9X3N0b3BXb3JrZXIoKXt0aGlzLl93b3JrZXImJih0aGlzLl93b3JrZXIuZGlzcG9zZSgpLHRoaXMuX3dvcmtlcj1udWxsKSx0aGlzLl9jbGllbnQ9bnVsbH1kaXNwb3NlKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLl9pZGxlQ2hlY2tJbnRlcnZhbCksdGhpcy5fY29uZmlnQ2hhbmdlTGlzdGVuZXIuZGlzcG9zZSgpLHRoaXMuX3N0b3BXb3JrZXIoKX1fY2hlY2tJZklkbGUoKXtpZighdGhpcy5fd29ya2VyKXJldHVybjtEYXRlLm5vdygpLXRoaXMuX2xhc3RVc2VkVGltZT5wbiYmdGhpcy5fc3RvcFdvcmtlcigpfV9nZXRDbGllbnQoKXtyZXR1cm4gdGhpcy5fbGFzdFVzZWRUaW1lPURhdGUubm93KCksdGhpcy5fY2xpZW50fHwodGhpcy5fd29ya2VyPWQuZWRpdG9yLmNyZWF0ZVdlYldvcmtlcih7bW9kdWxlSWQ6InZzL2xhbmd1YWdlL2h0bWwvaHRtbFdvcmtlciIsY3JlYXRlRGF0YTp7bGFuZ3VhZ2VTZXR0aW5nczp0aGlzLl9kZWZhdWx0cy5vcHRpb25zLGxhbmd1YWdlSWQ6dGhpcy5fZGVmYXVsdHMubGFuZ3VhZ2VJZH0sbGFiZWw6dGhpcy5fZGVmYXVsdHMubGFuZ3VhZ2VJZH0pLHRoaXMuX2NsaWVudD10aGlzLl93b3JrZXIuZ2V0UHJveHkoKSksdGhpcy5fY2xpZW50fWdldExhbmd1YWdlU2VydmljZVdvcmtlciguLi50KXtsZXQgaTtyZXR1cm4gdGhpcy5fZ2V0Q2xpZW50KCkudGhlbihyPT57aT1yfSkudGhlbihyPT57aWYodGhpcy5fd29ya2VyKXJldHVybiB0aGlzLl93b3JrZXIud2l0aFN5bmNlZFJlc291cmNlcyh0KX0pLnRoZW4ocj0+aSl9fTt2YXIgeWU7KGZ1bmN0aW9uKG4pe24uTUlOX1ZBTFVFPS0yMTQ3NDgzNjQ4LG4uTUFYX1ZBTFVFPTIxNDc0ODM2NDd9KSh5ZXx8KHllPXt9KSk7dmFyIEo7KGZ1bmN0aW9uKG4pe24uTUlOX1ZBTFVFPTAsbi5NQVhfVkFMVUU9MjE0NzQ4MzY0N30pKEp8fChKPXt9KSk7dmFyIHg7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlKXtyZXR1cm4gcj09PU51bWJlci5NQVhfVkFMVUUmJihyPUouTUFYX1ZBTFVFKSxlPT09TnVtYmVyLk1BWF9WQUxVRSYmKGU9Si5NQVhfVkFMVUUpLHtsaW5lOnIsY2hhcmFjdGVyOmV9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLm9iamVjdExpdGVyYWwoZSkmJmEudWludGVnZXIoZS5saW5lKSYmYS51aW50ZWdlcihlLmNoYXJhY3Rlcil9bi5pcz1pfSkoeHx8KHg9e30pKTt2YXIgdjsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyxzKXtpZihhLnVpbnRlZ2VyKHIpJiZhLnVpbnRlZ2VyKGUpJiZhLnVpbnRlZ2VyKG8pJiZhLnVpbnRlZ2VyKHMpKXJldHVybntzdGFydDp4LmNyZWF0ZShyLGUpLGVuZDp4LmNyZWF0ZShvLHMpfTtpZih4LmlzKHIpJiZ4LmlzKGUpKXJldHVybntzdGFydDpyLGVuZDplfTt0aHJvdyBuZXcgRXJyb3IoIlJhbmdlI2NyZWF0ZSBjYWxsZWQgd2l0aCBpbnZhbGlkIGFyZ3VtZW50c1siK3IrIiwgIitlKyIsICIrbysiLCAiK3MrIl0iKX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5vYmplY3RMaXRlcmFsKGUpJiZ4LmlzKGUuc3RhcnQpJiZ4LmlzKGUuZW5kKX1uLmlzPWl9KSh2fHwodj17fSkpO3ZhciBpZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe3JldHVybnt1cmk6cixyYW5nZTplfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5kZWZpbmVkKGUpJiZ2LmlzKGUucmFuZ2UpJiYoYS5zdHJpbmcoZS51cmkpfHxhLnVuZGVmaW5lZChlLnVyaSkpfW4uaXM9aX0pKGllfHwoaWU9e30pKTt2YXIgeGU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8scyl7cmV0dXJue3RhcmdldFVyaTpyLHRhcmdldFJhbmdlOmUsdGFyZ2V0U2VsZWN0aW9uUmFuZ2U6byxvcmlnaW5TZWxlY3Rpb25SYW5nZTpzfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5kZWZpbmVkKGUpJiZ2LmlzKGUudGFyZ2V0UmFuZ2UpJiZhLnN0cmluZyhlLnRhcmdldFVyaSkmJih2LmlzKGUudGFyZ2V0U2VsZWN0aW9uUmFuZ2UpfHxhLnVuZGVmaW5lZChlLnRhcmdldFNlbGVjdGlvblJhbmdlKSkmJih2LmlzKGUub3JpZ2luU2VsZWN0aW9uUmFuZ2UpfHxhLnVuZGVmaW5lZChlLm9yaWdpblNlbGVjdGlvblJhbmdlKSl9bi5pcz1pfSkoeGV8fCh4ZT17fSkpO3ZhciBvZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyxzKXtyZXR1cm57cmVkOnIsZ3JlZW46ZSxibHVlOm8sYWxwaGE6c319bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEubnVtYmVyUmFuZ2UoZS5yZWQsMCwxKSYmYS5udW1iZXJSYW5nZShlLmdyZWVuLDAsMSkmJmEubnVtYmVyUmFuZ2UoZS5ibHVlLDAsMSkmJmEubnVtYmVyUmFuZ2UoZS5hbHBoYSwwLDEpfW4uaXM9aX0pKG9lfHwob2U9e30pKTt2YXIga2U7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlKXtyZXR1cm57cmFuZ2U6cixjb2xvcjplfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gdi5pcyhlLnJhbmdlKSYmb2UuaXMoZS5jb2xvcil9bi5pcz1pfSkoa2V8fChrZT17fSkpO3ZhciBJZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyl7cmV0dXJue2xhYmVsOnIsdGV4dEVkaXQ6ZSxhZGRpdGlvbmFsVGV4dEVkaXRzOm99fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLnN0cmluZyhlLmxhYmVsKSYmKGEudW5kZWZpbmVkKGUudGV4dEVkaXQpfHxfLmlzKGUpKSYmKGEudW5kZWZpbmVkKGUuYWRkaXRpb25hbFRleHRFZGl0cyl8fGEudHlwZWRBcnJheShlLmFkZGl0aW9uYWxUZXh0RWRpdHMsXy5pcykpfW4uaXM9aX0pKEllfHwoSWU9e30pKTt2YXIgUDsoZnVuY3Rpb24obil7bi5Db21tZW50PSJjb21tZW50IixuLkltcG9ydHM9ImltcG9ydHMiLG4uUmVnaW9uPSJyZWdpb24ifSkoUHx8KFA9e30pKTt2YXIgX2U7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8scyx1KXt2YXIgbD17c3RhcnRMaW5lOnIsZW5kTGluZTplfTtyZXR1cm4gYS5kZWZpbmVkKG8pJiYobC5zdGFydENoYXJhY3Rlcj1vKSxhLmRlZmluZWQocykmJihsLmVuZENoYXJhY3Rlcj1zKSxhLmRlZmluZWQodSkmJihsLmtpbmQ9dSksbH1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS51aW50ZWdlcihlLnN0YXJ0TGluZSkmJmEudWludGVnZXIoZS5zdGFydExpbmUpJiYoYS51bmRlZmluZWQoZS5zdGFydENoYXJhY3Rlcil8fGEudWludGVnZXIoZS5zdGFydENoYXJhY3RlcikpJiYoYS51bmRlZmluZWQoZS5lbmRDaGFyYWN0ZXIpfHxhLnVpbnRlZ2VyKGUuZW5kQ2hhcmFjdGVyKSkmJihhLnVuZGVmaW5lZChlLmtpbmQpfHxhLnN0cmluZyhlLmtpbmQpKX1uLmlzPWl9KShfZXx8KF9lPXt9KSk7dmFyIHNlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue2xvY2F0aW9uOnIsbWVzc2FnZTplfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5kZWZpbmVkKGUpJiZpZS5pcyhlLmxvY2F0aW9uKSYmYS5zdHJpbmcoZS5tZXNzYWdlKX1uLmlzPWl9KShzZXx8KHNlPXt9KSk7dmFyIHc7KGZ1bmN0aW9uKG4pe24uRXJyb3I9MSxuLldhcm5pbmc9MixuLkluZm9ybWF0aW9uPTMsbi5IaW50PTR9KSh3fHwodz17fSkpO3ZhciBDZTsoZnVuY3Rpb24obil7bi5Vbm5lY2Vzc2FyeT0xLG4uRGVwcmVjYXRlZD0yfSkoQ2V8fChDZT17fSkpO3ZhciBiZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpKXt2YXIgcj1pO3JldHVybiByIT1udWxsJiZhLnN0cmluZyhyLmhyZWYpfW4uaXM9dH0pKGJlfHwoYmU9e30pKTt2YXIgWTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyxzLHUsbCl7dmFyIGY9e3JhbmdlOnIsbWVzc2FnZTplfTtyZXR1cm4gYS5kZWZpbmVkKG8pJiYoZi5zZXZlcml0eT1vKSxhLmRlZmluZWQocykmJihmLmNvZGU9cyksYS5kZWZpbmVkKHUpJiYoZi5zb3VyY2U9dSksYS5kZWZpbmVkKGwpJiYoZi5yZWxhdGVkSW5mb3JtYXRpb249bCksZn1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGUsbz1yO3JldHVybiBhLmRlZmluZWQobykmJnYuaXMoby5yYW5nZSkmJmEuc3RyaW5nKG8ubWVzc2FnZSkmJihhLm51bWJlcihvLnNldmVyaXR5KXx8YS51bmRlZmluZWQoby5zZXZlcml0eSkpJiYoYS5pbnRlZ2VyKG8uY29kZSl8fGEuc3RyaW5nKG8uY29kZSl8fGEudW5kZWZpbmVkKG8uY29kZSkpJiYoYS51bmRlZmluZWQoby5jb2RlRGVzY3JpcHRpb24pfHxhLnN0cmluZygoZT1vLmNvZGVEZXNjcmlwdGlvbik9PT1udWxsfHxlPT09dm9pZCAwP3ZvaWQgMDplLmhyZWYpKSYmKGEuc3RyaW5nKG8uc291cmNlKXx8YS51bmRlZmluZWQoby5zb3VyY2UpKSYmKGEudW5kZWZpbmVkKG8ucmVsYXRlZEluZm9ybWF0aW9uKXx8YS50eXBlZEFycmF5KG8ucmVsYXRlZEluZm9ybWF0aW9uLHNlLmlzKSl9bi5pcz1pfSkoWXx8KFk9e30pKTt2YXIgTzsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe2Zvcih2YXIgbz1bXSxzPTI7czxhcmd1bWVudHMubGVuZ3RoO3MrKylvW3MtMl09YXJndW1lbnRzW3NdO3ZhciB1PXt0aXRsZTpyLGNvbW1hbmQ6ZX07cmV0dXJuIGEuZGVmaW5lZChvKSYmby5sZW5ndGg+MCYmKHUuYXJndW1lbnRzPW8pLHV9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS5zdHJpbmcoZS50aXRsZSkmJmEuc3RyaW5nKGUuY29tbWFuZCl9bi5pcz1pfSkoT3x8KE89e30pKTt2YXIgXzsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChvLHMpe3JldHVybntyYW5nZTpvLG5ld1RleHQ6c319bi5yZXBsYWNlPXQ7ZnVuY3Rpb24gaShvLHMpe3JldHVybntyYW5nZTp7c3RhcnQ6byxlbmQ6b30sbmV3VGV4dDpzfX1uLmluc2VydD1pO2Z1bmN0aW9uIHIobyl7cmV0dXJue3JhbmdlOm8sbmV3VGV4dDoiIn19bi5kZWw9cjtmdW5jdGlvbiBlKG8pe3ZhciBzPW87cmV0dXJuIGEub2JqZWN0TGl0ZXJhbChzKSYmYS5zdHJpbmcocy5uZXdUZXh0KSYmdi5pcyhzLnJhbmdlKX1uLmlzPWV9KShffHwoXz17fSkpO3ZhciBSOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvKXt2YXIgcz17bGFiZWw6cn07cmV0dXJuIGUhPT12b2lkIDAmJihzLm5lZWRzQ29uZmlybWF0aW9uPWUpLG8hPT12b2lkIDAmJihzLmRlc2NyaXB0aW9uPW8pLHN9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGUhPT12b2lkIDAmJmEub2JqZWN0TGl0ZXJhbChlKSYmYS5zdHJpbmcoZS5sYWJlbCkmJihhLmJvb2xlYW4oZS5uZWVkc0NvbmZpcm1hdGlvbil8fGUubmVlZHNDb25maXJtYXRpb249PT12b2lkIDApJiYoYS5zdHJpbmcoZS5kZXNjcmlwdGlvbil8fGUuZGVzY3JpcHRpb249PT12b2lkIDApfW4uaXM9aX0pKFJ8fChSPXt9KSk7dmFyIFQ7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQoaSl7dmFyIHI9aTtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmcifW4uaXM9dH0pKFR8fChUPXt9KSk7dmFyIEk7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQobyxzLHUpe3JldHVybntyYW5nZTpvLG5ld1RleHQ6cyxhbm5vdGF0aW9uSWQ6dX19bi5yZXBsYWNlPXQ7ZnVuY3Rpb24gaShvLHMsdSl7cmV0dXJue3JhbmdlOntzdGFydDpvLGVuZDpvfSxuZXdUZXh0OnMsYW5ub3RhdGlvbklkOnV9fW4uaW5zZXJ0PWk7ZnVuY3Rpb24gcihvLHMpe3JldHVybntyYW5nZTpvLG5ld1RleHQ6IiIsYW5ub3RhdGlvbklkOnN9fW4uZGVsPXI7ZnVuY3Rpb24gZShvKXt2YXIgcz1vO3JldHVybiBfLmlzKHMpJiYoUi5pcyhzLmFubm90YXRpb25JZCl8fFQuaXMocy5hbm5vdGF0aW9uSWQpKX1uLmlzPWV9KShJfHwoST17fSkpO3ZhciBaOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3RleHREb2N1bWVudDpyLGVkaXRzOmV9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLmRlZmluZWQoZSkmJmVlLmlzKGUudGV4dERvY3VtZW50KSYmQXJyYXkuaXNBcnJheShlLmVkaXRzKX1uLmlzPWl9KShafHwoWj17fSkpO3ZhciBOOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvKXt2YXIgcz17a2luZDoiY3JlYXRlIix1cmk6cn07cmV0dXJuIGUhPT12b2lkIDAmJihlLm92ZXJ3cml0ZSE9PXZvaWQgMHx8ZS5pZ25vcmVJZkV4aXN0cyE9PXZvaWQgMCkmJihzLm9wdGlvbnM9ZSksbyE9PXZvaWQgMCYmKHMuYW5ub3RhdGlvbklkPW8pLHN9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGUmJmUua2luZD09PSJjcmVhdGUiJiZhLnN0cmluZyhlLnVyaSkmJihlLm9wdGlvbnM9PT12b2lkIDB8fChlLm9wdGlvbnMub3ZlcndyaXRlPT09dm9pZCAwfHxhLmJvb2xlYW4oZS5vcHRpb25zLm92ZXJ3cml0ZSkpJiYoZS5vcHRpb25zLmlnbm9yZUlmRXhpc3RzPT09dm9pZCAwfHxhLmJvb2xlYW4oZS5vcHRpb25zLmlnbm9yZUlmRXhpc3RzKSkpJiYoZS5hbm5vdGF0aW9uSWQ9PT12b2lkIDB8fFQuaXMoZS5hbm5vdGF0aW9uSWQpKX1uLmlzPWl9KShOfHwoTj17fSkpO3ZhciBWOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvLHMpe3ZhciB1PXtraW5kOiJyZW5hbWUiLG9sZFVyaTpyLG5ld1VyaTplfTtyZXR1cm4gbyE9PXZvaWQgMCYmKG8ub3ZlcndyaXRlIT09dm9pZCAwfHxvLmlnbm9yZUlmRXhpc3RzIT09dm9pZCAwKSYmKHUub3B0aW9ucz1vKSxzIT09dm9pZCAwJiYodS5hbm5vdGF0aW9uSWQ9cyksdX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmZS5raW5kPT09InJlbmFtZSImJmEuc3RyaW5nKGUub2xkVXJpKSYmYS5zdHJpbmcoZS5uZXdVcmkpJiYoZS5vcHRpb25zPT09dm9pZCAwfHwoZS5vcHRpb25zLm92ZXJ3cml0ZT09PXZvaWQgMHx8YS5ib29sZWFuKGUub3B0aW9ucy5vdmVyd3JpdGUpKSYmKGUub3B0aW9ucy5pZ25vcmVJZkV4aXN0cz09PXZvaWQgMHx8YS5ib29sZWFuKGUub3B0aW9ucy5pZ25vcmVJZkV4aXN0cykpKSYmKGUuYW5ub3RhdGlvbklkPT09dm9pZCAwfHxULmlzKGUuYW5ub3RhdGlvbklkKSl9bi5pcz1pfSkoVnx8KFY9e30pKTt2YXIgejsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyl7dmFyIHM9e2tpbmQ6ImRlbGV0ZSIsdXJpOnJ9O3JldHVybiBlIT09dm9pZCAwJiYoZS5yZWN1cnNpdmUhPT12b2lkIDB8fGUuaWdub3JlSWZOb3RFeGlzdHMhPT12b2lkIDApJiYocy5vcHRpb25zPWUpLG8hPT12b2lkIDAmJihzLmFubm90YXRpb25JZD1vKSxzfW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBlJiZlLmtpbmQ9PT0iZGVsZXRlIiYmYS5zdHJpbmcoZS51cmkpJiYoZS5vcHRpb25zPT09dm9pZCAwfHwoZS5vcHRpb25zLnJlY3Vyc2l2ZT09PXZvaWQgMHx8YS5ib29sZWFuKGUub3B0aW9ucy5yZWN1cnNpdmUpKSYmKGUub3B0aW9ucy5pZ25vcmVJZk5vdEV4aXN0cz09PXZvaWQgMHx8YS5ib29sZWFuKGUub3B0aW9ucy5pZ25vcmVJZk5vdEV4aXN0cykpKSYmKGUuYW5ub3RhdGlvbklkPT09dm9pZCAwfHxULmlzKGUuYW5ub3RhdGlvbklkKSl9bi5pcz1pfSkoenx8KHo9e30pKTt2YXIgYWU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQoaSl7dmFyIHI9aTtyZXR1cm4gciYmKHIuY2hhbmdlcyE9PXZvaWQgMHx8ci5kb2N1bWVudENoYW5nZXMhPT12b2lkIDApJiYoci5kb2N1bWVudENoYW5nZXM9PT12b2lkIDB8fHIuZG9jdW1lbnRDaGFuZ2VzLmV2ZXJ5KGZ1bmN0aW9uKGUpe3JldHVybiBhLnN0cmluZyhlLmtpbmQpP04uaXMoZSl8fFYuaXMoZSl8fHouaXMoZSk6Wi5pcyhlKX0pKX1uLmlzPXR9KShhZXx8KGFlPXt9KSk7dmFyIEc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsaSl7dGhpcy5lZGl0cz10LHRoaXMuY2hhbmdlQW5ub3RhdGlvbnM9aX1yZXR1cm4gbi5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKHQsaSxyKXt2YXIgZSxvO2lmKHI9PT12b2lkIDA/ZT1fLmluc2VydCh0LGkpOlQuaXMocik/KG89cixlPUkuaW5zZXJ0KHQsaSxyKSk6KHRoaXMuYXNzZXJ0Q2hhbmdlQW5ub3RhdGlvbnModGhpcy5jaGFuZ2VBbm5vdGF0aW9ucyksbz10aGlzLmNoYW5nZUFubm90YXRpb25zLm1hbmFnZShyKSxlPUkuaW5zZXJ0KHQsaSxvKSksdGhpcy5lZGl0cy5wdXNoKGUpLG8hPT12b2lkIDApcmV0dXJuIG99LG4ucHJvdG90eXBlLnJlcGxhY2U9ZnVuY3Rpb24odCxpLHIpe3ZhciBlLG87aWYocj09PXZvaWQgMD9lPV8ucmVwbGFjZSh0LGkpOlQuaXMocik/KG89cixlPUkucmVwbGFjZSh0LGkscikpOih0aGlzLmFzc2VydENoYW5nZUFubm90YXRpb25zKHRoaXMuY2hhbmdlQW5ub3RhdGlvbnMpLG89dGhpcy5jaGFuZ2VBbm5vdGF0aW9ucy5tYW5hZ2UociksZT1JLnJlcGxhY2UodCxpLG8pKSx0aGlzLmVkaXRzLnB1c2goZSksbyE9PXZvaWQgMClyZXR1cm4gb30sbi5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKHQsaSl7dmFyIHIsZTtpZihpPT09dm9pZCAwP3I9Xy5kZWwodCk6VC5pcyhpKT8oZT1pLHI9SS5kZWwodCxpKSk6KHRoaXMuYXNzZXJ0Q2hhbmdlQW5ub3RhdGlvbnModGhpcy5jaGFuZ2VBbm5vdGF0aW9ucyksZT10aGlzLmNoYW5nZUFubm90YXRpb25zLm1hbmFnZShpKSxyPUkuZGVsKHQsZSkpLHRoaXMuZWRpdHMucHVzaChyKSxlIT09dm9pZCAwKXJldHVybiBlfSxuLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dGhpcy5lZGl0cy5wdXNoKHQpfSxuLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGl0c30sbi5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmVkaXRzLnNwbGljZSgwLHRoaXMuZWRpdHMubGVuZ3RoKX0sbi5wcm90b3R5cGUuYXNzZXJ0Q2hhbmdlQW5ub3RhdGlvbnM9ZnVuY3Rpb24odCl7aWYodD09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIlRleHQgZWRpdCBjaGFuZ2UgaXMgbm90IGNvbmZpZ3VyZWQgdG8gbWFuYWdlIGNoYW5nZSBhbm5vdGF0aW9ucy4iKX0sbn0oKSx3ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dGhpcy5fYW5ub3RhdGlvbnM9dD09PXZvaWQgMD9PYmplY3QuY3JlYXRlKG51bGwpOnQsdGhpcy5fY291bnRlcj0wLHRoaXMuX3NpemU9MH1yZXR1cm4gbi5wcm90b3R5cGUuYWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Fubm90YXRpb25zfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsInNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2l6ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS5tYW5hZ2U9ZnVuY3Rpb24odCxpKXt2YXIgcjtpZihULmlzKHQpP3I9dDoocj10aGlzLm5leHRJZCgpLGk9dCksdGhpcy5fYW5ub3RhdGlvbnNbcl0hPT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJJZCAiK3IrIiBpcyBhbHJlYWR5IGluIHVzZS4iKTtpZihpPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiTm8gYW5ub3RhdGlvbiBwcm92aWRlZCBmb3IgaWQgIityKTtyZXR1cm4gdGhpcy5fYW5ub3RhdGlvbnNbcl09aSx0aGlzLl9zaXplKysscn0sbi5wcm90b3R5cGUubmV4dElkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvdW50ZXIrKyx0aGlzLl9jb3VudGVyLnRvU3RyaW5nKCl9LG59KCksVW49ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQpe3ZhciBpPXRoaXM7dGhpcy5fdGV4dEVkaXRDaGFuZ2VzPU9iamVjdC5jcmVhdGUobnVsbCksdCE9PXZvaWQgMD8odGhpcy5fd29ya3NwYWNlRWRpdD10LHQuZG9jdW1lbnRDaGFuZ2VzPyh0aGlzLl9jaGFuZ2VBbm5vdGF0aW9ucz1uZXcgd2UodC5jaGFuZ2VBbm5vdGF0aW9ucyksdC5jaGFuZ2VBbm5vdGF0aW9ucz10aGlzLl9jaGFuZ2VBbm5vdGF0aW9ucy5hbGwoKSx0LmRvY3VtZW50Q2hhbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKHIpe2lmKFouaXMocikpe3ZhciBlPW5ldyBHKHIuZWRpdHMsaS5fY2hhbmdlQW5ub3RhdGlvbnMpO2kuX3RleHRFZGl0Q2hhbmdlc1tyLnRleHREb2N1bWVudC51cmldPWV9fSkpOnQuY2hhbmdlcyYmT2JqZWN0LmtleXModC5jaGFuZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBlPW5ldyBHKHQuY2hhbmdlc1tyXSk7aS5fdGV4dEVkaXRDaGFuZ2VzW3JdPWV9KSk6dGhpcy5fd29ya3NwYWNlRWRpdD17fX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLCJlZGl0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdERvY3VtZW50Q2hhbmdlcygpLHRoaXMuX2NoYW5nZUFubm90YXRpb25zIT09dm9pZCAwJiYodGhpcy5fY2hhbmdlQW5ub3RhdGlvbnMuc2l6ZT09PTA/dGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VBbm5vdGF0aW9ucz12b2lkIDA6dGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VBbm5vdGF0aW9ucz10aGlzLl9jaGFuZ2VBbm5vdGF0aW9ucy5hbGwoKSksdGhpcy5fd29ya3NwYWNlRWRpdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS5nZXRUZXh0RWRpdENoYW5nZT1mdW5jdGlvbih0KXtpZihlZS5pcyh0KSl7aWYodGhpcy5pbml0RG9jdW1lbnRDaGFuZ2VzKCksdGhpcy5fd29ya3NwYWNlRWRpdC5kb2N1bWVudENoYW5nZXM9PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJXb3Jrc3BhY2UgZWRpdCBpcyBub3QgY29uZmlndXJlZCBmb3IgZG9jdW1lbnQgY2hhbmdlcy4iKTt2YXIgaT17dXJpOnQudXJpLHZlcnNpb246dC52ZXJzaW9ufSxyPXRoaXMuX3RleHRFZGl0Q2hhbmdlc1tpLnVyaV07aWYoIXIpe3ZhciBlPVtdLG89e3RleHREb2N1bWVudDppLGVkaXRzOmV9O3RoaXMuX3dvcmtzcGFjZUVkaXQuZG9jdW1lbnRDaGFuZ2VzLnB1c2gobykscj1uZXcgRyhlLHRoaXMuX2NoYW5nZUFubm90YXRpb25zKSx0aGlzLl90ZXh0RWRpdENoYW5nZXNbaS51cmldPXJ9cmV0dXJuIHJ9ZWxzZXtpZih0aGlzLmluaXRDaGFuZ2VzKCksdGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VzPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiV29ya3NwYWNlIGVkaXQgaXMgbm90IGNvbmZpZ3VyZWQgZm9yIG5vcm1hbCB0ZXh0IGVkaXQgY2hhbmdlcy4iKTt2YXIgcj10aGlzLl90ZXh0RWRpdENoYW5nZXNbdF07aWYoIXIpe3ZhciBlPVtdO3RoaXMuX3dvcmtzcGFjZUVkaXQuY2hhbmdlc1t0XT1lLHI9bmV3IEcoZSksdGhpcy5fdGV4dEVkaXRDaGFuZ2VzW3RdPXJ9cmV0dXJuIHJ9fSxuLnByb3RvdHlwZS5pbml0RG9jdW1lbnRDaGFuZ2VzPWZ1bmN0aW9uKCl7dGhpcy5fd29ya3NwYWNlRWRpdC5kb2N1bWVudENoYW5nZXM9PT12b2lkIDAmJnRoaXMuX3dvcmtzcGFjZUVkaXQuY2hhbmdlcz09PXZvaWQgMCYmKHRoaXMuX2NoYW5nZUFubm90YXRpb25zPW5ldyB3ZSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz1bXSx0aGlzLl93b3Jrc3BhY2VFZGl0LmNoYW5nZUFubm90YXRpb25zPXRoaXMuX2NoYW5nZUFubm90YXRpb25zLmFsbCgpKX0sbi5wcm90b3R5cGUuaW5pdENoYW5nZXM9ZnVuY3Rpb24oKXt0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz09PXZvaWQgMCYmdGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VzPT09dm9pZCAwJiYodGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VzPU9iamVjdC5jcmVhdGUobnVsbCkpfSxuLnByb3RvdHlwZS5jcmVhdGVGaWxlPWZ1bmN0aW9uKHQsaSxyKXtpZih0aGlzLmluaXREb2N1bWVudENoYW5nZXMoKSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIldvcmtzcGFjZSBlZGl0IGlzIG5vdCBjb25maWd1cmVkIGZvciBkb2N1bWVudCBjaGFuZ2VzLiIpO3ZhciBlO1IuaXMoaSl8fFQuaXMoaSk/ZT1pOnI9aTt2YXIgbyxzO2lmKGU9PT12b2lkIDA/bz1OLmNyZWF0ZSh0LHIpOihzPVQuaXMoZSk/ZTp0aGlzLl9jaGFuZ2VBbm5vdGF0aW9ucy5tYW5hZ2UoZSksbz1OLmNyZWF0ZSh0LHIscykpLHRoaXMuX3dvcmtzcGFjZUVkaXQuZG9jdW1lbnRDaGFuZ2VzLnB1c2gobykscyE9PXZvaWQgMClyZXR1cm4gc30sbi5wcm90b3R5cGUucmVuYW1lRmlsZT1mdW5jdGlvbih0LGkscixlKXtpZih0aGlzLmluaXREb2N1bWVudENoYW5nZXMoKSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIldvcmtzcGFjZSBlZGl0IGlzIG5vdCBjb25maWd1cmVkIGZvciBkb2N1bWVudCBjaGFuZ2VzLiIpO3ZhciBvO1IuaXMocil8fFQuaXMocik/bz1yOmU9cjt2YXIgcyx1O2lmKG89PT12b2lkIDA/cz1WLmNyZWF0ZSh0LGksZSk6KHU9VC5pcyhvKT9vOnRoaXMuX2NoYW5nZUFubm90YXRpb25zLm1hbmFnZShvKSxzPVYuY3JlYXRlKHQsaSxlLHUpKSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcy5wdXNoKHMpLHUhPT12b2lkIDApcmV0dXJuIHV9LG4ucHJvdG90eXBlLmRlbGV0ZUZpbGU9ZnVuY3Rpb24odCxpLHIpe2lmKHRoaXMuaW5pdERvY3VtZW50Q2hhbmdlcygpLHRoaXMuX3dvcmtzcGFjZUVkaXQuZG9jdW1lbnRDaGFuZ2VzPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiV29ya3NwYWNlIGVkaXQgaXMgbm90IGNvbmZpZ3VyZWQgZm9yIGRvY3VtZW50IGNoYW5nZXMuIik7dmFyIGU7Ui5pcyhpKXx8VC5pcyhpKT9lPWk6cj1pO3ZhciBvLHM7aWYoZT09PXZvaWQgMD9vPXouY3JlYXRlKHQscik6KHM9VC5pcyhlKT9lOnRoaXMuX2NoYW5nZUFubm90YXRpb25zLm1hbmFnZShlKSxvPXouY3JlYXRlKHQscixzKSksdGhpcy5fd29ya3NwYWNlRWRpdC5kb2N1bWVudENoYW5nZXMucHVzaChvKSxzIT09dm9pZCAwKXJldHVybiBzfSxufSgpO3ZhciBFZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyKXtyZXR1cm57dXJpOnJ9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLmRlZmluZWQoZSkmJmEuc3RyaW5nKGUudXJpKX1uLmlzPWl9KShFZXx8KEVlPXt9KSk7dmFyIFJlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3VyaTpyLHZlcnNpb246ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS5zdHJpbmcoZS51cmkpJiZhLmludGVnZXIoZS52ZXJzaW9uKX1uLmlzPWl9KShSZXx8KFJlPXt9KSk7dmFyIGVlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3VyaTpyLHZlcnNpb246ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS5zdHJpbmcoZS51cmkpJiYoZS52ZXJzaW9uPT09bnVsbHx8YS5pbnRlZ2VyKGUudmVyc2lvbikpfW4uaXM9aX0pKGVlfHwoZWU9e30pKTt2YXIgUGU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8scyl7cmV0dXJue3VyaTpyLGxhbmd1YWdlSWQ6ZSx2ZXJzaW9uOm8sdGV4dDpzfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5kZWZpbmVkKGUpJiZhLnN0cmluZyhlLnVyaSkmJmEuc3RyaW5nKGUubGFuZ3VhZ2VJZCkmJmEuaW50ZWdlcihlLnZlcnNpb24pJiZhLnN0cmluZyhlLnRleHQpfW4uaXM9aX0pKFBlfHwoUGU9e30pKTt2YXIgWDsoZnVuY3Rpb24obil7bi5QbGFpblRleHQ9InBsYWludGV4dCIsbi5NYXJrZG93bj0ibWFya2Rvd24ifSkoWHx8KFg9e30pKTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpKXt2YXIgcj1pO3JldHVybiByPT09bi5QbGFpblRleHR8fHI9PT1uLk1hcmtkb3dufW4uaXM9dH0pKFh8fChYPXt9KSk7dmFyIHVlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkpe3ZhciByPWk7cmV0dXJuIGEub2JqZWN0TGl0ZXJhbChpKSYmWC5pcyhyLmtpbmQpJiZhLnN0cmluZyhyLnZhbHVlKX1uLmlzPXR9KSh1ZXx8KHVlPXt9KSk7dmFyIHA7KGZ1bmN0aW9uKG4pe24uVGV4dD0xLG4uTWV0aG9kPTIsbi5GdW5jdGlvbj0zLG4uQ29uc3RydWN0b3I9NCxuLkZpZWxkPTUsbi5WYXJpYWJsZT02LG4uQ2xhc3M9NyxuLkludGVyZmFjZT04LG4uTW9kdWxlPTksbi5Qcm9wZXJ0eT0xMCxuLlVuaXQ9MTEsbi5WYWx1ZT0xMixuLkVudW09MTMsbi5LZXl3b3JkPTE0LG4uU25pcHBldD0xNSxuLkNvbG9yPTE2LG4uRmlsZT0xNyxuLlJlZmVyZW5jZT0xOCxuLkZvbGRlcj0xOSxuLkVudW1NZW1iZXI9MjAsbi5Db25zdGFudD0yMSxuLlN0cnVjdD0yMixuLkV2ZW50PTIzLG4uT3BlcmF0b3I9MjQsbi5UeXBlUGFyYW1ldGVyPTI1fSkocHx8KHA9e30pKTt2YXIgbmU7KGZ1bmN0aW9uKG4pe24uUGxhaW5UZXh0PTEsbi5TbmlwcGV0PTJ9KShuZXx8KG5lPXt9KSk7dmFyIFdlOyhmdW5jdGlvbihuKXtuLkRlcHJlY2F0ZWQ9MX0pKFdlfHwoV2U9e30pKTt2YXIgRGU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8pe3JldHVybntuZXdUZXh0OnIsaW5zZXJ0OmUscmVwbGFjZTpvfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmYS5zdHJpbmcoZS5uZXdUZXh0KSYmdi5pcyhlLmluc2VydCkmJnYuaXMoZS5yZXBsYWNlKX1uLmlzPWl9KShEZXx8KERlPXt9KSk7dmFyIExlOyhmdW5jdGlvbihuKXtuLmFzSXM9MSxuLmFkanVzdEluZGVudGF0aW9uPTJ9KShMZXx8KExlPXt9KSk7dmFyIFNlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkpe3JldHVybntsYWJlbDppfX1uLmNyZWF0ZT10fSkoU2V8fChTZT17fSkpO3ZhciBGZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpLHIpe3JldHVybntpdGVtczppfHxbXSxpc0luY29tcGxldGU6ISFyfX1uLmNyZWF0ZT10fSkoRmV8fChGZT17fSkpO3ZhciB0ZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyKXtyZXR1cm4gci5yZXBsYWNlKC9bXFxgKl97fVtcXSgpIytcLS4hXS9nLCJcXCQmIil9bi5mcm9tUGxhaW5UZXh0PXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLnN0cmluZyhlKXx8YS5vYmplY3RMaXRlcmFsKGUpJiZhLnN0cmluZyhlLmxhbmd1YWdlKSYmYS5zdHJpbmcoZS52YWx1ZSl9bi5pcz1pfSkodGV8fCh0ZT17fSkpO3ZhciBNZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpKXt2YXIgcj1pO3JldHVybiEhciYmYS5vYmplY3RMaXRlcmFsKHIpJiYodWUuaXMoci5jb250ZW50cyl8fHRlLmlzKHIuY29udGVudHMpfHxhLnR5cGVkQXJyYXkoci5jb250ZW50cyx0ZS5pcykpJiYoaS5yYW5nZT09PXZvaWQgMHx8di5pcyhpLnJhbmdlKSl9bi5pcz10fSkoTWV8fChNZT17fSkpO3ZhciBBZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpLHIpe3JldHVybiByP3tsYWJlbDppLGRvY3VtZW50YXRpb246cn06e2xhYmVsOml9fW4uY3JlYXRlPXR9KShBZXx8KEFlPXt9KSk7dmFyIEhlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkscil7Zm9yKHZhciBlPVtdLG89MjtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKWVbby0yXT1hcmd1bWVudHNbb107dmFyIHM9e2xhYmVsOml9O3JldHVybiBhLmRlZmluZWQocikmJihzLmRvY3VtZW50YXRpb249ciksYS5kZWZpbmVkKGUpP3MucGFyYW1ldGVycz1lOnMucGFyYW1ldGVycz1bXSxzfW4uY3JlYXRlPXR9KShIZXx8KEhlPXt9KSk7dmFyIFc7KGZ1bmN0aW9uKG4pe24uVGV4dD0xLG4uUmVhZD0yLG4uV3JpdGU9M30pKFd8fChXPXt9KSk7dmFyIEtlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkscil7dmFyIGU9e3JhbmdlOml9O3JldHVybiBhLm51bWJlcihyKSYmKGUua2luZD1yKSxlfW4uY3JlYXRlPXR9KShLZXx8KEtlPXt9KSk7dmFyIG07KGZ1bmN0aW9uKG4pe24uRmlsZT0xLG4uTW9kdWxlPTIsbi5OYW1lc3BhY2U9MyxuLlBhY2thZ2U9NCxuLkNsYXNzPTUsbi5NZXRob2Q9NixuLlByb3BlcnR5PTcsbi5GaWVsZD04LG4uQ29uc3RydWN0b3I9OSxuLkVudW09MTAsbi5JbnRlcmZhY2U9MTEsbi5GdW5jdGlvbj0xMixuLlZhcmlhYmxlPTEzLG4uQ29uc3RhbnQ9MTQsbi5TdHJpbmc9MTUsbi5OdW1iZXI9MTYsbi5Cb29sZWFuPTE3LG4uQXJyYXk9MTgsbi5PYmplY3Q9MTksbi5LZXk9MjAsbi5OdWxsPTIxLG4uRW51bU1lbWJlcj0yMixuLlN0cnVjdD0yMyxuLkV2ZW50PTI0LG4uT3BlcmF0b3I9MjUsbi5UeXBlUGFyYW1ldGVyPTI2fSkobXx8KG09e30pKTt2YXIgVWU7KGZ1bmN0aW9uKG4pe24uRGVwcmVjYXRlZD0xfSkoVWV8fChVZT17fSkpO3ZhciBqZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpLHIsZSxvLHMpe3ZhciB1PXtuYW1lOmksa2luZDpyLGxvY2F0aW9uOnt1cmk6byxyYW5nZTplfX07cmV0dXJuIHMmJih1LmNvbnRhaW5lck5hbWU9cyksdX1uLmNyZWF0ZT10fSkoamV8fChqZT17fSkpO3ZhciBPZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyxzLHUsbCl7dmFyIGY9e25hbWU6cixkZXRhaWw6ZSxraW5kOm8scmFuZ2U6cyxzZWxlY3Rpb25SYW5nZTp1fTtyZXR1cm4gbCE9PXZvaWQgMCYmKGYuY2hpbGRyZW49bCksZn1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmYS5zdHJpbmcoZS5uYW1lKSYmYS5udW1iZXIoZS5raW5kKSYmdi5pcyhlLnJhbmdlKSYmdi5pcyhlLnNlbGVjdGlvblJhbmdlKSYmKGUuZGV0YWlsPT09dm9pZCAwfHxhLnN0cmluZyhlLmRldGFpbCkpJiYoZS5kZXByZWNhdGVkPT09dm9pZCAwfHxhLmJvb2xlYW4oZS5kZXByZWNhdGVkKSkmJihlLmNoaWxkcmVuPT09dm9pZCAwfHxBcnJheS5pc0FycmF5KGUuY2hpbGRyZW4pKSYmKGUudGFncz09PXZvaWQgMHx8QXJyYXkuaXNBcnJheShlLnRhZ3MpKX1uLmlzPWl9KShPZXx8KE9lPXt9KSk7dmFyIE5lOyhmdW5jdGlvbihuKXtuLkVtcHR5PSIiLG4uUXVpY2tGaXg9InF1aWNrZml4IixuLlJlZmFjdG9yPSJyZWZhY3RvciIsbi5SZWZhY3RvckV4dHJhY3Q9InJlZmFjdG9yLmV4dHJhY3QiLG4uUmVmYWN0b3JJbmxpbmU9InJlZmFjdG9yLmlubGluZSIsbi5SZWZhY3RvclJld3JpdGU9InJlZmFjdG9yLnJld3JpdGUiLG4uU291cmNlPSJzb3VyY2UiLG4uU291cmNlT3JnYW5pemVJbXBvcnRzPSJzb3VyY2Uub3JnYW5pemVJbXBvcnRzIixuLlNvdXJjZUZpeEFsbD0ic291cmNlLmZpeEFsbCJ9KShOZXx8KE5lPXt9KSk7dmFyIFZlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7dmFyIG89e2RpYWdub3N0aWNzOnJ9O3JldHVybiBlIT1udWxsJiYoby5vbmx5PWUpLG99bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS50eXBlZEFycmF5KGUuZGlhZ25vc3RpY3MsWS5pcykmJihlLm9ubHk9PT12b2lkIDB8fGEudHlwZWRBcnJheShlLm9ubHksYS5zdHJpbmcpKX1uLmlzPWl9KShWZXx8KFZlPXt9KSk7dmFyIHplOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvKXt2YXIgcz17dGl0bGU6cn0sdT0hMDtyZXR1cm4gdHlwZW9mIGU9PSJzdHJpbmciPyh1PSExLHMua2luZD1lKTpPLmlzKGUpP3MuY29tbWFuZD1lOnMuZWRpdD1lLHUmJm8hPT12b2lkIDAmJihzLmtpbmQ9byksc31uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmYS5zdHJpbmcoZS50aXRsZSkmJihlLmRpYWdub3N0aWNzPT09dm9pZCAwfHxhLnR5cGVkQXJyYXkoZS5kaWFnbm9zdGljcyxZLmlzKSkmJihlLmtpbmQ9PT12b2lkIDB8fGEuc3RyaW5nKGUua2luZCkpJiYoZS5lZGl0IT09dm9pZCAwfHxlLmNvbW1hbmQhPT12b2lkIDApJiYoZS5jb21tYW5kPT09dm9pZCAwfHxPLmlzKGUuY29tbWFuZCkpJiYoZS5pc1ByZWZlcnJlZD09PXZvaWQgMHx8YS5ib29sZWFuKGUuaXNQcmVmZXJyZWQpKSYmKGUuZWRpdD09PXZvaWQgMHx8YWUuaXMoZS5lZGl0KSl9bi5pcz1pfSkoemV8fCh6ZT17fSkpO3ZhciBYZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe3ZhciBvPXtyYW5nZTpyfTtyZXR1cm4gYS5kZWZpbmVkKGUpJiYoby5kYXRhPWUpLG99bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmdi5pcyhlLnJhbmdlKSYmKGEudW5kZWZpbmVkKGUuY29tbWFuZCl8fE8uaXMoZS5jb21tYW5kKSl9bi5pcz1pfSkoWGV8fChYZT17fSkpO3ZhciBCZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe3JldHVybnt0YWJTaXplOnIsaW5zZXJ0U3BhY2VzOmV9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLmRlZmluZWQoZSkmJmEudWludGVnZXIoZS50YWJTaXplKSYmYS5ib29sZWFuKGUuaW5zZXJ0U3BhY2VzKX1uLmlzPWl9KShCZXx8KEJlPXt9KSk7dmFyICRlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvKXtyZXR1cm57cmFuZ2U6cix0YXJnZXQ6ZSxkYXRhOm99fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLmRlZmluZWQoZSkmJnYuaXMoZS5yYW5nZSkmJihhLnVuZGVmaW5lZChlLnRhcmdldCl8fGEuc3RyaW5nKGUudGFyZ2V0KSl9bi5pcz1pfSkoJGV8fCgkZT17fSkpO3ZhciBxZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe3JldHVybntyYW5nZTpyLHBhcmVudDplfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSE9PXZvaWQgMCYmdi5pcyhlLnJhbmdlKSYmKGUucGFyZW50PT09dm9pZCAwfHxuLmlzKGUucGFyZW50KSl9bi5pcz1pfSkocWV8fChxZT17fSkpO3ZhciBRZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChvLHMsdSxsKXtyZXR1cm4gbmV3IG1uKG8scyx1LGwpfW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShvKXt2YXIgcz1vO3JldHVybiEhKGEuZGVmaW5lZChzKSYmYS5zdHJpbmcocy51cmkpJiYoYS51bmRlZmluZWQocy5sYW5ndWFnZUlkKXx8YS5zdHJpbmcocy5sYW5ndWFnZUlkKSkmJmEudWludGVnZXIocy5saW5lQ291bnQpJiZhLmZ1bmMocy5nZXRUZXh0KSYmYS5mdW5jKHMucG9zaXRpb25BdCkmJmEuZnVuYyhzLm9mZnNldEF0KSl9bi5pcz1pO2Z1bmN0aW9uIHIobyxzKXtmb3IodmFyIHU9by5nZXRUZXh0KCksbD1lKHMsZnVuY3Rpb24oRSwkKXt2YXIgcGU9RS5yYW5nZS5zdGFydC5saW5lLSQucmFuZ2Uuc3RhcnQubGluZTtyZXR1cm4gcGU9PT0wP0UucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyLSQucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyOnBlfSksZj11Lmxlbmd0aCxnPWwubGVuZ3RoLTE7Zz49MDtnLS0pe3ZhciBoPWxbZ10saz1vLm9mZnNldEF0KGgucmFuZ2Uuc3RhcnQpLGM9by5vZmZzZXRBdChoLnJhbmdlLmVuZCk7aWYoYzw9Zil1PXUuc3Vic3RyaW5nKDAsaykraC5uZXdUZXh0K3Uuc3Vic3RyaW5nKGMsdS5sZW5ndGgpO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCJPdmVybGFwcGluZyBlZGl0Iik7Zj1rfXJldHVybiB1fW4uYXBwbHlFZGl0cz1yO2Z1bmN0aW9uIGUobyxzKXtpZihvLmxlbmd0aDw9MSlyZXR1cm4gbzt2YXIgdT1vLmxlbmd0aC8yfDAsbD1vLnNsaWNlKDAsdSksZj1vLnNsaWNlKHUpO2UobCxzKSxlKGYscyk7Zm9yKHZhciBnPTAsaD0wLGs9MDtnPGwubGVuZ3RoJiZoPGYubGVuZ3RoOyl7dmFyIGM9cyhsW2ddLGZbaF0pO2M8PTA/b1trKytdPWxbZysrXTpvW2srK109ZltoKytdfWZvcig7ZzxsLmxlbmd0aDspb1trKytdPWxbZysrXTtmb3IoO2g8Zi5sZW5ndGg7KW9baysrXT1mW2grK107cmV0dXJuIG99fSkoUWV8fChRZT17fSkpO3ZhciBtbj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxpLHIsZSl7dGhpcy5fdXJpPXQsdGhpcy5fbGFuZ3VhZ2VJZD1pLHRoaXMuX3ZlcnNpb249cix0aGlzLl9jb250ZW50PWUsdGhpcy5fbGluZU9mZnNldHM9dm9pZCAwfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsInVyaSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cml9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLCJsYW5ndWFnZUlkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhbmd1YWdlSWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLCJ2ZXJzaW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZlcnNpb259LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbi5wcm90b3R5cGUuZ2V0VGV4dD1mdW5jdGlvbih0KXtpZih0KXt2YXIgaT10aGlzLm9mZnNldEF0KHQuc3RhcnQpLHI9dGhpcy5vZmZzZXRBdCh0LmVuZCk7cmV0dXJuIHRoaXMuX2NvbnRlbnQuc3Vic3RyaW5nKGkscil9cmV0dXJuIHRoaXMuX2NvbnRlbnR9LG4ucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGkpe3RoaXMuX2NvbnRlbnQ9dC50ZXh0LHRoaXMuX3ZlcnNpb249aSx0aGlzLl9saW5lT2Zmc2V0cz12b2lkIDB9LG4ucHJvdG90eXBlLmdldExpbmVPZmZzZXRzPWZ1bmN0aW9uKCl7aWYodGhpcy5fbGluZU9mZnNldHM9PT12b2lkIDApe2Zvcih2YXIgdD1bXSxpPXRoaXMuX2NvbnRlbnQscj0hMCxlPTA7ZTxpLmxlbmd0aDtlKyspe3ImJih0LnB1c2goZSkscj0hMSk7dmFyIG89aS5jaGFyQXQoZSk7cj1vPT09IlxyInx8bz09PWAKYCxvPT09IlxyIiYmZSsxPGkubGVuZ3RoJiZpLmNoYXJBdChlKzEpPT09YApgJiZlKyt9ciYmaS5sZW5ndGg+MCYmdC5wdXNoKGkubGVuZ3RoKSx0aGlzLl9saW5lT2Zmc2V0cz10fXJldHVybiB0aGlzLl9saW5lT2Zmc2V0c30sbi5wcm90b3R5cGUucG9zaXRpb25BdD1mdW5jdGlvbih0KXt0PU1hdGgubWF4KE1hdGgubWluKHQsdGhpcy5fY29udGVudC5sZW5ndGgpLDApO3ZhciBpPXRoaXMuZ2V0TGluZU9mZnNldHMoKSxyPTAsZT1pLmxlbmd0aDtpZihlPT09MClyZXR1cm4geC5jcmVhdGUoMCx0KTtmb3IoO3I8ZTspe3ZhciBvPU1hdGguZmxvb3IoKHIrZSkvMik7aVtvXT50P2U9bzpyPW8rMX12YXIgcz1yLTE7cmV0dXJuIHguY3JlYXRlKHMsdC1pW3NdKX0sbi5wcm90b3R5cGUub2Zmc2V0QXQ9ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5nZXRMaW5lT2Zmc2V0cygpO2lmKHQubGluZT49aS5sZW5ndGgpcmV0dXJuIHRoaXMuX2NvbnRlbnQubGVuZ3RoO2lmKHQubGluZTwwKXJldHVybiAwO3ZhciByPWlbdC5saW5lXSxlPXQubGluZSsxPGkubGVuZ3RoP2lbdC5saW5lKzFdOnRoaXMuX2NvbnRlbnQubGVuZ3RoO3JldHVybiBNYXRoLm1heChNYXRoLm1pbihyK3QuY2hhcmFjdGVyLGUpLHIpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsImxpbmVDb3VudCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExpbmVPZmZzZXRzKCkubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG59KCksYTsoZnVuY3Rpb24obil7dmFyIHQ9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztmdW5jdGlvbiBpKGMpe3JldHVybiB0eXBlb2YgYzwidSJ9bi5kZWZpbmVkPWk7ZnVuY3Rpb24gcihjKXtyZXR1cm4gdHlwZW9mIGM+InUifW4udW5kZWZpbmVkPXI7ZnVuY3Rpb24gZShjKXtyZXR1cm4gYz09PSEwfHxjPT09ITF9bi5ib29sZWFuPWU7ZnVuY3Rpb24gbyhjKXtyZXR1cm4gdC5jYWxsKGMpPT09IltvYmplY3QgU3RyaW5nXSJ9bi5zdHJpbmc9bztmdW5jdGlvbiBzKGMpe3JldHVybiB0LmNhbGwoYyk9PT0iW29iamVjdCBOdW1iZXJdIn1uLm51bWJlcj1zO2Z1bmN0aW9uIHUoYyxFLCQpe3JldHVybiB0LmNhbGwoYyk9PT0iW29iamVjdCBOdW1iZXJdIiYmRTw9YyYmYzw9JH1uLm51bWJlclJhbmdlPXU7ZnVuY3Rpb24gbChjKXtyZXR1cm4gdC5jYWxsKGMpPT09IltvYmplY3QgTnVtYmVyXSImJi0yMTQ3NDgzNjQ4PD1jJiZjPD0yMTQ3NDgzNjQ3fW4uaW50ZWdlcj1sO2Z1bmN0aW9uIGYoYyl7cmV0dXJuIHQuY2FsbChjKT09PSJbb2JqZWN0IE51bWJlcl0iJiYwPD1jJiZjPD0yMTQ3NDgzNjQ3fW4udWludGVnZXI9ZjtmdW5jdGlvbiBnKGMpe3JldHVybiB0LmNhbGwoYyk9PT0iW29iamVjdCBGdW5jdGlvbl0ifW4uZnVuYz1nO2Z1bmN0aW9uIGgoYyl7cmV0dXJuIGMhPT1udWxsJiZ0eXBlb2YgYz09Im9iamVjdCJ9bi5vYmplY3RMaXRlcmFsPWg7ZnVuY3Rpb24gayhjLEUpe3JldHVybiBBcnJheS5pc0FycmF5KGMpJiZjLmV2ZXJ5KEUpfW4udHlwZWRBcnJheT1rfSkoYXx8KGE9e30pKTt2YXIgZGU9Y2xhc3N7Y29uc3RydWN0b3IodCxpLHIpe3RoaXMuX2xhbmd1YWdlSWQ9dDt0aGlzLl93b3JrZXI9aTt0aGlzLl9kaXNwb3NhYmxlcz1bXTt0aGlzLl9saXN0ZW5lcj1PYmplY3QuY3JlYXRlKG51bGwpO2xldCBlPXM9PntsZXQgdT1zLmdldExhbmd1YWdlSWQoKTtpZih1IT09dGhpcy5fbGFuZ3VhZ2VJZClyZXR1cm47bGV0IGw7dGhpcy5fbGlzdGVuZXJbcy51cmkudG9TdHJpbmcoKV09cy5vbkRpZENoYW5nZUNvbnRlbnQoKCk9Pnt3aW5kb3cuY2xlYXJUaW1lb3V0KGwpLGw9d2luZG93LnNldFRpbWVvdXQoKCk9PnRoaXMuX2RvVmFsaWRhdGUocy51cmksdSksNTAwKX0pLHRoaXMuX2RvVmFsaWRhdGUocy51cmksdSl9LG89cz0+e2QuZWRpdG9yLnNldE1vZGVsTWFya2VycyhzLHRoaXMuX2xhbmd1YWdlSWQsW10pO2xldCB1PXMudXJpLnRvU3RyaW5nKCksbD10aGlzLl9saXN0ZW5lclt1XTtsJiYobC5kaXNwb3NlKCksZGVsZXRlIHRoaXMuX2xpc3RlbmVyW3VdKX07dGhpcy5fZGlzcG9zYWJsZXMucHVzaChkLmVkaXRvci5vbkRpZENyZWF0ZU1vZGVsKGUpKSx0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGQuZWRpdG9yLm9uV2lsbERpc3Bvc2VNb2RlbChvKSksdGhpcy5fZGlzcG9zYWJsZXMucHVzaChkLmVkaXRvci5vbkRpZENoYW5nZU1vZGVsTGFuZ3VhZ2Uocz0+e28ocy5tb2RlbCksZShzLm1vZGVsKX0pKSx0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKHIocz0+e2QuZWRpdG9yLmdldE1vZGVscygpLmZvckVhY2godT0+e3UuZ2V0TGFuZ3VhZ2VJZCgpPT09dGhpcy5fbGFuZ3VhZ2VJZCYmKG8odSksZSh1KSl9KX0pKSx0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKHtkaXNwb3NlOigpPT57ZC5lZGl0b3IuZ2V0TW9kZWxzKCkuZm9yRWFjaChvKTtmb3IobGV0IHMgaW4gdGhpcy5fbGlzdGVuZXIpdGhpcy5fbGlzdGVuZXJbc10uZGlzcG9zZSgpfX0pLGQuZWRpdG9yLmdldE1vZGVscygpLmZvckVhY2goZSl9ZGlzcG9zZSgpe3RoaXMuX2Rpc3Bvc2FibGVzLmZvckVhY2godD0+dCYmdC5kaXNwb3NlKCkpLHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aD0wfV9kb1ZhbGlkYXRlKHQsaSl7dGhpcy5fd29ya2VyKHQpLnRoZW4ocj0+ci5kb1ZhbGlkYXRpb24odC50b1N0cmluZygpKSkudGhlbihyPT57bGV0IGU9ci5tYXAocz0+VG4odCxzKSksbz1kLmVkaXRvci5nZXRNb2RlbCh0KTtvJiZvLmdldExhbmd1YWdlSWQoKT09PWkmJmQuZWRpdG9yLnNldE1vZGVsTWFya2VycyhvLGksZSl9KS50aGVuKHZvaWQgMCxyPT57Y29uc29sZS5lcnJvcihyKX0pfX07ZnVuY3Rpb24gdm4obil7c3dpdGNoKG4pe2Nhc2Ugdy5FcnJvcjpyZXR1cm4gZC5NYXJrZXJTZXZlcml0eS5FcnJvcjtjYXNlIHcuV2FybmluZzpyZXR1cm4gZC5NYXJrZXJTZXZlcml0eS5XYXJuaW5nO2Nhc2Ugdy5JbmZvcm1hdGlvbjpyZXR1cm4gZC5NYXJrZXJTZXZlcml0eS5JbmZvO2Nhc2Ugdy5IaW50OnJldHVybiBkLk1hcmtlclNldmVyaXR5LkhpbnQ7ZGVmYXVsdDpyZXR1cm4gZC5NYXJrZXJTZXZlcml0eS5JbmZvfX1mdW5jdGlvbiBUbihuLHQpe2xldCBpPXR5cGVvZiB0LmNvZGU9PSJudW1iZXIiP1N0cmluZyh0LmNvZGUpOnQuY29kZTtyZXR1cm57c2V2ZXJpdHk6dm4odC5zZXZlcml0eSksc3RhcnRMaW5lTnVtYmVyOnQucmFuZ2Uuc3RhcnQubGluZSsxLHN0YXJ0Q29sdW1uOnQucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyKzEsZW5kTGluZU51bWJlcjp0LnJhbmdlLmVuZC5saW5lKzEsZW5kQ29sdW1uOnQucmFuZ2UuZW5kLmNoYXJhY3RlcisxLG1lc3NhZ2U6dC5tZXNzYWdlLGNvZGU6aSxzb3VyY2U6dC5zb3VyY2V9fXZhciBCPWNsYXNze2NvbnN0cnVjdG9yKHQsaSl7dGhpcy5fd29ya2VyPXQ7dGhpcy5fdHJpZ2dlckNoYXJhY3RlcnM9aX1nZXQgdHJpZ2dlckNoYXJhY3RlcnMoKXtyZXR1cm4gdGhpcy5fdHJpZ2dlckNoYXJhY3RlcnN9cHJvdmlkZUNvbXBsZXRpb25JdGVtcyh0LGkscixlKXtsZXQgbz10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKG8pLnRoZW4ocz0+cy5kb0NvbXBsZXRlKG8udG9TdHJpbmcoKSxDKGkpKSkudGhlbihzPT57aWYoIXMpcmV0dXJuO2xldCB1PXQuZ2V0V29yZFVudGlsUG9zaXRpb24oaSksbD1uZXcgZC5SYW5nZShpLmxpbmVOdW1iZXIsdS5zdGFydENvbHVtbixpLmxpbmVOdW1iZXIsdS5lbmRDb2x1bW4pLGY9cy5pdGVtcy5tYXAoZz0+e2xldCBoPXtsYWJlbDpnLmxhYmVsLGluc2VydFRleHQ6Zy5pbnNlcnRUZXh0fHxnLmxhYmVsLHNvcnRUZXh0Omcuc29ydFRleHQsZmlsdGVyVGV4dDpnLmZpbHRlclRleHQsZG9jdW1lbnRhdGlvbjpnLmRvY3VtZW50YXRpb24sZGV0YWlsOmcuZGV0YWlsLGNvbW1hbmQ6a24oZy5jb21tYW5kKSxyYW5nZTpsLGtpbmQ6eG4oZy5raW5kKX07cmV0dXJuIGcudGV4dEVkaXQmJih5bihnLnRleHRFZGl0KT9oLnJhbmdlPXtpbnNlcnQ6eShnLnRleHRFZGl0Lmluc2VydCkscmVwbGFjZTp5KGcudGV4dEVkaXQucmVwbGFjZSl9OmgucmFuZ2U9eShnLnRleHRFZGl0LnJhbmdlKSxoLmluc2VydFRleHQ9Zy50ZXh0RWRpdC5uZXdUZXh0KSxnLmFkZGl0aW9uYWxUZXh0RWRpdHMmJihoLmFkZGl0aW9uYWxUZXh0RWRpdHM9Zy5hZGRpdGlvbmFsVGV4dEVkaXRzLm1hcChEKSksZy5pbnNlcnRUZXh0Rm9ybWF0PT09bmUuU25pcHBldCYmKGguaW5zZXJ0VGV4dFJ1bGVzPWQubGFuZ3VhZ2VzLkNvbXBsZXRpb25JdGVtSW5zZXJ0VGV4dFJ1bGUuSW5zZXJ0QXNTbmlwcGV0KSxofSk7cmV0dXJue2lzSW5jb21wbGV0ZTpzLmlzSW5jb21wbGV0ZSxzdWdnZXN0aW9uczpmfX0pfX07ZnVuY3Rpb24gQyhuKXtpZihuKXJldHVybntjaGFyYWN0ZXI6bi5jb2x1bW4tMSxsaW5lOm4ubGluZU51bWJlci0xfX1mdW5jdGlvbiBmZShuKXtpZihuKXJldHVybntzdGFydDp7bGluZTpuLnN0YXJ0TGluZU51bWJlci0xLGNoYXJhY3RlcjpuLnN0YXJ0Q29sdW1uLTF9LGVuZDp7bGluZTpuLmVuZExpbmVOdW1iZXItMSxjaGFyYWN0ZXI6bi5lbmRDb2x1bW4tMX19fWZ1bmN0aW9uIHkobil7aWYobilyZXR1cm4gbmV3IGQuUmFuZ2Uobi5zdGFydC5saW5lKzEsbi5zdGFydC5jaGFyYWN0ZXIrMSxuLmVuZC5saW5lKzEsbi5lbmQuY2hhcmFjdGVyKzEpfWZ1bmN0aW9uIHluKG4pe3JldHVybiB0eXBlb2Ygbi5pbnNlcnQ8InUiJiZ0eXBlb2Ygbi5yZXBsYWNlPCJ1In1mdW5jdGlvbiB4bihuKXtsZXQgdD1kLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUtpbmQ7c3dpdGNoKG4pe2Nhc2UgcC5UZXh0OnJldHVybiB0LlRleHQ7Y2FzZSBwLk1ldGhvZDpyZXR1cm4gdC5NZXRob2Q7Y2FzZSBwLkZ1bmN0aW9uOnJldHVybiB0LkZ1bmN0aW9uO2Nhc2UgcC5Db25zdHJ1Y3RvcjpyZXR1cm4gdC5Db25zdHJ1Y3RvcjtjYXNlIHAuRmllbGQ6cmV0dXJuIHQuRmllbGQ7Y2FzZSBwLlZhcmlhYmxlOnJldHVybiB0LlZhcmlhYmxlO2Nhc2UgcC5DbGFzczpyZXR1cm4gdC5DbGFzcztjYXNlIHAuSW50ZXJmYWNlOnJldHVybiB0LkludGVyZmFjZTtjYXNlIHAuTW9kdWxlOnJldHVybiB0Lk1vZHVsZTtjYXNlIHAuUHJvcGVydHk6cmV0dXJuIHQuUHJvcGVydHk7Y2FzZSBwLlVuaXQ6cmV0dXJuIHQuVW5pdDtjYXNlIHAuVmFsdWU6cmV0dXJuIHQuVmFsdWU7Y2FzZSBwLkVudW06cmV0dXJuIHQuRW51bTtjYXNlIHAuS2V5d29yZDpyZXR1cm4gdC5LZXl3b3JkO2Nhc2UgcC5TbmlwcGV0OnJldHVybiB0LlNuaXBwZXQ7Y2FzZSBwLkNvbG9yOnJldHVybiB0LkNvbG9yO2Nhc2UgcC5GaWxlOnJldHVybiB0LkZpbGU7Y2FzZSBwLlJlZmVyZW5jZTpyZXR1cm4gdC5SZWZlcmVuY2V9cmV0dXJuIHQuUHJvcGVydHl9ZnVuY3Rpb24gRChuKXtpZihuKXJldHVybntyYW5nZTp5KG4ucmFuZ2UpLHRleHQ6bi5uZXdUZXh0fX1mdW5jdGlvbiBrbihuKXtyZXR1cm4gbiYmbi5jb21tYW5kPT09ImVkaXRvci5hY3Rpb24udHJpZ2dlclN1Z2dlc3QiP3tpZDpuLmNvbW1hbmQsdGl0bGU6bi50aXRsZSxhcmd1bWVudHM6bi5hcmd1bWVudHN9OnZvaWQgMH12YXIgTD1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dH1wcm92aWRlSG92ZXIodCxpLHIpe2xldCBlPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIoZSkudGhlbihvPT5vLmRvSG92ZXIoZS50b1N0cmluZygpLEMoaSkpKS50aGVuKG89PntpZihvKXJldHVybntyYW5nZTp5KG8ucmFuZ2UpLGNvbnRlbnRzOl9uKG8uY29udGVudHMpfX0pfX07ZnVuY3Rpb24gSW4obil7cmV0dXJuIG4mJnR5cGVvZiBuPT0ib2JqZWN0IiYmdHlwZW9mIG4ua2luZD09InN0cmluZyJ9ZnVuY3Rpb24gR2Uobil7cmV0dXJuIHR5cGVvZiBuPT0ic3RyaW5nIj97dmFsdWU6bn06SW4obik/bi5raW5kPT09InBsYWludGV4dCI/e3ZhbHVlOm4udmFsdWUucmVwbGFjZSgvW1xcYCpfe31bXF0oKSMrXC0uIV0vZywiXFwkJiIpfTp7dmFsdWU6bi52YWx1ZX06e3ZhbHVlOiJgYGAiK24ubGFuZ3VhZ2UrYApgK24udmFsdWUrIlxuYGBgXG4ifX1mdW5jdGlvbiBfbihuKXtpZihuKXJldHVybiBBcnJheS5pc0FycmF5KG4pP24ubWFwKEdlKTpbR2UobildfXZhciBTPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVEb2N1bWVudEhpZ2hsaWdodHModCxpLHIpe2xldCBlPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIoZSkudGhlbihvPT5vLmZpbmREb2N1bWVudEhpZ2hsaWdodHMoZS50b1N0cmluZygpLEMoaSkpKS50aGVuKG89PntpZihvKXJldHVybiBvLm1hcChzPT4oe3JhbmdlOnkocy5yYW5nZSksa2luZDpDbihzLmtpbmQpfSkpfSl9fTtmdW5jdGlvbiBDbihuKXtzd2l0Y2gobil7Y2FzZSBXLlJlYWQ6cmV0dXJuIGQubGFuZ3VhZ2VzLkRvY3VtZW50SGlnaGxpZ2h0S2luZC5SZWFkO2Nhc2UgVy5Xcml0ZTpyZXR1cm4gZC5sYW5ndWFnZXMuRG9jdW1lbnRIaWdobGlnaHRLaW5kLldyaXRlO2Nhc2UgVy5UZXh0OnJldHVybiBkLmxhbmd1YWdlcy5Eb2N1bWVudEhpZ2hsaWdodEtpbmQuVGV4dH1yZXR1cm4gZC5sYW5ndWFnZXMuRG9jdW1lbnRIaWdobGlnaHRLaW5kLlRleHR9dmFyIGNlPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVEZWZpbml0aW9uKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5maW5kRGVmaW5pdGlvbihlLnRvU3RyaW5nKCksQyhpKSkpLnRoZW4obz0+e2lmKG8pcmV0dXJuW0plKG8pXX0pfX07ZnVuY3Rpb24gSmUobil7cmV0dXJue3VyaTpkLlVyaS5wYXJzZShuLnVyaSkscmFuZ2U6eShuLnJhbmdlKX19dmFyIGxlPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVSZWZlcmVuY2VzKHQsaSxyLGUpe2xldCBvPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIobykudGhlbihzPT5zLmZpbmRSZWZlcmVuY2VzKG8udG9TdHJpbmcoKSxDKGkpKSkudGhlbihzPT57aWYocylyZXR1cm4gcy5tYXAoSmUpfSl9fSxGPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVSZW5hbWVFZGl0cyh0LGkscixlKXtsZXQgbz10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKG8pLnRoZW4ocz0+cy5kb1JlbmFtZShvLnRvU3RyaW5nKCksQyhpKSxyKSkudGhlbihzPT5ibihzKSl9fTtmdW5jdGlvbiBibihuKXtpZighbnx8IW4uY2hhbmdlcylyZXR1cm47bGV0IHQ9W107Zm9yKGxldCBpIGluIG4uY2hhbmdlcyl7bGV0IHI9ZC5VcmkucGFyc2UoaSk7Zm9yKGxldCBlIG9mIG4uY2hhbmdlc1tpXSl0LnB1c2goe3Jlc291cmNlOnIsdmVyc2lvbklkOnZvaWQgMCx0ZXh0RWRpdDp7cmFuZ2U6eShlLnJhbmdlKSx0ZXh0OmUubmV3VGV4dH19KX1yZXR1cm57ZWRpdHM6dH19dmFyIE09Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZURvY3VtZW50U3ltYm9scyh0LGkpe2xldCByPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIocikudGhlbihlPT5lLmZpbmREb2N1bWVudFN5bWJvbHMoci50b1N0cmluZygpKSkudGhlbihlPT57aWYoZSlyZXR1cm4gZS5tYXAobz0+d24obyk/WWUobyk6e25hbWU6by5uYW1lLGRldGFpbDoiIixjb250YWluZXJOYW1lOm8uY29udGFpbmVyTmFtZSxraW5kOlplKG8ua2luZCkscmFuZ2U6eShvLmxvY2F0aW9uLnJhbmdlKSxzZWxlY3Rpb25SYW5nZTp5KG8ubG9jYXRpb24ucmFuZ2UpLHRhZ3M6W119KX0pfX07ZnVuY3Rpb24gd24obil7cmV0dXJuImNoaWxkcmVuImluIG59ZnVuY3Rpb24gWWUobil7cmV0dXJue25hbWU6bi5uYW1lLGRldGFpbDpuLmRldGFpbD8/IiIsa2luZDpaZShuLmtpbmQpLHJhbmdlOnkobi5yYW5nZSksc2VsZWN0aW9uUmFuZ2U6eShuLnNlbGVjdGlvblJhbmdlKSx0YWdzOm4udGFncz8/W10sY2hpbGRyZW46KG4uY2hpbGRyZW4/P1tdKS5tYXAodD0+WWUodCkpfX1mdW5jdGlvbiBaZShuKXtsZXQgdD1kLmxhbmd1YWdlcy5TeW1ib2xLaW5kO3N3aXRjaChuKXtjYXNlIG0uRmlsZTpyZXR1cm4gdC5GaWxlO2Nhc2UgbS5Nb2R1bGU6cmV0dXJuIHQuTW9kdWxlO2Nhc2UgbS5OYW1lc3BhY2U6cmV0dXJuIHQuTmFtZXNwYWNlO2Nhc2UgbS5QYWNrYWdlOnJldHVybiB0LlBhY2thZ2U7Y2FzZSBtLkNsYXNzOnJldHVybiB0LkNsYXNzO2Nhc2UgbS5NZXRob2Q6cmV0dXJuIHQuTWV0aG9kO2Nhc2UgbS5Qcm9wZXJ0eTpyZXR1cm4gdC5Qcm9wZXJ0eTtjYXNlIG0uRmllbGQ6cmV0dXJuIHQuRmllbGQ7Y2FzZSBtLkNvbnN0cnVjdG9yOnJldHVybiB0LkNvbnN0cnVjdG9yO2Nhc2UgbS5FbnVtOnJldHVybiB0LkVudW07Y2FzZSBtLkludGVyZmFjZTpyZXR1cm4gdC5JbnRlcmZhY2U7Y2FzZSBtLkZ1bmN0aW9uOnJldHVybiB0LkZ1bmN0aW9uO2Nhc2UgbS5WYXJpYWJsZTpyZXR1cm4gdC5WYXJpYWJsZTtjYXNlIG0uQ29uc3RhbnQ6cmV0dXJuIHQuQ29uc3RhbnQ7Y2FzZSBtLlN0cmluZzpyZXR1cm4gdC5TdHJpbmc7Y2FzZSBtLk51bWJlcjpyZXR1cm4gdC5OdW1iZXI7Y2FzZSBtLkJvb2xlYW46cmV0dXJuIHQuQm9vbGVhbjtjYXNlIG0uQXJyYXk6cmV0dXJuIHQuQXJyYXl9cmV0dXJuIHQuRnVuY3Rpb259dmFyIEE9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZUxpbmtzKHQsaSl7bGV0IHI9dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihyKS50aGVuKGU9PmUuZmluZERvY3VtZW50TGlua3Moci50b1N0cmluZygpKSkudGhlbihlPT57aWYoZSlyZXR1cm57bGlua3M6ZS5tYXAobz0+KHtyYW5nZTp5KG8ucmFuZ2UpLHVybDpvLnRhcmdldH0pKX19KX19LEg9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZURvY3VtZW50Rm9ybWF0dGluZ0VkaXRzKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5mb3JtYXQoZS50b1N0cmluZygpLG51bGwsZW4oaSkpLnRoZW4ocz0+e2lmKCEoIXN8fHMubGVuZ3RoPT09MCkpcmV0dXJuIHMubWFwKEQpfSkpfX0sSz1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dDt0aGlzLmNhbkZvcm1hdE11bHRpcGxlUmFuZ2VzPSExfXByb3ZpZGVEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRzKHQsaSxyLGUpe2xldCBvPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIobykudGhlbihzPT5zLmZvcm1hdChvLnRvU3RyaW5nKCksZmUoaSksZW4ocikpLnRoZW4odT0+e2lmKCEoIXV8fHUubGVuZ3RoPT09MCkpcmV0dXJuIHUubWFwKEQpfSkpfX07ZnVuY3Rpb24gZW4obil7cmV0dXJue3RhYlNpemU6bi50YWJTaXplLGluc2VydFNwYWNlczpuLmluc2VydFNwYWNlc319dmFyIGdlPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVEb2N1bWVudENvbG9ycyh0LGkpe2xldCByPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIocikudGhlbihlPT5lLmZpbmREb2N1bWVudENvbG9ycyhyLnRvU3RyaW5nKCkpKS50aGVuKGU9PntpZihlKXJldHVybiBlLm1hcChvPT4oe2NvbG9yOm8uY29sb3IscmFuZ2U6eShvLnJhbmdlKX0pKX0pfXByb3ZpZGVDb2xvclByZXNlbnRhdGlvbnModCxpLHIpe2xldCBlPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIoZSkudGhlbihvPT5vLmdldENvbG9yUHJlc2VudGF0aW9ucyhlLnRvU3RyaW5nKCksaS5jb2xvcixmZShpLnJhbmdlKSkpLnRoZW4obz0+e2lmKG8pcmV0dXJuIG8ubWFwKHM9PntsZXQgdT17bGFiZWw6cy5sYWJlbH07cmV0dXJuIHMudGV4dEVkaXQmJih1LnRleHRFZGl0PUQocy50ZXh0RWRpdCkpLHMuYWRkaXRpb25hbFRleHRFZGl0cyYmKHUuYWRkaXRpb25hbFRleHRFZGl0cz1zLmFkZGl0aW9uYWxUZXh0RWRpdHMubWFwKEQpKSx1fSl9KX19LFU9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZUZvbGRpbmdSYW5nZXModCxpLHIpe2xldCBlPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIoZSkudGhlbihvPT5vLmdldEZvbGRpbmdSYW5nZXMoZS50b1N0cmluZygpLGkpKS50aGVuKG89PntpZihvKXJldHVybiBvLm1hcChzPT57bGV0IHU9e3N0YXJ0OnMuc3RhcnRMaW5lKzEsZW5kOnMuZW5kTGluZSsxfTtyZXR1cm4gdHlwZW9mIHMua2luZDwidSImJih1LmtpbmQ9RW4ocy5raW5kKSksdX0pfSl9fTtmdW5jdGlvbiBFbihuKXtzd2l0Y2gobil7Y2FzZSBQLkNvbW1lbnQ6cmV0dXJuIGQubGFuZ3VhZ2VzLkZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudDtjYXNlIFAuSW1wb3J0czpyZXR1cm4gZC5sYW5ndWFnZXMuRm9sZGluZ1JhbmdlS2luZC5JbXBvcnRzO2Nhc2UgUC5SZWdpb246cmV0dXJuIGQubGFuZ3VhZ2VzLkZvbGRpbmdSYW5nZUtpbmQuUmVnaW9ufX12YXIgaj1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dH1wcm92aWRlU2VsZWN0aW9uUmFuZ2VzKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5nZXRTZWxlY3Rpb25SYW5nZXMoZS50b1N0cmluZygpLGkubWFwKEMpKSkudGhlbihvPT57aWYobylyZXR1cm4gby5tYXAocz0+e2xldCB1PVtdO2Zvcig7czspdS5wdXNoKHtyYW5nZTp5KHMucmFuZ2UpfSkscz1zLnBhcmVudDtyZXR1cm4gdX0pfSl9fTt2YXIgcmU9Y2xhc3MgZXh0ZW5kcyBCe2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsWyIuIiwiOiIsIjwiLCciJywiPSIsIi8iXSl9fTtmdW5jdGlvbiBQbihuKXtsZXQgdD1uZXcgYihuKSxpPSguLi5lKT0+dC5nZXRMYW5ndWFnZVNlcnZpY2VXb3JrZXIoLi4uZSkscj1uLmxhbmd1YWdlSWQ7ZC5sYW5ndWFnZXMucmVnaXN0ZXJDb21wbGV0aW9uSXRlbVByb3ZpZGVyKHIsbmV3IHJlKGkpKSxkLmxhbmd1YWdlcy5yZWdpc3RlckhvdmVyUHJvdmlkZXIocixuZXcgTChpKSksZC5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudEhpZ2hsaWdodFByb3ZpZGVyKHIsbmV3IFMoaSkpLGQubGFuZ3VhZ2VzLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKHIsbmV3IEEoaSkpLGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRm9sZGluZ1JhbmdlUHJvdmlkZXIocixuZXcgVShpKSksZC5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudFN5bWJvbFByb3ZpZGVyKHIsbmV3IE0oaSkpLGQubGFuZ3VhZ2VzLnJlZ2lzdGVyU2VsZWN0aW9uUmFuZ2VQcm92aWRlcihyLG5ldyBqKGkpKSxkLmxhbmd1YWdlcy5yZWdpc3RlclJlbmFtZVByb3ZpZGVyKHIsbmV3IEYoaSkpLHI9PT0iaHRtbCImJihkLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcihyLG5ldyBIKGkpKSxkLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyKHIsbmV3IEsoaSkpKX1mdW5jdGlvbiBXbihuKXtsZXQgdD1bXSxpPVtdLHI9bmV3IGIobik7dC5wdXNoKHIpO2xldCBlPSguLi5zKT0+ci5nZXRMYW5ndWFnZVNlcnZpY2VXb3JrZXIoLi4ucyk7ZnVuY3Rpb24gbygpe2xldHtsYW5ndWFnZUlkOnMsbW9kZUNvbmZpZ3VyYXRpb246dX09bjt0bihpKSx1LmNvbXBsZXRpb25JdGVtcyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyQ29tcGxldGlvbkl0ZW1Qcm92aWRlcihzLG5ldyByZShlKSkpLHUuaG92ZXJzJiZpLnB1c2goZC5sYW5ndWFnZXMucmVnaXN0ZXJIb3ZlclByb3ZpZGVyKHMsbmV3IEwoZSkpKSx1LmRvY3VtZW50SGlnaGxpZ2h0cyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRIaWdobGlnaHRQcm92aWRlcihzLG5ldyBTKGUpKSksdS5saW5rcyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKHMsbmV3IEEoZSkpKSx1LmRvY3VtZW50U3ltYm9scyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRTeW1ib2xQcm92aWRlcihzLG5ldyBNKGUpKSksdS5yZW5hbWUmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlclJlbmFtZVByb3ZpZGVyKHMsbmV3IEYoZSkpKSx1LmZvbGRpbmdSYW5nZXMmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlckZvbGRpbmdSYW5nZVByb3ZpZGVyKHMsbmV3IFUoZSkpKSx1LnNlbGVjdGlvblJhbmdlcyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyU2VsZWN0aW9uUmFuZ2VQcm92aWRlcihzLG5ldyBqKGUpKSksdS5kb2N1bWVudEZvcm1hdHRpbmdFZGl0cyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRGb3JtYXR0aW5nRWRpdFByb3ZpZGVyKHMsbmV3IEgoZSkpKSx1LmRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdHMmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyKHMsbmV3IEsoZSkpKX1yZXR1cm4gbygpLHQucHVzaChubihpKSksbm4odCl9ZnVuY3Rpb24gbm4obil7cmV0dXJue2Rpc3Bvc2U6KCk9PnRuKG4pfX1mdW5jdGlvbiB0bihuKXtmb3IoO24ubGVuZ3RoOyluLnBvcCgpLmRpc3Bvc2UoKX1yZXR1cm4gZ24oRG4pO30pKCk7CnJldHVybiBtb2R1bGVFeHBvcnRzOwp9KTsK