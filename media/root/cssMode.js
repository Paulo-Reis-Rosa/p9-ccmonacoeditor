data:application/javascript;base64,LyohLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIFZlcnNpb246IDAuNDYuMCgyMTAwNzM2MGNhZDI4NjQ4YmRmNDYyODJhMjU5MmNiNDdjM2E3YTZmKQogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9tb25hY28tZWRpdG9yL2Jsb2IvbWFpbi9MSUNFTlNFLnR4dAogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KZGVmaW5lKCJ2cy9sYW5ndWFnZS9jc3MvY3NzTW9kZSIsIFsicmVxdWlyZSIsInJlcXVpcmUiXSwocmVxdWlyZSk9PnsKInVzZSBzdHJpY3QiO3ZhciBtb2R1bGVFeHBvcnRzPSgoKT0+e3ZhciB0bj1PYmplY3QuY3JlYXRlO3ZhciBZPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgcm49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjt2YXIgb249T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7dmFyIHNuPU9iamVjdC5nZXRQcm90b3R5cGVPZixhbj1PYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O3ZhciB1bj0obj0+dHlwZW9mIHJlcXVpcmU8InUiP3JlcXVpcmU6dHlwZW9mIFByb3h5PCJ1Ij9uZXcgUHJveHkobix7Z2V0Oih0LGkpPT4odHlwZW9mIHJlcXVpcmU8InUiP3JlcXVpcmU6dClbaV19KTpuKShmdW5jdGlvbihuKXtpZih0eXBlb2YgcmVxdWlyZTwidSIpcmV0dXJuIHJlcXVpcmUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3Rocm93IEVycm9yKCdEeW5hbWljIHJlcXVpcmUgb2YgIicrbisnIiBpcyBub3Qgc3VwcG9ydGVkJyl9KTt2YXIgZG49KG4sdCk9PigpPT4odHx8bigodD17ZXhwb3J0czp7fX0pLmV4cG9ydHMsdCksdC5leHBvcnRzKSxjbj0obix0KT0+e2Zvcih2YXIgaSBpbiB0KVkobixpLHtnZXQ6dFtpXSxlbnVtZXJhYmxlOiEwfSl9LEo9KG4sdCxpLHIpPT57aWYodCYmdHlwZW9mIHQ9PSJvYmplY3QifHx0eXBlb2YgdD09ImZ1bmN0aW9uIilmb3IobGV0IGUgb2Ygb24odCkpIWFuLmNhbGwobixlKSYmZSE9PWkmJlkobixlLHtnZXQ6KCk9PnRbZV0sZW51bWVyYWJsZTohKHI9cm4odCxlKSl8fHIuZW51bWVyYWJsZX0pO3JldHVybiBufSxwZT0obix0LGkpPT4oSihuLHQsImRlZmF1bHQiKSxpJiZKKGksdCwiZGVmYXVsdCIpKSxoZT0obix0LGkpPT4oaT1uIT1udWxsP3RuKHNuKG4pKTp7fSxKKHR8fCFufHwhbi5fX2VzTW9kdWxlP1koaSwiZGVmYXVsdCIse3ZhbHVlOm4sZW51bWVyYWJsZTohMH0pOmksbikpLGxuPW49PkooWSh7fSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbik7dmFyIHZlPWRuKChXbixtZSk9Pnt2YXIgZ249aGUodW4oInZzL2VkaXRvci9lZGl0b3IuYXBpIikpO21lLmV4cG9ydHM9Z259KTt2YXIgU249e307Y24oU24se0NvbXBsZXRpb25BZGFwdGVyOigpPT5ILERlZmluaXRpb25BZGFwdGVyOigpPT5PLERpYWdub3N0aWNzQWRhcHRlcjooKT0+SyxEb2N1bWVudENvbG9yQWRhcHRlcjooKT0+JCxEb2N1bWVudEZvcm1hdHRpbmdFZGl0UHJvdmlkZXI6KCk9PlgsRG9jdW1lbnRIaWdobGlnaHRBZGFwdGVyOigpPT5qLERvY3VtZW50TGlua0FkYXB0ZXI6KCk9PmxlLERvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdFByb3ZpZGVyOigpPT5CLERvY3VtZW50U3ltYm9sQWRhcHRlcjooKT0+eixGb2xkaW5nUmFuZ2VBZGFwdGVyOigpPT5xLEhvdmVyQWRhcHRlcjooKT0+VSxSZWZlcmVuY2VBZGFwdGVyOigpPT5OLFJlbmFtZUFkYXB0ZXI6KCk9PlYsU2VsZWN0aW9uUmFuZ2VBZGFwdGVyOigpPT5RLFdvcmtlck1hbmFnZXI6KCk9PkUsZnJvbVBvc2l0aW9uOigpPT5fLGZyb21SYW5nZTooKT0+Z2Usc2V0dXBNb2RlOigpPT5Sbix0b1JhbmdlOigpPT5ULHRvVGV4dEVkaXQ6KCk9Pld9KTt2YXIgZD17fTtwZShkLGhlKHZlKCkpKTt2YXIgZm49Mio2MCoxZTMsRT1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl9kZWZhdWx0cz10LHRoaXMuX3dvcmtlcj1udWxsLHRoaXMuX2NsaWVudD1udWxsLHRoaXMuX2lkbGVDaGVja0ludGVydmFsPXdpbmRvdy5zZXRJbnRlcnZhbCgoKT0+dGhpcy5fY2hlY2tJZklkbGUoKSwzMCoxZTMpLHRoaXMuX2xhc3RVc2VkVGltZT0wLHRoaXMuX2NvbmZpZ0NoYW5nZUxpc3RlbmVyPXRoaXMuX2RlZmF1bHRzLm9uRGlkQ2hhbmdlKCgpPT50aGlzLl9zdG9wV29ya2VyKCkpfV9zdG9wV29ya2VyKCl7dGhpcy5fd29ya2VyJiYodGhpcy5fd29ya2VyLmRpc3Bvc2UoKSx0aGlzLl93b3JrZXI9bnVsbCksdGhpcy5fY2xpZW50PW51bGx9ZGlzcG9zZSgpe2NsZWFySW50ZXJ2YWwodGhpcy5faWRsZUNoZWNrSW50ZXJ2YWwpLHRoaXMuX2NvbmZpZ0NoYW5nZUxpc3RlbmVyLmRpc3Bvc2UoKSx0aGlzLl9zdG9wV29ya2VyKCl9X2NoZWNrSWZJZGxlKCl7aWYoIXRoaXMuX3dvcmtlcilyZXR1cm47RGF0ZS5ub3coKS10aGlzLl9sYXN0VXNlZFRpbWU+Zm4mJnRoaXMuX3N0b3BXb3JrZXIoKX1fZ2V0Q2xpZW50KCl7cmV0dXJuIHRoaXMuX2xhc3RVc2VkVGltZT1EYXRlLm5vdygpLHRoaXMuX2NsaWVudHx8KHRoaXMuX3dvcmtlcj1kLmVkaXRvci5jcmVhdGVXZWJXb3JrZXIoe21vZHVsZUlkOiJ2cy9sYW5ndWFnZS9jc3MvY3NzV29ya2VyIixsYWJlbDp0aGlzLl9kZWZhdWx0cy5sYW5ndWFnZUlkLGNyZWF0ZURhdGE6e29wdGlvbnM6dGhpcy5fZGVmYXVsdHMub3B0aW9ucyxsYW5ndWFnZUlkOnRoaXMuX2RlZmF1bHRzLmxhbmd1YWdlSWR9fSksdGhpcy5fY2xpZW50PXRoaXMuX3dvcmtlci5nZXRQcm94eSgpKSx0aGlzLl9jbGllbnR9Z2V0TGFuZ3VhZ2VTZXJ2aWNlV29ya2VyKC4uLnQpe2xldCBpO3JldHVybiB0aGlzLl9nZXRDbGllbnQoKS50aGVuKHI9PntpPXJ9KS50aGVuKHI9PntpZih0aGlzLl93b3JrZXIpcmV0dXJuIHRoaXMuX3dvcmtlci53aXRoU3luY2VkUmVzb3VyY2VzKHQpfSkudGhlbihyPT5pKX19O3ZhciB5ZTsoZnVuY3Rpb24obil7bi5NSU5fVkFMVUU9LTIxNDc0ODM2NDgsbi5NQVhfVkFMVUU9MjE0NzQ4MzY0N30pKHllfHwoeWU9e30pKTt2YXIgZWU7KGZ1bmN0aW9uKG4pe24uTUlOX1ZBTFVFPTAsbi5NQVhfVkFMVUU9MjE0NzQ4MzY0N30pKGVlfHwoZWU9e30pKTt2YXIgeDsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe3JldHVybiByPT09TnVtYmVyLk1BWF9WQUxVRSYmKHI9ZWUuTUFYX1ZBTFVFKSxlPT09TnVtYmVyLk1BWF9WQUxVRSYmKGU9ZWUuTUFYX1ZBTFVFKSx7bGluZTpyLGNoYXJhY3RlcjplfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5vYmplY3RMaXRlcmFsKGUpJiZhLnVpbnRlZ2VyKGUubGluZSkmJmEudWludGVnZXIoZS5jaGFyYWN0ZXIpfW4uaXM9aX0pKHh8fCh4PXt9KSk7dmFyIHY7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8scyl7aWYoYS51aW50ZWdlcihyKSYmYS51aW50ZWdlcihlKSYmYS51aW50ZWdlcihvKSYmYS51aW50ZWdlcihzKSlyZXR1cm57c3RhcnQ6eC5jcmVhdGUocixlKSxlbmQ6eC5jcmVhdGUobyxzKX07aWYoeC5pcyhyKSYmeC5pcyhlKSlyZXR1cm57c3RhcnQ6cixlbmQ6ZX07dGhyb3cgbmV3IEVycm9yKCJSYW5nZSNjcmVhdGUgY2FsbGVkIHdpdGggaW52YWxpZCBhcmd1bWVudHNbIityKyIsICIrZSsiLCAiK28rIiwgIitzKyJdIil9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEub2JqZWN0TGl0ZXJhbChlKSYmeC5pcyhlLnN0YXJ0KSYmeC5pcyhlLmVuZCl9bi5pcz1pfSkodnx8KHY9e30pKTt2YXIgc2U7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlKXtyZXR1cm57dXJpOnIscmFuZ2U6ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmdi5pcyhlLnJhbmdlKSYmKGEuc3RyaW5nKGUudXJpKXx8YS51bmRlZmluZWQoZS51cmkpKX1uLmlzPWl9KShzZXx8KHNlPXt9KSk7dmFyIFRlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvLHMpe3JldHVybnt0YXJnZXRVcmk6cix0YXJnZXRSYW5nZTplLHRhcmdldFNlbGVjdGlvblJhbmdlOm8sb3JpZ2luU2VsZWN0aW9uUmFuZ2U6c319bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmdi5pcyhlLnRhcmdldFJhbmdlKSYmYS5zdHJpbmcoZS50YXJnZXRVcmkpJiYodi5pcyhlLnRhcmdldFNlbGVjdGlvblJhbmdlKXx8YS51bmRlZmluZWQoZS50YXJnZXRTZWxlY3Rpb25SYW5nZSkpJiYodi5pcyhlLm9yaWdpblNlbGVjdGlvblJhbmdlKXx8YS51bmRlZmluZWQoZS5vcmlnaW5TZWxlY3Rpb25SYW5nZSkpfW4uaXM9aX0pKFRlfHwoVGU9e30pKTt2YXIgYWU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8scyl7cmV0dXJue3JlZDpyLGdyZWVuOmUsYmx1ZTpvLGFscGhhOnN9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLm51bWJlclJhbmdlKGUucmVkLDAsMSkmJmEubnVtYmVyUmFuZ2UoZS5ncmVlbiwwLDEpJiZhLm51bWJlclJhbmdlKGUuYmx1ZSwwLDEpJiZhLm51bWJlclJhbmdlKGUuYWxwaGEsMCwxKX1uLmlzPWl9KShhZXx8KGFlPXt9KSk7dmFyIHhlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3JhbmdlOnIsY29sb3I6ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIHYuaXMoZS5yYW5nZSkmJmFlLmlzKGUuY29sb3IpfW4uaXM9aX0pKHhlfHwoeGU9e30pKTt2YXIga2U7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8pe3JldHVybntsYWJlbDpyLHRleHRFZGl0OmUsYWRkaXRpb25hbFRleHRFZGl0czpvfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5zdHJpbmcoZS5sYWJlbCkmJihhLnVuZGVmaW5lZChlLnRleHRFZGl0KXx8Qy5pcyhlKSkmJihhLnVuZGVmaW5lZChlLmFkZGl0aW9uYWxUZXh0RWRpdHMpfHxhLnR5cGVkQXJyYXkoZS5hZGRpdGlvbmFsVGV4dEVkaXRzLEMuaXMpKX1uLmlzPWl9KShrZXx8KGtlPXt9KSk7dmFyIFM7KGZ1bmN0aW9uKG4pe24uQ29tbWVudD0iY29tbWVudCIsbi5JbXBvcnRzPSJpbXBvcnRzIixuLlJlZ2lvbj0icmVnaW9uIn0pKFN8fChTPXt9KSk7dmFyIEllOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvLHMsdSl7dmFyIGw9e3N0YXJ0TGluZTpyLGVuZExpbmU6ZX07cmV0dXJuIGEuZGVmaW5lZChvKSYmKGwuc3RhcnRDaGFyYWN0ZXI9byksYS5kZWZpbmVkKHMpJiYobC5lbmRDaGFyYWN0ZXI9cyksYS5kZWZpbmVkKHUpJiYobC5raW5kPXUpLGx9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEudWludGVnZXIoZS5zdGFydExpbmUpJiZhLnVpbnRlZ2VyKGUuc3RhcnRMaW5lKSYmKGEudW5kZWZpbmVkKGUuc3RhcnRDaGFyYWN0ZXIpfHxhLnVpbnRlZ2VyKGUuc3RhcnRDaGFyYWN0ZXIpKSYmKGEudW5kZWZpbmVkKGUuZW5kQ2hhcmFjdGVyKXx8YS51aW50ZWdlcihlLmVuZENoYXJhY3RlcikpJiYoYS51bmRlZmluZWQoZS5raW5kKXx8YS5zdHJpbmcoZS5raW5kKSl9bi5pcz1pfSkoSWV8fChJZT17fSkpO3ZhciB1ZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUpe3JldHVybntsb2NhdGlvbjpyLG1lc3NhZ2U6ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmc2UuaXMoZS5sb2NhdGlvbikmJmEuc3RyaW5nKGUubWVzc2FnZSl9bi5pcz1pfSkodWV8fCh1ZT17fSkpO3ZhciBiOyhmdW5jdGlvbihuKXtuLkVycm9yPTEsbi5XYXJuaW5nPTIsbi5JbmZvcm1hdGlvbj0zLG4uSGludD00fSkoYnx8KGI9e30pKTt2YXIgQ2U7KGZ1bmN0aW9uKG4pe24uVW5uZWNlc3Nhcnk9MSxuLkRlcHJlY2F0ZWQ9Mn0pKENlfHwoQ2U9e30pKTt2YXIgX2U7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQoaSl7dmFyIHI9aTtyZXR1cm4gciE9bnVsbCYmYS5zdHJpbmcoci5ocmVmKX1uLmlzPXR9KShfZXx8KF9lPXt9KSk7dmFyIG5lOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSxvLHMsdSxsKXt2YXIgZj17cmFuZ2U6cixtZXNzYWdlOmV9O3JldHVybiBhLmRlZmluZWQobykmJihmLnNldmVyaXR5PW8pLGEuZGVmaW5lZChzKSYmKGYuY29kZT1zKSxhLmRlZmluZWQodSkmJihmLnNvdXJjZT11KSxhLmRlZmluZWQobCkmJihmLnJlbGF0ZWRJbmZvcm1hdGlvbj1sKSxmfW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZSxvPXI7cmV0dXJuIGEuZGVmaW5lZChvKSYmdi5pcyhvLnJhbmdlKSYmYS5zdHJpbmcoby5tZXNzYWdlKSYmKGEubnVtYmVyKG8uc2V2ZXJpdHkpfHxhLnVuZGVmaW5lZChvLnNldmVyaXR5KSkmJihhLmludGVnZXIoby5jb2RlKXx8YS5zdHJpbmcoby5jb2RlKXx8YS51bmRlZmluZWQoby5jb2RlKSkmJihhLnVuZGVmaW5lZChvLmNvZGVEZXNjcmlwdGlvbil8fGEuc3RyaW5nKChlPW8uY29kZURlc2NyaXB0aW9uKT09PW51bGx8fGU9PT12b2lkIDA/dm9pZCAwOmUuaHJlZikpJiYoYS5zdHJpbmcoby5zb3VyY2UpfHxhLnVuZGVmaW5lZChvLnNvdXJjZSkpJiYoYS51bmRlZmluZWQoby5yZWxhdGVkSW5mb3JtYXRpb24pfHxhLnR5cGVkQXJyYXkoby5yZWxhdGVkSW5mb3JtYXRpb24sdWUuaXMpKX1uLmlzPWl9KShuZXx8KG5lPXt9KSk7dmFyIEQ7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlKXtmb3IodmFyIG89W10scz0yO3M8YXJndW1lbnRzLmxlbmd0aDtzKyspb1tzLTJdPWFyZ3VtZW50c1tzXTt2YXIgdT17dGl0bGU6cixjb21tYW5kOmV9O3JldHVybiBhLmRlZmluZWQobykmJm8ubGVuZ3RoPjAmJih1LmFyZ3VtZW50cz1vKSx1fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLmRlZmluZWQoZSkmJmEuc3RyaW5nKGUudGl0bGUpJiZhLnN0cmluZyhlLmNvbW1hbmQpfW4uaXM9aX0pKER8fChEPXt9KSk7dmFyIEM7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQobyxzKXtyZXR1cm57cmFuZ2U6byxuZXdUZXh0OnN9fW4ucmVwbGFjZT10O2Z1bmN0aW9uIGkobyxzKXtyZXR1cm57cmFuZ2U6e3N0YXJ0Om8sZW5kOm99LG5ld1RleHQ6c319bi5pbnNlcnQ9aTtmdW5jdGlvbiByKG8pe3JldHVybntyYW5nZTpvLG5ld1RleHQ6IiJ9fW4uZGVsPXI7ZnVuY3Rpb24gZShvKXt2YXIgcz1vO3JldHVybiBhLm9iamVjdExpdGVyYWwocykmJmEuc3RyaW5nKHMubmV3VGV4dCkmJnYuaXMocy5yYW5nZSl9bi5pcz1lfSkoQ3x8KEM9e30pKTt2YXIgUjsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyl7dmFyIHM9e2xhYmVsOnJ9O3JldHVybiBlIT09dm9pZCAwJiYocy5uZWVkc0NvbmZpcm1hdGlvbj1lKSxvIT09dm9pZCAwJiYocy5kZXNjcmlwdGlvbj1vKSxzfW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBlIT09dm9pZCAwJiZhLm9iamVjdExpdGVyYWwoZSkmJmEuc3RyaW5nKGUubGFiZWwpJiYoYS5ib29sZWFuKGUubmVlZHNDb25maXJtYXRpb24pfHxlLm5lZWRzQ29uZmlybWF0aW9uPT09dm9pZCAwKSYmKGEuc3RyaW5nKGUuZGVzY3JpcHRpb24pfHxlLmRlc2NyaXB0aW9uPT09dm9pZCAwKX1uLmlzPWl9KShSfHwoUj17fSkpO3ZhciB5OyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkpe3ZhciByPWk7cmV0dXJuIHR5cGVvZiByPT0ic3RyaW5nIn1uLmlzPXR9KSh5fHwoeT17fSkpO3ZhciBJOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KG8scyx1KXtyZXR1cm57cmFuZ2U6byxuZXdUZXh0OnMsYW5ub3RhdGlvbklkOnV9fW4ucmVwbGFjZT10O2Z1bmN0aW9uIGkobyxzLHUpe3JldHVybntyYW5nZTp7c3RhcnQ6byxlbmQ6b30sbmV3VGV4dDpzLGFubm90YXRpb25JZDp1fX1uLmluc2VydD1pO2Z1bmN0aW9uIHIobyxzKXtyZXR1cm57cmFuZ2U6byxuZXdUZXh0OiIiLGFubm90YXRpb25JZDpzfX1uLmRlbD1yO2Z1bmN0aW9uIGUobyl7dmFyIHM9bztyZXR1cm4gQy5pcyhzKSYmKFIuaXMocy5hbm5vdGF0aW9uSWQpfHx5LmlzKHMuYW5ub3RhdGlvbklkKSl9bi5pcz1lfSkoSXx8KEk9e30pKTt2YXIgdGU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlKXtyZXR1cm57dGV4dERvY3VtZW50OnIsZWRpdHM6ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmcmUuaXMoZS50ZXh0RG9jdW1lbnQpJiZBcnJheS5pc0FycmF5KGUuZWRpdHMpfW4uaXM9aX0pKHRlfHwodGU9e30pKTt2YXIgTDsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyl7dmFyIHM9e2tpbmQ6ImNyZWF0ZSIsdXJpOnJ9O3JldHVybiBlIT09dm9pZCAwJiYoZS5vdmVyd3JpdGUhPT12b2lkIDB8fGUuaWdub3JlSWZFeGlzdHMhPT12b2lkIDApJiYocy5vcHRpb25zPWUpLG8hPT12b2lkIDAmJihzLmFubm90YXRpb25JZD1vKSxzfW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBlJiZlLmtpbmQ9PT0iY3JlYXRlIiYmYS5zdHJpbmcoZS51cmkpJiYoZS5vcHRpb25zPT09dm9pZCAwfHwoZS5vcHRpb25zLm92ZXJ3cml0ZT09PXZvaWQgMHx8YS5ib29sZWFuKGUub3B0aW9ucy5vdmVyd3JpdGUpKSYmKGUub3B0aW9ucy5pZ25vcmVJZkV4aXN0cz09PXZvaWQgMHx8YS5ib29sZWFuKGUub3B0aW9ucy5pZ25vcmVJZkV4aXN0cykpKSYmKGUuYW5ub3RhdGlvbklkPT09dm9pZCAwfHx5LmlzKGUuYW5ub3RhdGlvbklkKSl9bi5pcz1pfSkoTHx8KEw9e30pKTt2YXIgRjsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyxzKXt2YXIgdT17a2luZDoicmVuYW1lIixvbGRVcmk6cixuZXdVcmk6ZX07cmV0dXJuIG8hPT12b2lkIDAmJihvLm92ZXJ3cml0ZSE9PXZvaWQgMHx8by5pZ25vcmVJZkV4aXN0cyE9PXZvaWQgMCkmJih1Lm9wdGlvbnM9bykscyE9PXZvaWQgMCYmKHUuYW5ub3RhdGlvbklkPXMpLHV9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGUmJmUua2luZD09PSJyZW5hbWUiJiZhLnN0cmluZyhlLm9sZFVyaSkmJmEuc3RyaW5nKGUubmV3VXJpKSYmKGUub3B0aW9ucz09PXZvaWQgMHx8KGUub3B0aW9ucy5vdmVyd3JpdGU9PT12b2lkIDB8fGEuYm9vbGVhbihlLm9wdGlvbnMub3ZlcndyaXRlKSkmJihlLm9wdGlvbnMuaWdub3JlSWZFeGlzdHM9PT12b2lkIDB8fGEuYm9vbGVhbihlLm9wdGlvbnMuaWdub3JlSWZFeGlzdHMpKSkmJihlLmFubm90YXRpb25JZD09PXZvaWQgMHx8eS5pcyhlLmFubm90YXRpb25JZCkpfW4uaXM9aX0pKEZ8fChGPXt9KSk7dmFyIE07KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8pe3ZhciBzPXtraW5kOiJkZWxldGUiLHVyaTpyfTtyZXR1cm4gZSE9PXZvaWQgMCYmKGUucmVjdXJzaXZlIT09dm9pZCAwfHxlLmlnbm9yZUlmTm90RXhpc3RzIT09dm9pZCAwKSYmKHMub3B0aW9ucz1lKSxvIT09dm9pZCAwJiYocy5hbm5vdGF0aW9uSWQ9byksc31uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmZS5raW5kPT09ImRlbGV0ZSImJmEuc3RyaW5nKGUudXJpKSYmKGUub3B0aW9ucz09PXZvaWQgMHx8KGUub3B0aW9ucy5yZWN1cnNpdmU9PT12b2lkIDB8fGEuYm9vbGVhbihlLm9wdGlvbnMucmVjdXJzaXZlKSkmJihlLm9wdGlvbnMuaWdub3JlSWZOb3RFeGlzdHM9PT12b2lkIDB8fGEuYm9vbGVhbihlLm9wdGlvbnMuaWdub3JlSWZOb3RFeGlzdHMpKSkmJihlLmFubm90YXRpb25JZD09PXZvaWQgMHx8eS5pcyhlLmFubm90YXRpb25JZCkpfW4uaXM9aX0pKE18fChNPXt9KSk7dmFyIGRlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkpe3ZhciByPWk7cmV0dXJuIHImJihyLmNoYW5nZXMhPT12b2lkIDB8fHIuZG9jdW1lbnRDaGFuZ2VzIT09dm9pZCAwKSYmKHIuZG9jdW1lbnRDaGFuZ2VzPT09dm9pZCAwfHxyLmRvY3VtZW50Q2hhbmdlcy5ldmVyeShmdW5jdGlvbihlKXtyZXR1cm4gYS5zdHJpbmcoZS5raW5kKT9MLmlzKGUpfHxGLmlzKGUpfHxNLmlzKGUpOnRlLmlzKGUpfSkpfW4uaXM9dH0pKGRlfHwoZGU9e30pKTt2YXIgWj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCxpKXt0aGlzLmVkaXRzPXQsdGhpcy5jaGFuZ2VBbm5vdGF0aW9ucz1pfXJldHVybiBuLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxpLHIpe3ZhciBlLG87aWYocj09PXZvaWQgMD9lPUMuaW5zZXJ0KHQsaSk6eS5pcyhyKT8obz1yLGU9SS5pbnNlcnQodCxpLHIpKToodGhpcy5hc3NlcnRDaGFuZ2VBbm5vdGF0aW9ucyh0aGlzLmNoYW5nZUFubm90YXRpb25zKSxvPXRoaXMuY2hhbmdlQW5ub3RhdGlvbnMubWFuYWdlKHIpLGU9SS5pbnNlcnQodCxpLG8pKSx0aGlzLmVkaXRzLnB1c2goZSksbyE9PXZvaWQgMClyZXR1cm4gb30sbi5wcm90b3R5cGUucmVwbGFjZT1mdW5jdGlvbih0LGkscil7dmFyIGUsbztpZihyPT09dm9pZCAwP2U9Qy5yZXBsYWNlKHQsaSk6eS5pcyhyKT8obz1yLGU9SS5yZXBsYWNlKHQsaSxyKSk6KHRoaXMuYXNzZXJ0Q2hhbmdlQW5ub3RhdGlvbnModGhpcy5jaGFuZ2VBbm5vdGF0aW9ucyksbz10aGlzLmNoYW5nZUFubm90YXRpb25zLm1hbmFnZShyKSxlPUkucmVwbGFjZSh0LGksbykpLHRoaXMuZWRpdHMucHVzaChlKSxvIT09dm9pZCAwKXJldHVybiBvfSxuLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24odCxpKXt2YXIgcixlO2lmKGk9PT12b2lkIDA/cj1DLmRlbCh0KTp5LmlzKGkpPyhlPWkscj1JLmRlbCh0LGkpKToodGhpcy5hc3NlcnRDaGFuZ2VBbm5vdGF0aW9ucyh0aGlzLmNoYW5nZUFubm90YXRpb25zKSxlPXRoaXMuY2hhbmdlQW5ub3RhdGlvbnMubWFuYWdlKGkpLHI9SS5kZWwodCxlKSksdGhpcy5lZGl0cy5wdXNoKHIpLGUhPT12b2lkIDApcmV0dXJuIGV9LG4ucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0aGlzLmVkaXRzLnB1c2godCl9LG4ucHJvdG90eXBlLmFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVkaXRzfSxuLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuZWRpdHMuc3BsaWNlKDAsdGhpcy5lZGl0cy5sZW5ndGgpfSxuLnByb3RvdHlwZS5hc3NlcnRDaGFuZ2VBbm5vdGF0aW9ucz1mdW5jdGlvbih0KXtpZih0PT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiVGV4dCBlZGl0IGNoYW5nZSBpcyBub3QgY29uZmlndXJlZCB0byBtYW5hZ2UgY2hhbmdlIGFubm90YXRpb25zLiIpfSxufSgpLGJlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0KXt0aGlzLl9hbm5vdGF0aW9ucz10PT09dm9pZCAwP09iamVjdC5jcmVhdGUobnVsbCk6dCx0aGlzLl9jb3VudGVyPTAsdGhpcy5fc2l6ZT0wfXJldHVybiBuLnByb3RvdHlwZS5hbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5ub3RhdGlvbnN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSwic2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaXplfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLG4ucHJvdG90eXBlLm1hbmFnZT1mdW5jdGlvbih0LGkpe3ZhciByO2lmKHkuaXModCk/cj10OihyPXRoaXMubmV4dElkKCksaT10KSx0aGlzLl9hbm5vdGF0aW9uc1tyXSE9PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIklkICIrcisiIGlzIGFscmVhZHkgaW4gdXNlLiIpO2lmKGk9PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJObyBhbm5vdGF0aW9uIHByb3ZpZGVkIGZvciBpZCAiK3IpO3JldHVybiB0aGlzLl9hbm5vdGF0aW9uc1tyXT1pLHRoaXMuX3NpemUrKyxyfSxuLnByb3RvdHlwZS5uZXh0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY291bnRlcisrLHRoaXMuX2NvdW50ZXIudG9TdHJpbmcoKX0sbn0oKSxLbj1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dmFyIGk9dGhpczt0aGlzLl90ZXh0RWRpdENoYW5nZXM9T2JqZWN0LmNyZWF0ZShudWxsKSx0IT09dm9pZCAwPyh0aGlzLl93b3Jrc3BhY2VFZGl0PXQsdC5kb2N1bWVudENoYW5nZXM/KHRoaXMuX2NoYW5nZUFubm90YXRpb25zPW5ldyBiZSh0LmNoYW5nZUFubm90YXRpb25zKSx0LmNoYW5nZUFubm90YXRpb25zPXRoaXMuX2NoYW5nZUFubm90YXRpb25zLmFsbCgpLHQuZG9jdW1lbnRDaGFuZ2VzLmZvckVhY2goZnVuY3Rpb24ocil7aWYodGUuaXMocikpe3ZhciBlPW5ldyBaKHIuZWRpdHMsaS5fY2hhbmdlQW5ub3RhdGlvbnMpO2kuX3RleHRFZGl0Q2hhbmdlc1tyLnRleHREb2N1bWVudC51cmldPWV9fSkpOnQuY2hhbmdlcyYmT2JqZWN0LmtleXModC5jaGFuZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uKHIpe3ZhciBlPW5ldyBaKHQuY2hhbmdlc1tyXSk7aS5fdGV4dEVkaXRDaGFuZ2VzW3JdPWV9KSk6dGhpcy5fd29ya3NwYWNlRWRpdD17fX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLCJlZGl0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdERvY3VtZW50Q2hhbmdlcygpLHRoaXMuX2NoYW5nZUFubm90YXRpb25zIT09dm9pZCAwJiYodGhpcy5fY2hhbmdlQW5ub3RhdGlvbnMuc2l6ZT09PTA/dGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VBbm5vdGF0aW9ucz12b2lkIDA6dGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VBbm5vdGF0aW9ucz10aGlzLl9jaGFuZ2VBbm5vdGF0aW9ucy5hbGwoKSksdGhpcy5fd29ya3NwYWNlRWRpdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS5nZXRUZXh0RWRpdENoYW5nZT1mdW5jdGlvbih0KXtpZihyZS5pcyh0KSl7aWYodGhpcy5pbml0RG9jdW1lbnRDaGFuZ2VzKCksdGhpcy5fd29ya3NwYWNlRWRpdC5kb2N1bWVudENoYW5nZXM9PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJXb3Jrc3BhY2UgZWRpdCBpcyBub3QgY29uZmlndXJlZCBmb3IgZG9jdW1lbnQgY2hhbmdlcy4iKTt2YXIgaT17dXJpOnQudXJpLHZlcnNpb246dC52ZXJzaW9ufSxyPXRoaXMuX3RleHRFZGl0Q2hhbmdlc1tpLnVyaV07aWYoIXIpe3ZhciBlPVtdLG89e3RleHREb2N1bWVudDppLGVkaXRzOmV9O3RoaXMuX3dvcmtzcGFjZUVkaXQuZG9jdW1lbnRDaGFuZ2VzLnB1c2gobykscj1uZXcgWihlLHRoaXMuX2NoYW5nZUFubm90YXRpb25zKSx0aGlzLl90ZXh0RWRpdENoYW5nZXNbaS51cmldPXJ9cmV0dXJuIHJ9ZWxzZXtpZih0aGlzLmluaXRDaGFuZ2VzKCksdGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VzPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiV29ya3NwYWNlIGVkaXQgaXMgbm90IGNvbmZpZ3VyZWQgZm9yIG5vcm1hbCB0ZXh0IGVkaXQgY2hhbmdlcy4iKTt2YXIgcj10aGlzLl90ZXh0RWRpdENoYW5nZXNbdF07aWYoIXIpe3ZhciBlPVtdO3RoaXMuX3dvcmtzcGFjZUVkaXQuY2hhbmdlc1t0XT1lLHI9bmV3IFooZSksdGhpcy5fdGV4dEVkaXRDaGFuZ2VzW3RdPXJ9cmV0dXJuIHJ9fSxuLnByb3RvdHlwZS5pbml0RG9jdW1lbnRDaGFuZ2VzPWZ1bmN0aW9uKCl7dGhpcy5fd29ya3NwYWNlRWRpdC5kb2N1bWVudENoYW5nZXM9PT12b2lkIDAmJnRoaXMuX3dvcmtzcGFjZUVkaXQuY2hhbmdlcz09PXZvaWQgMCYmKHRoaXMuX2NoYW5nZUFubm90YXRpb25zPW5ldyBiZSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz1bXSx0aGlzLl93b3Jrc3BhY2VFZGl0LmNoYW5nZUFubm90YXRpb25zPXRoaXMuX2NoYW5nZUFubm90YXRpb25zLmFsbCgpKX0sbi5wcm90b3R5cGUuaW5pdENoYW5nZXM9ZnVuY3Rpb24oKXt0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz09PXZvaWQgMCYmdGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VzPT09dm9pZCAwJiYodGhpcy5fd29ya3NwYWNlRWRpdC5jaGFuZ2VzPU9iamVjdC5jcmVhdGUobnVsbCkpfSxuLnByb3RvdHlwZS5jcmVhdGVGaWxlPWZ1bmN0aW9uKHQsaSxyKXtpZih0aGlzLmluaXREb2N1bWVudENoYW5nZXMoKSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIldvcmtzcGFjZSBlZGl0IGlzIG5vdCBjb25maWd1cmVkIGZvciBkb2N1bWVudCBjaGFuZ2VzLiIpO3ZhciBlO1IuaXMoaSl8fHkuaXMoaSk/ZT1pOnI9aTt2YXIgbyxzO2lmKGU9PT12b2lkIDA/bz1MLmNyZWF0ZSh0LHIpOihzPXkuaXMoZSk/ZTp0aGlzLl9jaGFuZ2VBbm5vdGF0aW9ucy5tYW5hZ2UoZSksbz1MLmNyZWF0ZSh0LHIscykpLHRoaXMuX3dvcmtzcGFjZUVkaXQuZG9jdW1lbnRDaGFuZ2VzLnB1c2gobykscyE9PXZvaWQgMClyZXR1cm4gc30sbi5wcm90b3R5cGUucmVuYW1lRmlsZT1mdW5jdGlvbih0LGkscixlKXtpZih0aGlzLmluaXREb2N1bWVudENoYW5nZXMoKSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcz09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIldvcmtzcGFjZSBlZGl0IGlzIG5vdCBjb25maWd1cmVkIGZvciBkb2N1bWVudCBjaGFuZ2VzLiIpO3ZhciBvO1IuaXMocil8fHkuaXMocik/bz1yOmU9cjt2YXIgcyx1O2lmKG89PT12b2lkIDA/cz1GLmNyZWF0ZSh0LGksZSk6KHU9eS5pcyhvKT9vOnRoaXMuX2NoYW5nZUFubm90YXRpb25zLm1hbmFnZShvKSxzPUYuY3JlYXRlKHQsaSxlLHUpKSx0aGlzLl93b3Jrc3BhY2VFZGl0LmRvY3VtZW50Q2hhbmdlcy5wdXNoKHMpLHUhPT12b2lkIDApcmV0dXJuIHV9LG4ucHJvdG90eXBlLmRlbGV0ZUZpbGU9ZnVuY3Rpb24odCxpLHIpe2lmKHRoaXMuaW5pdERvY3VtZW50Q2hhbmdlcygpLHRoaXMuX3dvcmtzcGFjZUVkaXQuZG9jdW1lbnRDaGFuZ2VzPT09dm9pZCAwKXRocm93IG5ldyBFcnJvcigiV29ya3NwYWNlIGVkaXQgaXMgbm90IGNvbmZpZ3VyZWQgZm9yIGRvY3VtZW50IGNoYW5nZXMuIik7dmFyIGU7Ui5pcyhpKXx8eS5pcyhpKT9lPWk6cj1pO3ZhciBvLHM7aWYoZT09PXZvaWQgMD9vPU0uY3JlYXRlKHQscik6KHM9eS5pcyhlKT9lOnRoaXMuX2NoYW5nZUFubm90YXRpb25zLm1hbmFnZShlKSxvPU0uY3JlYXRlKHQscixzKSksdGhpcy5fd29ya3NwYWNlRWRpdC5kb2N1bWVudENoYW5nZXMucHVzaChvKSxzIT09dm9pZCAwKXJldHVybiBzfSxufSgpO3ZhciB3ZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyKXtyZXR1cm57dXJpOnJ9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLmRlZmluZWQoZSkmJmEuc3RyaW5nKGUudXJpKX1uLmlzPWl9KSh3ZXx8KHdlPXt9KSk7dmFyIEVlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3VyaTpyLHZlcnNpb246ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS5zdHJpbmcoZS51cmkpJiZhLmludGVnZXIoZS52ZXJzaW9uKX1uLmlzPWl9KShFZXx8KEVlPXt9KSk7dmFyIHJlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3VyaTpyLHZlcnNpb246ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS5zdHJpbmcoZS51cmkpJiYoZS52ZXJzaW9uPT09bnVsbHx8YS5pbnRlZ2VyKGUudmVyc2lvbikpfW4uaXM9aX0pKHJlfHwocmU9e30pKTt2YXIgUmU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8scyl7cmV0dXJue3VyaTpyLGxhbmd1YWdlSWQ6ZSx2ZXJzaW9uOm8sdGV4dDpzfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5kZWZpbmVkKGUpJiZhLnN0cmluZyhlLnVyaSkmJmEuc3RyaW5nKGUubGFuZ3VhZ2VJZCkmJmEuaW50ZWdlcihlLnZlcnNpb24pJiZhLnN0cmluZyhlLnRleHQpfW4uaXM9aX0pKFJlfHwoUmU9e30pKTt2YXIgQTsoZnVuY3Rpb24obil7bi5QbGFpblRleHQ9InBsYWludGV4dCIsbi5NYXJrZG93bj0ibWFya2Rvd24ifSkoQXx8KEE9e30pKTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpKXt2YXIgcj1pO3JldHVybiByPT09bi5QbGFpblRleHR8fHI9PT1uLk1hcmtkb3dufW4uaXM9dH0pKEF8fChBPXt9KSk7dmFyIGNlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkpe3ZhciByPWk7cmV0dXJuIGEub2JqZWN0TGl0ZXJhbChpKSYmQS5pcyhyLmtpbmQpJiZhLnN0cmluZyhyLnZhbHVlKX1uLmlzPXR9KShjZXx8KGNlPXt9KSk7dmFyIHA7KGZ1bmN0aW9uKG4pe24uVGV4dD0xLG4uTWV0aG9kPTIsbi5GdW5jdGlvbj0zLG4uQ29uc3RydWN0b3I9NCxuLkZpZWxkPTUsbi5WYXJpYWJsZT02LG4uQ2xhc3M9NyxuLkludGVyZmFjZT04LG4uTW9kdWxlPTksbi5Qcm9wZXJ0eT0xMCxuLlVuaXQ9MTEsbi5WYWx1ZT0xMixuLkVudW09MTMsbi5LZXl3b3JkPTE0LG4uU25pcHBldD0xNSxuLkNvbG9yPTE2LG4uRmlsZT0xNyxuLlJlZmVyZW5jZT0xOCxuLkZvbGRlcj0xOSxuLkVudW1NZW1iZXI9MjAsbi5Db25zdGFudD0yMSxuLlN0cnVjdD0yMixuLkV2ZW50PTIzLG4uT3BlcmF0b3I9MjQsbi5UeXBlUGFyYW1ldGVyPTI1fSkocHx8KHA9e30pKTt2YXIgaWU7KGZ1bmN0aW9uKG4pe24uUGxhaW5UZXh0PTEsbi5TbmlwcGV0PTJ9KShpZXx8KGllPXt9KSk7dmFyIFNlOyhmdW5jdGlvbihuKXtuLkRlcHJlY2F0ZWQ9MX0pKFNlfHwoU2U9e30pKTt2YXIgUGU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8pe3JldHVybntuZXdUZXh0OnIsaW5zZXJ0OmUscmVwbGFjZTpvfX1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmYS5zdHJpbmcoZS5uZXdUZXh0KSYmdi5pcyhlLmluc2VydCkmJnYuaXMoZS5yZXBsYWNlKX1uLmlzPWl9KShQZXx8KFBlPXt9KSk7dmFyIFdlOyhmdW5jdGlvbihuKXtuLmFzSXM9MSxuLmFkanVzdEluZGVudGF0aW9uPTJ9KShXZXx8KFdlPXt9KSk7dmFyIERlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkpe3JldHVybntsYWJlbDppfX1uLmNyZWF0ZT10fSkoRGV8fChEZT17fSkpO3ZhciBMZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpLHIpe3JldHVybntpdGVtczppfHxbXSxpc0luY29tcGxldGU6ISFyfX1uLmNyZWF0ZT10fSkoTGV8fChMZT17fSkpO3ZhciBvZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyKXtyZXR1cm4gci5yZXBsYWNlKC9bXFxgKl97fVtcXSgpIytcLS4hXS9nLCJcXCQmIil9bi5mcm9tUGxhaW5UZXh0PXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBhLnN0cmluZyhlKXx8YS5vYmplY3RMaXRlcmFsKGUpJiZhLnN0cmluZyhlLmxhbmd1YWdlKSYmYS5zdHJpbmcoZS52YWx1ZSl9bi5pcz1pfSkob2V8fChvZT17fSkpO3ZhciBGZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpKXt2YXIgcj1pO3JldHVybiEhciYmYS5vYmplY3RMaXRlcmFsKHIpJiYoY2UuaXMoci5jb250ZW50cyl8fG9lLmlzKHIuY29udGVudHMpfHxhLnR5cGVkQXJyYXkoci5jb250ZW50cyxvZS5pcykpJiYoaS5yYW5nZT09PXZvaWQgMHx8di5pcyhpLnJhbmdlKSl9bi5pcz10fSkoRmV8fChGZT17fSkpO3ZhciBNZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpLHIpe3JldHVybiByP3tsYWJlbDppLGRvY3VtZW50YXRpb246cn06e2xhYmVsOml9fW4uY3JlYXRlPXR9KShNZXx8KE1lPXt9KSk7dmFyIEFlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkscil7Zm9yKHZhciBlPVtdLG89MjtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKWVbby0yXT1hcmd1bWVudHNbb107dmFyIHM9e2xhYmVsOml9O3JldHVybiBhLmRlZmluZWQocikmJihzLmRvY3VtZW50YXRpb249ciksYS5kZWZpbmVkKGUpP3MucGFyYW1ldGVycz1lOnMucGFyYW1ldGVycz1bXSxzfW4uY3JlYXRlPXR9KShBZXx8KEFlPXt9KSk7dmFyIFA7KGZ1bmN0aW9uKG4pe24uVGV4dD0xLG4uUmVhZD0yLG4uV3JpdGU9M30pKFB8fChQPXt9KSk7dmFyIEtlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KGkscil7dmFyIGU9e3JhbmdlOml9O3JldHVybiBhLm51bWJlcihyKSYmKGUua2luZD1yKSxlfW4uY3JlYXRlPXR9KShLZXx8KEtlPXt9KSk7dmFyIGg7KGZ1bmN0aW9uKG4pe24uRmlsZT0xLG4uTW9kdWxlPTIsbi5OYW1lc3BhY2U9MyxuLlBhY2thZ2U9NCxuLkNsYXNzPTUsbi5NZXRob2Q9NixuLlByb3BlcnR5PTcsbi5GaWVsZD04LG4uQ29uc3RydWN0b3I9OSxuLkVudW09MTAsbi5JbnRlcmZhY2U9MTEsbi5GdW5jdGlvbj0xMixuLlZhcmlhYmxlPTEzLG4uQ29uc3RhbnQ9MTQsbi5TdHJpbmc9MTUsbi5OdW1iZXI9MTYsbi5Cb29sZWFuPTE3LG4uQXJyYXk9MTgsbi5PYmplY3Q9MTksbi5LZXk9MjAsbi5OdWxsPTIxLG4uRW51bU1lbWJlcj0yMixuLlN0cnVjdD0yMyxuLkV2ZW50PTI0LG4uT3BlcmF0b3I9MjUsbi5UeXBlUGFyYW1ldGVyPTI2fSkoaHx8KGg9e30pKTt2YXIgSGU7KGZ1bmN0aW9uKG4pe24uRGVwcmVjYXRlZD0xfSkoSGV8fChIZT17fSkpO3ZhciBVZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChpLHIsZSxvLHMpe3ZhciB1PXtuYW1lOmksa2luZDpyLGxvY2F0aW9uOnt1cmk6byxyYW5nZTplfX07cmV0dXJuIHMmJih1LmNvbnRhaW5lck5hbWU9cyksdX1uLmNyZWF0ZT10fSkoVWV8fChVZT17fSkpO3ZhciBqZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyxzLHUsbCl7dmFyIGY9e25hbWU6cixkZXRhaWw6ZSxraW5kOm8scmFuZ2U6cyxzZWxlY3Rpb25SYW5nZTp1fTtyZXR1cm4gbCE9PXZvaWQgMCYmKGYuY2hpbGRyZW49bCksZn1uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gZSYmYS5zdHJpbmcoZS5uYW1lKSYmYS5udW1iZXIoZS5raW5kKSYmdi5pcyhlLnJhbmdlKSYmdi5pcyhlLnNlbGVjdGlvblJhbmdlKSYmKGUuZGV0YWlsPT09dm9pZCAwfHxhLnN0cmluZyhlLmRldGFpbCkpJiYoZS5kZXByZWNhdGVkPT09dm9pZCAwfHxhLmJvb2xlYW4oZS5kZXByZWNhdGVkKSkmJihlLmNoaWxkcmVuPT09dm9pZCAwfHxBcnJheS5pc0FycmF5KGUuY2hpbGRyZW4pKSYmKGUudGFncz09PXZvaWQgMHx8QXJyYXkuaXNBcnJheShlLnRhZ3MpKX1uLmlzPWl9KShqZXx8KGplPXt9KSk7dmFyIE9lOyhmdW5jdGlvbihuKXtuLkVtcHR5PSIiLG4uUXVpY2tGaXg9InF1aWNrZml4IixuLlJlZmFjdG9yPSJyZWZhY3RvciIsbi5SZWZhY3RvckV4dHJhY3Q9InJlZmFjdG9yLmV4dHJhY3QiLG4uUmVmYWN0b3JJbmxpbmU9InJlZmFjdG9yLmlubGluZSIsbi5SZWZhY3RvclJld3JpdGU9InJlZmFjdG9yLnJld3JpdGUiLG4uU291cmNlPSJzb3VyY2UiLG4uU291cmNlT3JnYW5pemVJbXBvcnRzPSJzb3VyY2Uub3JnYW5pemVJbXBvcnRzIixuLlNvdXJjZUZpeEFsbD0ic291cmNlLmZpeEFsbCJ9KShPZXx8KE9lPXt9KSk7dmFyIE5lOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7dmFyIG89e2RpYWdub3N0aWNzOnJ9O3JldHVybiBlIT1udWxsJiYoby5vbmx5PWUpLG99bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS50eXBlZEFycmF5KGUuZGlhZ25vc3RpY3MsbmUuaXMpJiYoZS5vbmx5PT09dm9pZCAwfHxhLnR5cGVkQXJyYXkoZS5vbmx5LGEuc3RyaW5nKSl9bi5pcz1pfSkoTmV8fChOZT17fSkpO3ZhciBWZTsoZnVuY3Rpb24obil7ZnVuY3Rpb24gdChyLGUsbyl7dmFyIHM9e3RpdGxlOnJ9LHU9ITA7cmV0dXJuIHR5cGVvZiBlPT0ic3RyaW5nIj8odT0hMSxzLmtpbmQ9ZSk6RC5pcyhlKT9zLmNvbW1hbmQ9ZTpzLmVkaXQ9ZSx1JiZvIT09dm9pZCAwJiYocy5raW5kPW8pLHN9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGUmJmEuc3RyaW5nKGUudGl0bGUpJiYoZS5kaWFnbm9zdGljcz09PXZvaWQgMHx8YS50eXBlZEFycmF5KGUuZGlhZ25vc3RpY3MsbmUuaXMpKSYmKGUua2luZD09PXZvaWQgMHx8YS5zdHJpbmcoZS5raW5kKSkmJihlLmVkaXQhPT12b2lkIDB8fGUuY29tbWFuZCE9PXZvaWQgMCkmJihlLmNvbW1hbmQ9PT12b2lkIDB8fEQuaXMoZS5jb21tYW5kKSkmJihlLmlzUHJlZmVycmVkPT09dm9pZCAwfHxhLmJvb2xlYW4oZS5pc1ByZWZlcnJlZCkpJiYoZS5lZGl0PT09dm9pZCAwfHxkZS5pcyhlLmVkaXQpKX1uLmlzPWl9KShWZXx8KFZlPXt9KSk7dmFyIHplOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7dmFyIG89e3JhbmdlOnJ9O3JldHVybiBhLmRlZmluZWQoZSkmJihvLmRhdGE9ZSksb31uLmNyZWF0ZT10O2Z1bmN0aW9uIGkocil7dmFyIGU9cjtyZXR1cm4gYS5kZWZpbmVkKGUpJiZ2LmlzKGUucmFuZ2UpJiYoYS51bmRlZmluZWQoZS5jb21tYW5kKXx8RC5pcyhlLmNvbW1hbmQpKX1uLmlzPWl9KSh6ZXx8KHplPXt9KSk7dmFyIFhlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3RhYlNpemU6cixpbnNlcnRTcGFjZXM6ZX19bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmYS51aW50ZWdlcihlLnRhYlNpemUpJiZhLmJvb2xlYW4oZS5pbnNlcnRTcGFjZXMpfW4uaXM9aX0pKFhlfHwoWGU9e30pKTt2YXIgQmU7KGZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQocixlLG8pe3JldHVybntyYW5nZTpyLHRhcmdldDplLGRhdGE6b319bi5jcmVhdGU9dDtmdW5jdGlvbiBpKHIpe3ZhciBlPXI7cmV0dXJuIGEuZGVmaW5lZChlKSYmdi5pcyhlLnJhbmdlKSYmKGEudW5kZWZpbmVkKGUudGFyZ2V0KXx8YS5zdHJpbmcoZS50YXJnZXQpKX1uLmlzPWl9KShCZXx8KEJlPXt9KSk7dmFyICRlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KHIsZSl7cmV0dXJue3JhbmdlOnIscGFyZW50OmV9fW4uY3JlYXRlPXQ7ZnVuY3Rpb24gaShyKXt2YXIgZT1yO3JldHVybiBlIT09dm9pZCAwJiZ2LmlzKGUucmFuZ2UpJiYoZS5wYXJlbnQ9PT12b2lkIDB8fG4uaXMoZS5wYXJlbnQpKX1uLmlzPWl9KSgkZXx8KCRlPXt9KSk7dmFyIHFlOyhmdW5jdGlvbihuKXtmdW5jdGlvbiB0KG8scyx1LGwpe3JldHVybiBuZXcgcG4obyxzLHUsbCl9bi5jcmVhdGU9dDtmdW5jdGlvbiBpKG8pe3ZhciBzPW87cmV0dXJuISEoYS5kZWZpbmVkKHMpJiZhLnN0cmluZyhzLnVyaSkmJihhLnVuZGVmaW5lZChzLmxhbmd1YWdlSWQpfHxhLnN0cmluZyhzLmxhbmd1YWdlSWQpKSYmYS51aW50ZWdlcihzLmxpbmVDb3VudCkmJmEuZnVuYyhzLmdldFRleHQpJiZhLmZ1bmMocy5wb3NpdGlvbkF0KSYmYS5mdW5jKHMub2Zmc2V0QXQpKX1uLmlzPWk7ZnVuY3Rpb24gcihvLHMpe2Zvcih2YXIgdT1vLmdldFRleHQoKSxsPWUocyxmdW5jdGlvbih3LEcpe3ZhciBmZT13LnJhbmdlLnN0YXJ0LmxpbmUtRy5yYW5nZS5zdGFydC5saW5lO3JldHVybiBmZT09PTA/dy5yYW5nZS5zdGFydC5jaGFyYWN0ZXItRy5yYW5nZS5zdGFydC5jaGFyYWN0ZXI6ZmV9KSxmPXUubGVuZ3RoLGc9bC5sZW5ndGgtMTtnPj0wO2ctLSl7dmFyIG09bFtnXSxrPW8ub2Zmc2V0QXQobS5yYW5nZS5zdGFydCksYz1vLm9mZnNldEF0KG0ucmFuZ2UuZW5kKTtpZihjPD1mKXU9dS5zdWJzdHJpbmcoMCxrKSttLm5ld1RleHQrdS5zdWJzdHJpbmcoYyx1Lmxlbmd0aCk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIk92ZXJsYXBwaW5nIGVkaXQiKTtmPWt9cmV0dXJuIHV9bi5hcHBseUVkaXRzPXI7ZnVuY3Rpb24gZShvLHMpe2lmKG8ubGVuZ3RoPD0xKXJldHVybiBvO3ZhciB1PW8ubGVuZ3RoLzJ8MCxsPW8uc2xpY2UoMCx1KSxmPW8uc2xpY2UodSk7ZShsLHMpLGUoZixzKTtmb3IodmFyIGc9MCxtPTAsaz0wO2c8bC5sZW5ndGgmJm08Zi5sZW5ndGg7KXt2YXIgYz1zKGxbZ10sZlttXSk7Yzw9MD9vW2srK109bFtnKytdOm9baysrXT1mW20rK119Zm9yKDtnPGwubGVuZ3RoOylvW2srK109bFtnKytdO2Zvcig7bTxmLmxlbmd0aDspb1trKytdPWZbbSsrXTtyZXR1cm4gb319KShxZXx8KHFlPXt9KSk7dmFyIHBuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0LGkscixlKXt0aGlzLl91cmk9dCx0aGlzLl9sYW5ndWFnZUlkPWksdGhpcy5fdmVyc2lvbj1yLHRoaXMuX2NvbnRlbnQ9ZSx0aGlzLl9saW5lT2Zmc2V0cz12b2lkIDB9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSwidXJpIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VyaX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsImxhbmd1YWdlSWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGFuZ3VhZ2VJZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsInZlcnNpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmVyc2lvbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxuLnByb3RvdHlwZS5nZXRUZXh0PWZ1bmN0aW9uKHQpe2lmKHQpe3ZhciBpPXRoaXMub2Zmc2V0QXQodC5zdGFydCkscj10aGlzLm9mZnNldEF0KHQuZW5kKTtyZXR1cm4gdGhpcy5fY29udGVudC5zdWJzdHJpbmcoaSxyKX1yZXR1cm4gdGhpcy5fY29udGVudH0sbi5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsaSl7dGhpcy5fY29udGVudD10LnRleHQsdGhpcy5fdmVyc2lvbj1pLHRoaXMuX2xpbmVPZmZzZXRzPXZvaWQgMH0sbi5wcm90b3R5cGUuZ2V0TGluZU9mZnNldHM9ZnVuY3Rpb24oKXtpZih0aGlzLl9saW5lT2Zmc2V0cz09PXZvaWQgMCl7Zm9yKHZhciB0PVtdLGk9dGhpcy5fY29udGVudCxyPSEwLGU9MDtlPGkubGVuZ3RoO2UrKyl7ciYmKHQucHVzaChlKSxyPSExKTt2YXIgbz1pLmNoYXJBdChlKTtyPW89PT0iXHIifHxvPT09YApgLG89PT0iXHIiJiZlKzE8aS5sZW5ndGgmJmkuY2hhckF0KGUrMSk9PT1gCmAmJmUrK31yJiZpLmxlbmd0aD4wJiZ0LnB1c2goaS5sZW5ndGgpLHRoaXMuX2xpbmVPZmZzZXRzPXR9cmV0dXJuIHRoaXMuX2xpbmVPZmZzZXRzfSxuLnByb3RvdHlwZS5wb3NpdGlvbkF0PWZ1bmN0aW9uKHQpe3Q9TWF0aC5tYXgoTWF0aC5taW4odCx0aGlzLl9jb250ZW50Lmxlbmd0aCksMCk7dmFyIGk9dGhpcy5nZXRMaW5lT2Zmc2V0cygpLHI9MCxlPWkubGVuZ3RoO2lmKGU9PT0wKXJldHVybiB4LmNyZWF0ZSgwLHQpO2Zvcig7cjxlOyl7dmFyIG89TWF0aC5mbG9vcigocitlKS8yKTtpW29dPnQ/ZT1vOnI9bysxfXZhciBzPXItMTtyZXR1cm4geC5jcmVhdGUocyx0LWlbc10pfSxuLnByb3RvdHlwZS5vZmZzZXRBdD1mdW5jdGlvbih0KXt2YXIgaT10aGlzLmdldExpbmVPZmZzZXRzKCk7aWYodC5saW5lPj1pLmxlbmd0aClyZXR1cm4gdGhpcy5fY29udGVudC5sZW5ndGg7aWYodC5saW5lPDApcmV0dXJuIDA7dmFyIHI9aVt0LmxpbmVdLGU9dC5saW5lKzE8aS5sZW5ndGg/aVt0LmxpbmUrMV06dGhpcy5fY29udGVudC5sZW5ndGg7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHIrdC5jaGFyYWN0ZXIsZSkscil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSwibGluZUNvdW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGluZU9mZnNldHMoKS5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksbn0oKSxhOyhmdW5jdGlvbihuKXt2YXIgdD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIGkoYyl7cmV0dXJuIHR5cGVvZiBjPCJ1In1uLmRlZmluZWQ9aTtmdW5jdGlvbiByKGMpe3JldHVybiB0eXBlb2YgYz4idSJ9bi51bmRlZmluZWQ9cjtmdW5jdGlvbiBlKGMpe3JldHVybiBjPT09ITB8fGM9PT0hMX1uLmJvb2xlYW49ZTtmdW5jdGlvbiBvKGMpe3JldHVybiB0LmNhbGwoYyk9PT0iW29iamVjdCBTdHJpbmddIn1uLnN0cmluZz1vO2Z1bmN0aW9uIHMoYyl7cmV0dXJuIHQuY2FsbChjKT09PSJbb2JqZWN0IE51bWJlcl0ifW4ubnVtYmVyPXM7ZnVuY3Rpb24gdShjLHcsRyl7cmV0dXJuIHQuY2FsbChjKT09PSJbb2JqZWN0IE51bWJlcl0iJiZ3PD1jJiZjPD1HfW4ubnVtYmVyUmFuZ2U9dTtmdW5jdGlvbiBsKGMpe3JldHVybiB0LmNhbGwoYyk9PT0iW29iamVjdCBOdW1iZXJdIiYmLTIxNDc0ODM2NDg8PWMmJmM8PTIxNDc0ODM2NDd9bi5pbnRlZ2VyPWw7ZnVuY3Rpb24gZihjKXtyZXR1cm4gdC5jYWxsKGMpPT09IltvYmplY3QgTnVtYmVyXSImJjA8PWMmJmM8PTIxNDc0ODM2NDd9bi51aW50ZWdlcj1mO2Z1bmN0aW9uIGcoYyl7cmV0dXJuIHQuY2FsbChjKT09PSJbb2JqZWN0IEZ1bmN0aW9uXSJ9bi5mdW5jPWc7ZnVuY3Rpb24gbShjKXtyZXR1cm4gYyE9PW51bGwmJnR5cGVvZiBjPT0ib2JqZWN0In1uLm9iamVjdExpdGVyYWw9bTtmdW5jdGlvbiBrKGMsdyl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYykmJmMuZXZlcnkodyl9bi50eXBlZEFycmF5PWt9KShhfHwoYT17fSkpO3ZhciBLPWNsYXNze2NvbnN0cnVjdG9yKHQsaSxyKXt0aGlzLl9sYW5ndWFnZUlkPXQ7dGhpcy5fd29ya2VyPWk7dGhpcy5fZGlzcG9zYWJsZXM9W107dGhpcy5fbGlzdGVuZXI9T2JqZWN0LmNyZWF0ZShudWxsKTtsZXQgZT1zPT57bGV0IHU9cy5nZXRMYW5ndWFnZUlkKCk7aWYodSE9PXRoaXMuX2xhbmd1YWdlSWQpcmV0dXJuO2xldCBsO3RoaXMuX2xpc3RlbmVyW3MudXJpLnRvU3RyaW5nKCldPXMub25EaWRDaGFuZ2VDb250ZW50KCgpPT57d2luZG93LmNsZWFyVGltZW91dChsKSxsPXdpbmRvdy5zZXRUaW1lb3V0KCgpPT50aGlzLl9kb1ZhbGlkYXRlKHMudXJpLHUpLDUwMCl9KSx0aGlzLl9kb1ZhbGlkYXRlKHMudXJpLHUpfSxvPXM9PntkLmVkaXRvci5zZXRNb2RlbE1hcmtlcnMocyx0aGlzLl9sYW5ndWFnZUlkLFtdKTtsZXQgdT1zLnVyaS50b1N0cmluZygpLGw9dGhpcy5fbGlzdGVuZXJbdV07bCYmKGwuZGlzcG9zZSgpLGRlbGV0ZSB0aGlzLl9saXN0ZW5lclt1XSl9O3RoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZC5lZGl0b3Iub25EaWRDcmVhdGVNb2RlbChlKSksdGhpcy5fZGlzcG9zYWJsZXMucHVzaChkLmVkaXRvci5vbldpbGxEaXNwb3NlTW9kZWwobykpLHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZC5lZGl0b3Iub25EaWRDaGFuZ2VNb2RlbExhbmd1YWdlKHM9PntvKHMubW9kZWwpLGUocy5tb2RlbCl9KSksdGhpcy5fZGlzcG9zYWJsZXMucHVzaChyKHM9PntkLmVkaXRvci5nZXRNb2RlbHMoKS5mb3JFYWNoKHU9Pnt1LmdldExhbmd1YWdlSWQoKT09PXRoaXMuX2xhbmd1YWdlSWQmJihvKHUpLGUodSkpfSl9KSksdGhpcy5fZGlzcG9zYWJsZXMucHVzaCh7ZGlzcG9zZTooKT0+e2QuZWRpdG9yLmdldE1vZGVscygpLmZvckVhY2gobyk7Zm9yKGxldCBzIGluIHRoaXMuX2xpc3RlbmVyKXRoaXMuX2xpc3RlbmVyW3NdLmRpc3Bvc2UoKX19KSxkLmVkaXRvci5nZXRNb2RlbHMoKS5mb3JFYWNoKGUpfWRpc3Bvc2UoKXt0aGlzLl9kaXNwb3NhYmxlcy5mb3JFYWNoKHQ9PnQmJnQuZGlzcG9zZSgpKSx0aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGg9MH1fZG9WYWxpZGF0ZSh0LGkpe3RoaXMuX3dvcmtlcih0KS50aGVuKHI9PnIuZG9WYWxpZGF0aW9uKHQudG9TdHJpbmcoKSkpLnRoZW4ocj0+e2xldCBlPXIubWFwKHM9PnZuKHQscykpLG89ZC5lZGl0b3IuZ2V0TW9kZWwodCk7byYmby5nZXRMYW5ndWFnZUlkKCk9PT1pJiZkLmVkaXRvci5zZXRNb2RlbE1hcmtlcnMobyxpLGUpfSkudGhlbih2b2lkIDAscj0+e2NvbnNvbGUuZXJyb3Iocil9KX19O2Z1bmN0aW9uIG1uKG4pe3N3aXRjaChuKXtjYXNlIGIuRXJyb3I6cmV0dXJuIGQuTWFya2VyU2V2ZXJpdHkuRXJyb3I7Y2FzZSBiLldhcm5pbmc6cmV0dXJuIGQuTWFya2VyU2V2ZXJpdHkuV2FybmluZztjYXNlIGIuSW5mb3JtYXRpb246cmV0dXJuIGQuTWFya2VyU2V2ZXJpdHkuSW5mbztjYXNlIGIuSGludDpyZXR1cm4gZC5NYXJrZXJTZXZlcml0eS5IaW50O2RlZmF1bHQ6cmV0dXJuIGQuTWFya2VyU2V2ZXJpdHkuSW5mb319ZnVuY3Rpb24gdm4obix0KXtsZXQgaT10eXBlb2YgdC5jb2RlPT0ibnVtYmVyIj9TdHJpbmcodC5jb2RlKTp0LmNvZGU7cmV0dXJue3NldmVyaXR5Om1uKHQuc2V2ZXJpdHkpLHN0YXJ0TGluZU51bWJlcjp0LnJhbmdlLnN0YXJ0LmxpbmUrMSxzdGFydENvbHVtbjp0LnJhbmdlLnN0YXJ0LmNoYXJhY3RlcisxLGVuZExpbmVOdW1iZXI6dC5yYW5nZS5lbmQubGluZSsxLGVuZENvbHVtbjp0LnJhbmdlLmVuZC5jaGFyYWN0ZXIrMSxtZXNzYWdlOnQubWVzc2FnZSxjb2RlOmksc291cmNlOnQuc291cmNlfX12YXIgSD1jbGFzc3tjb25zdHJ1Y3Rvcih0LGkpe3RoaXMuX3dvcmtlcj10O3RoaXMuX3RyaWdnZXJDaGFyYWN0ZXJzPWl9Z2V0IHRyaWdnZXJDaGFyYWN0ZXJzKCl7cmV0dXJuIHRoaXMuX3RyaWdnZXJDaGFyYWN0ZXJzfXByb3ZpZGVDb21wbGV0aW9uSXRlbXModCxpLHIsZSl7bGV0IG89dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihvKS50aGVuKHM9PnMuZG9Db21wbGV0ZShvLnRvU3RyaW5nKCksXyhpKSkpLnRoZW4ocz0+e2lmKCFzKXJldHVybjtsZXQgdT10LmdldFdvcmRVbnRpbFBvc2l0aW9uKGkpLGw9bmV3IGQuUmFuZ2UoaS5saW5lTnVtYmVyLHUuc3RhcnRDb2x1bW4saS5saW5lTnVtYmVyLHUuZW5kQ29sdW1uKSxmPXMuaXRlbXMubWFwKGc9PntsZXQgbT17bGFiZWw6Zy5sYWJlbCxpbnNlcnRUZXh0OmcuaW5zZXJ0VGV4dHx8Zy5sYWJlbCxzb3J0VGV4dDpnLnNvcnRUZXh0LGZpbHRlclRleHQ6Zy5maWx0ZXJUZXh0LGRvY3VtZW50YXRpb246Zy5kb2N1bWVudGF0aW9uLGRldGFpbDpnLmRldGFpbCxjb21tYW5kOnhuKGcuY29tbWFuZCkscmFuZ2U6bCxraW5kOlRuKGcua2luZCl9O3JldHVybiBnLnRleHRFZGl0JiYoeW4oZy50ZXh0RWRpdCk/bS5yYW5nZT17aW5zZXJ0OlQoZy50ZXh0RWRpdC5pbnNlcnQpLHJlcGxhY2U6VChnLnRleHRFZGl0LnJlcGxhY2UpfTptLnJhbmdlPVQoZy50ZXh0RWRpdC5yYW5nZSksbS5pbnNlcnRUZXh0PWcudGV4dEVkaXQubmV3VGV4dCksZy5hZGRpdGlvbmFsVGV4dEVkaXRzJiYobS5hZGRpdGlvbmFsVGV4dEVkaXRzPWcuYWRkaXRpb25hbFRleHRFZGl0cy5tYXAoVykpLGcuaW5zZXJ0VGV4dEZvcm1hdD09PWllLlNuaXBwZXQmJihtLmluc2VydFRleHRSdWxlcz1kLmxhbmd1YWdlcy5Db21wbGV0aW9uSXRlbUluc2VydFRleHRSdWxlLkluc2VydEFzU25pcHBldCksbX0pO3JldHVybntpc0luY29tcGxldGU6cy5pc0luY29tcGxldGUsc3VnZ2VzdGlvbnM6Zn19KX19O2Z1bmN0aW9uIF8obil7aWYobilyZXR1cm57Y2hhcmFjdGVyOm4uY29sdW1uLTEsbGluZTpuLmxpbmVOdW1iZXItMX19ZnVuY3Rpb24gZ2Uobil7aWYobilyZXR1cm57c3RhcnQ6e2xpbmU6bi5zdGFydExpbmVOdW1iZXItMSxjaGFyYWN0ZXI6bi5zdGFydENvbHVtbi0xfSxlbmQ6e2xpbmU6bi5lbmRMaW5lTnVtYmVyLTEsY2hhcmFjdGVyOm4uZW5kQ29sdW1uLTF9fX1mdW5jdGlvbiBUKG4pe2lmKG4pcmV0dXJuIG5ldyBkLlJhbmdlKG4uc3RhcnQubGluZSsxLG4uc3RhcnQuY2hhcmFjdGVyKzEsbi5lbmQubGluZSsxLG4uZW5kLmNoYXJhY3RlcisxKX1mdW5jdGlvbiB5bihuKXtyZXR1cm4gdHlwZW9mIG4uaW5zZXJ0PCJ1IiYmdHlwZW9mIG4ucmVwbGFjZTwidSJ9ZnVuY3Rpb24gVG4obil7bGV0IHQ9ZC5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kO3N3aXRjaChuKXtjYXNlIHAuVGV4dDpyZXR1cm4gdC5UZXh0O2Nhc2UgcC5NZXRob2Q6cmV0dXJuIHQuTWV0aG9kO2Nhc2UgcC5GdW5jdGlvbjpyZXR1cm4gdC5GdW5jdGlvbjtjYXNlIHAuQ29uc3RydWN0b3I6cmV0dXJuIHQuQ29uc3RydWN0b3I7Y2FzZSBwLkZpZWxkOnJldHVybiB0LkZpZWxkO2Nhc2UgcC5WYXJpYWJsZTpyZXR1cm4gdC5WYXJpYWJsZTtjYXNlIHAuQ2xhc3M6cmV0dXJuIHQuQ2xhc3M7Y2FzZSBwLkludGVyZmFjZTpyZXR1cm4gdC5JbnRlcmZhY2U7Y2FzZSBwLk1vZHVsZTpyZXR1cm4gdC5Nb2R1bGU7Y2FzZSBwLlByb3BlcnR5OnJldHVybiB0LlByb3BlcnR5O2Nhc2UgcC5Vbml0OnJldHVybiB0LlVuaXQ7Y2FzZSBwLlZhbHVlOnJldHVybiB0LlZhbHVlO2Nhc2UgcC5FbnVtOnJldHVybiB0LkVudW07Y2FzZSBwLktleXdvcmQ6cmV0dXJuIHQuS2V5d29yZDtjYXNlIHAuU25pcHBldDpyZXR1cm4gdC5TbmlwcGV0O2Nhc2UgcC5Db2xvcjpyZXR1cm4gdC5Db2xvcjtjYXNlIHAuRmlsZTpyZXR1cm4gdC5GaWxlO2Nhc2UgcC5SZWZlcmVuY2U6cmV0dXJuIHQuUmVmZXJlbmNlfXJldHVybiB0LlByb3BlcnR5fWZ1bmN0aW9uIFcobil7aWYobilyZXR1cm57cmFuZ2U6VChuLnJhbmdlKSx0ZXh0Om4ubmV3VGV4dH19ZnVuY3Rpb24geG4obil7cmV0dXJuIG4mJm4uY29tbWFuZD09PSJlZGl0b3IuYWN0aW9uLnRyaWdnZXJTdWdnZXN0Ij97aWQ6bi5jb21tYW5kLHRpdGxlOm4udGl0bGUsYXJndW1lbnRzOm4uYXJndW1lbnRzfTp2b2lkIDB9dmFyIFU9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZUhvdmVyKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5kb0hvdmVyKGUudG9TdHJpbmcoKSxfKGkpKSkudGhlbihvPT57aWYobylyZXR1cm57cmFuZ2U6VChvLnJhbmdlKSxjb250ZW50czpJbihvLmNvbnRlbnRzKX19KX19O2Z1bmN0aW9uIGtuKG4pe3JldHVybiBuJiZ0eXBlb2Ygbj09Im9iamVjdCImJnR5cGVvZiBuLmtpbmQ9PSJzdHJpbmcifWZ1bmN0aW9uIFFlKG4pe3JldHVybiB0eXBlb2Ygbj09InN0cmluZyI/e3ZhbHVlOm59OmtuKG4pP24ua2luZD09PSJwbGFpbnRleHQiP3t2YWx1ZTpuLnZhbHVlLnJlcGxhY2UoL1tcXGAqX3t9W1xdKCkjK1wtLiFdL2csIlxcJCYiKX06e3ZhbHVlOm4udmFsdWV9Ont2YWx1ZToiYGBgIituLmxhbmd1YWdlK2AKYCtuLnZhbHVlKyJcbmBgYFxuIn19ZnVuY3Rpb24gSW4obil7aWYobilyZXR1cm4gQXJyYXkuaXNBcnJheShuKT9uLm1hcChRZSk6W1FlKG4pXX12YXIgaj1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dH1wcm92aWRlRG9jdW1lbnRIaWdobGlnaHRzKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5maW5kRG9jdW1lbnRIaWdobGlnaHRzKGUudG9TdHJpbmcoKSxfKGkpKSkudGhlbihvPT57aWYobylyZXR1cm4gby5tYXAocz0+KHtyYW5nZTpUKHMucmFuZ2UpLGtpbmQ6Q24ocy5raW5kKX0pKX0pfX07ZnVuY3Rpb24gQ24obil7c3dpdGNoKG4pe2Nhc2UgUC5SZWFkOnJldHVybiBkLmxhbmd1YWdlcy5Eb2N1bWVudEhpZ2hsaWdodEtpbmQuUmVhZDtjYXNlIFAuV3JpdGU6cmV0dXJuIGQubGFuZ3VhZ2VzLkRvY3VtZW50SGlnaGxpZ2h0S2luZC5Xcml0ZTtjYXNlIFAuVGV4dDpyZXR1cm4gZC5sYW5ndWFnZXMuRG9jdW1lbnRIaWdobGlnaHRLaW5kLlRleHR9cmV0dXJuIGQubGFuZ3VhZ2VzLkRvY3VtZW50SGlnaGxpZ2h0S2luZC5UZXh0fXZhciBPPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVEZWZpbml0aW9uKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5maW5kRGVmaW5pdGlvbihlLnRvU3RyaW5nKCksXyhpKSkpLnRoZW4obz0+e2lmKG8pcmV0dXJuW0dlKG8pXX0pfX07ZnVuY3Rpb24gR2Uobil7cmV0dXJue3VyaTpkLlVyaS5wYXJzZShuLnVyaSkscmFuZ2U6VChuLnJhbmdlKX19dmFyIE49Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZVJlZmVyZW5jZXModCxpLHIsZSl7bGV0IG89dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihvKS50aGVuKHM9PnMuZmluZFJlZmVyZW5jZXMoby50b1N0cmluZygpLF8oaSkpKS50aGVuKHM9PntpZihzKXJldHVybiBzLm1hcChHZSl9KX19LFY9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZVJlbmFtZUVkaXRzKHQsaSxyLGUpe2xldCBvPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIobykudGhlbihzPT5zLmRvUmVuYW1lKG8udG9TdHJpbmcoKSxfKGkpLHIpKS50aGVuKHM9Pl9uKHMpKX19O2Z1bmN0aW9uIF9uKG4pe2lmKCFufHwhbi5jaGFuZ2VzKXJldHVybjtsZXQgdD1bXTtmb3IobGV0IGkgaW4gbi5jaGFuZ2VzKXtsZXQgcj1kLlVyaS5wYXJzZShpKTtmb3IobGV0IGUgb2Ygbi5jaGFuZ2VzW2ldKXQucHVzaCh7cmVzb3VyY2U6cix2ZXJzaW9uSWQ6dm9pZCAwLHRleHRFZGl0OntyYW5nZTpUKGUucmFuZ2UpLHRleHQ6ZS5uZXdUZXh0fX0pfXJldHVybntlZGl0czp0fX12YXIgej1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dH1wcm92aWRlRG9jdW1lbnRTeW1ib2xzKHQsaSl7bGV0IHI9dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihyKS50aGVuKGU9PmUuZmluZERvY3VtZW50U3ltYm9scyhyLnRvU3RyaW5nKCkpKS50aGVuKGU9PntpZihlKXJldHVybiBlLm1hcChvPT5ibihvKT9KZShvKTp7bmFtZTpvLm5hbWUsZGV0YWlsOiIiLGNvbnRhaW5lck5hbWU6by5jb250YWluZXJOYW1lLGtpbmQ6WWUoby5raW5kKSxyYW5nZTpUKG8ubG9jYXRpb24ucmFuZ2UpLHNlbGVjdGlvblJhbmdlOlQoby5sb2NhdGlvbi5yYW5nZSksdGFnczpbXX0pfSl9fTtmdW5jdGlvbiBibihuKXtyZXR1cm4iY2hpbGRyZW4iaW4gbn1mdW5jdGlvbiBKZShuKXtyZXR1cm57bmFtZTpuLm5hbWUsZGV0YWlsOm4uZGV0YWlsPz8iIixraW5kOlllKG4ua2luZCkscmFuZ2U6VChuLnJhbmdlKSxzZWxlY3Rpb25SYW5nZTpUKG4uc2VsZWN0aW9uUmFuZ2UpLHRhZ3M6bi50YWdzPz9bXSxjaGlsZHJlbjoobi5jaGlsZHJlbj8/W10pLm1hcCh0PT5KZSh0KSl9fWZ1bmN0aW9uIFllKG4pe2xldCB0PWQubGFuZ3VhZ2VzLlN5bWJvbEtpbmQ7c3dpdGNoKG4pe2Nhc2UgaC5GaWxlOnJldHVybiB0LkZpbGU7Y2FzZSBoLk1vZHVsZTpyZXR1cm4gdC5Nb2R1bGU7Y2FzZSBoLk5hbWVzcGFjZTpyZXR1cm4gdC5OYW1lc3BhY2U7Y2FzZSBoLlBhY2thZ2U6cmV0dXJuIHQuUGFja2FnZTtjYXNlIGguQ2xhc3M6cmV0dXJuIHQuQ2xhc3M7Y2FzZSBoLk1ldGhvZDpyZXR1cm4gdC5NZXRob2Q7Y2FzZSBoLlByb3BlcnR5OnJldHVybiB0LlByb3BlcnR5O2Nhc2UgaC5GaWVsZDpyZXR1cm4gdC5GaWVsZDtjYXNlIGguQ29uc3RydWN0b3I6cmV0dXJuIHQuQ29uc3RydWN0b3I7Y2FzZSBoLkVudW06cmV0dXJuIHQuRW51bTtjYXNlIGguSW50ZXJmYWNlOnJldHVybiB0LkludGVyZmFjZTtjYXNlIGguRnVuY3Rpb246cmV0dXJuIHQuRnVuY3Rpb247Y2FzZSBoLlZhcmlhYmxlOnJldHVybiB0LlZhcmlhYmxlO2Nhc2UgaC5Db25zdGFudDpyZXR1cm4gdC5Db25zdGFudDtjYXNlIGguU3RyaW5nOnJldHVybiB0LlN0cmluZztjYXNlIGguTnVtYmVyOnJldHVybiB0Lk51bWJlcjtjYXNlIGguQm9vbGVhbjpyZXR1cm4gdC5Cb29sZWFuO2Nhc2UgaC5BcnJheTpyZXR1cm4gdC5BcnJheX1yZXR1cm4gdC5GdW5jdGlvbn12YXIgbGU9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZUxpbmtzKHQsaSl7bGV0IHI9dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihyKS50aGVuKGU9PmUuZmluZERvY3VtZW50TGlua3Moci50b1N0cmluZygpKSkudGhlbihlPT57aWYoZSlyZXR1cm57bGlua3M6ZS5tYXAobz0+KHtyYW5nZTpUKG8ucmFuZ2UpLHVybDpvLnRhcmdldH0pKX19KX19LFg9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZURvY3VtZW50Rm9ybWF0dGluZ0VkaXRzKHQsaSxyKXtsZXQgZT10LnVyaTtyZXR1cm4gdGhpcy5fd29ya2VyKGUpLnRoZW4obz0+by5mb3JtYXQoZS50b1N0cmluZygpLG51bGwsWmUoaSkpLnRoZW4ocz0+e2lmKCEoIXN8fHMubGVuZ3RoPT09MCkpcmV0dXJuIHMubWFwKFcpfSkpfX0sQj1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dDt0aGlzLmNhbkZvcm1hdE11bHRpcGxlUmFuZ2VzPSExfXByb3ZpZGVEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRzKHQsaSxyLGUpe2xldCBvPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIobykudGhlbihzPT5zLmZvcm1hdChvLnRvU3RyaW5nKCksZ2UoaSksWmUocikpLnRoZW4odT0+e2lmKCEoIXV8fHUubGVuZ3RoPT09MCkpcmV0dXJuIHUubWFwKFcpfSkpfX07ZnVuY3Rpb24gWmUobil7cmV0dXJue3RhYlNpemU6bi50YWJTaXplLGluc2VydFNwYWNlczpuLmluc2VydFNwYWNlc319dmFyICQ9Y2xhc3N7Y29uc3RydWN0b3IodCl7dGhpcy5fd29ya2VyPXR9cHJvdmlkZURvY3VtZW50Q29sb3JzKHQsaSl7bGV0IHI9dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihyKS50aGVuKGU9PmUuZmluZERvY3VtZW50Q29sb3JzKHIudG9TdHJpbmcoKSkpLnRoZW4oZT0+e2lmKGUpcmV0dXJuIGUubWFwKG89Pih7Y29sb3I6by5jb2xvcixyYW5nZTpUKG8ucmFuZ2UpfSkpfSl9cHJvdmlkZUNvbG9yUHJlc2VudGF0aW9ucyh0LGkscil7bGV0IGU9dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihlKS50aGVuKG89Pm8uZ2V0Q29sb3JQcmVzZW50YXRpb25zKGUudG9TdHJpbmcoKSxpLmNvbG9yLGdlKGkucmFuZ2UpKSkudGhlbihvPT57aWYobylyZXR1cm4gby5tYXAocz0+e2xldCB1PXtsYWJlbDpzLmxhYmVsfTtyZXR1cm4gcy50ZXh0RWRpdCYmKHUudGV4dEVkaXQ9VyhzLnRleHRFZGl0KSkscy5hZGRpdGlvbmFsVGV4dEVkaXRzJiYodS5hZGRpdGlvbmFsVGV4dEVkaXRzPXMuYWRkaXRpb25hbFRleHRFZGl0cy5tYXAoVykpLHV9KX0pfX0scT1jbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl93b3JrZXI9dH1wcm92aWRlRm9sZGluZ1Jhbmdlcyh0LGkscil7bGV0IGU9dC51cmk7cmV0dXJuIHRoaXMuX3dvcmtlcihlKS50aGVuKG89Pm8uZ2V0Rm9sZGluZ1JhbmdlcyhlLnRvU3RyaW5nKCksaSkpLnRoZW4obz0+e2lmKG8pcmV0dXJuIG8ubWFwKHM9PntsZXQgdT17c3RhcnQ6cy5zdGFydExpbmUrMSxlbmQ6cy5lbmRMaW5lKzF9O3JldHVybiB0eXBlb2Ygcy5raW5kPCJ1IiYmKHUua2luZD13bihzLmtpbmQpKSx1fSl9KX19O2Z1bmN0aW9uIHduKG4pe3N3aXRjaChuKXtjYXNlIFMuQ29tbWVudDpyZXR1cm4gZC5sYW5ndWFnZXMuRm9sZGluZ1JhbmdlS2luZC5Db21tZW50O2Nhc2UgUy5JbXBvcnRzOnJldHVybiBkLmxhbmd1YWdlcy5Gb2xkaW5nUmFuZ2VLaW5kLkltcG9ydHM7Y2FzZSBTLlJlZ2lvbjpyZXR1cm4gZC5sYW5ndWFnZXMuRm9sZGluZ1JhbmdlS2luZC5SZWdpb259fXZhciBRPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuX3dvcmtlcj10fXByb3ZpZGVTZWxlY3Rpb25SYW5nZXModCxpLHIpe2xldCBlPXQudXJpO3JldHVybiB0aGlzLl93b3JrZXIoZSkudGhlbihvPT5vLmdldFNlbGVjdGlvblJhbmdlcyhlLnRvU3RyaW5nKCksaS5tYXAoXykpKS50aGVuKG89PntpZihvKXJldHVybiBvLm1hcChzPT57bGV0IHU9W107Zm9yKDtzOyl1LnB1c2goe3JhbmdlOlQocy5yYW5nZSl9KSxzPXMucGFyZW50O3JldHVybiB1fSl9KX19O2Z1bmN0aW9uIFJuKG4pe2xldCB0PVtdLGk9W10scj1uZXcgRShuKTt0LnB1c2gocik7bGV0IGU9KC4uLnMpPT5yLmdldExhbmd1YWdlU2VydmljZVdvcmtlciguLi5zKTtmdW5jdGlvbiBvKCl7bGV0e2xhbmd1YWdlSWQ6cyxtb2RlQ29uZmlndXJhdGlvbjp1fT1uO25uKGkpLHUuY29tcGxldGlvbkl0ZW1zJiZpLnB1c2goZC5sYW5ndWFnZXMucmVnaXN0ZXJDb21wbGV0aW9uSXRlbVByb3ZpZGVyKHMsbmV3IEgoZSxbIi8iLCItIiwiOiJdKSkpLHUuaG92ZXJzJiZpLnB1c2goZC5sYW5ndWFnZXMucmVnaXN0ZXJIb3ZlclByb3ZpZGVyKHMsbmV3IFUoZSkpKSx1LmRvY3VtZW50SGlnaGxpZ2h0cyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRIaWdobGlnaHRQcm92aWRlcihzLG5ldyBqKGUpKSksdS5kZWZpbml0aW9ucyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRGVmaW5pdGlvblByb3ZpZGVyKHMsbmV3IE8oZSkpKSx1LnJlZmVyZW5jZXMmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlclJlZmVyZW5jZVByb3ZpZGVyKHMsbmV3IE4oZSkpKSx1LmRvY3VtZW50U3ltYm9scyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyRG9jdW1lbnRTeW1ib2xQcm92aWRlcihzLG5ldyB6KGUpKSksdS5yZW5hbWUmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlclJlbmFtZVByb3ZpZGVyKHMsbmV3IFYoZSkpKSx1LmNvbG9ycyYmaS5wdXNoKGQubGFuZ3VhZ2VzLnJlZ2lzdGVyQ29sb3JQcm92aWRlcihzLG5ldyAkKGUpKSksdS5mb2xkaW5nUmFuZ2VzJiZpLnB1c2goZC5sYW5ndWFnZXMucmVnaXN0ZXJGb2xkaW5nUmFuZ2VQcm92aWRlcihzLG5ldyBxKGUpKSksdS5kaWFnbm9zdGljcyYmaS5wdXNoKG5ldyBLKHMsZSxuLm9uRGlkQ2hhbmdlKSksdS5zZWxlY3Rpb25SYW5nZXMmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlclNlbGVjdGlvblJhbmdlUHJvdmlkZXIocyxuZXcgUShlKSkpLHUuZG9jdW1lbnRGb3JtYXR0aW5nRWRpdHMmJmkucHVzaChkLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcihzLG5ldyBYKGUpKSksdS5kb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRzJiZpLnB1c2goZC5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlcihzLG5ldyBCKGUpKSl9cmV0dXJuIG8oKSx0LnB1c2goZW4oaSkpLGVuKHQpfWZ1bmN0aW9uIGVuKG4pe3JldHVybntkaXNwb3NlOigpPT5ubihuKX19ZnVuY3Rpb24gbm4obil7Zm9yKDtuLmxlbmd0aDspbi5wb3AoKS5kaXNwb3NlKCl9cmV0dXJuIGxuKFNuKTt9KSgpOwpyZXR1cm4gbW9kdWxlRXhwb3J0czsKfSk7Cg==