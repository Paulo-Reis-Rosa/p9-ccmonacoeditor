data:application/javascript;base64,InVzZSBzdHJpY3QiOy8qIS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBWZXJzaW9uOiAwLjQ2LjAoMjEwMDczNjBjYWQyODY0OGJkZjQ2MjgyYTI1OTJjYjQ3YzNhN2E2ZikKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2Jsb2IvbWFpbi9MSUNFTlNFLnR4dAogKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9jb25zdCBfYW1kTG9hZGVyR2xvYmFsPXRoaXMsX2NvbW1vbmpzR2xvYmFsPXR5cGVvZiBnbG9iYWw9PSJvYmplY3QiP2dsb2JhbDp7fTt2YXIgQU1ETG9hZGVyOyhmdW5jdGlvbih1KXt1Lmdsb2JhbD1fYW1kTG9hZGVyR2xvYmFsO2NsYXNzIHl7Z2V0IGlzV2luZG93cygpe3JldHVybiB0aGlzLl9kZXRlY3QoKSx0aGlzLl9pc1dpbmRvd3N9Z2V0IGlzTm9kZSgpe3JldHVybiB0aGlzLl9kZXRlY3QoKSx0aGlzLl9pc05vZGV9Z2V0IGlzRWxlY3Ryb25SZW5kZXJlcigpe3JldHVybiB0aGlzLl9kZXRlY3QoKSx0aGlzLl9pc0VsZWN0cm9uUmVuZGVyZXJ9Z2V0IGlzV2ViV29ya2VyKCl7cmV0dXJuIHRoaXMuX2RldGVjdCgpLHRoaXMuX2lzV2ViV29ya2VyfWdldCBpc0VsZWN0cm9uTm9kZUludGVncmF0aW9uV2ViV29ya2VyKCl7cmV0dXJuIHRoaXMuX2RldGVjdCgpLHRoaXMuX2lzRWxlY3Ryb25Ob2RlSW50ZWdyYXRpb25XZWJXb3JrZXJ9Y29uc3RydWN0b3IoKXt0aGlzLl9kZXRlY3RlZD0hMSx0aGlzLl9pc1dpbmRvd3M9ITEsdGhpcy5faXNOb2RlPSExLHRoaXMuX2lzRWxlY3Ryb25SZW5kZXJlcj0hMSx0aGlzLl9pc1dlYldvcmtlcj0hMSx0aGlzLl9pc0VsZWN0cm9uTm9kZUludGVncmF0aW9uV2ViV29ya2VyPSExfV9kZXRlY3QoKXt0aGlzLl9kZXRlY3RlZHx8KHRoaXMuX2RldGVjdGVkPSEwLHRoaXMuX2lzV2luZG93cz15Ll9pc1dpbmRvd3MoKSx0aGlzLl9pc05vZGU9dHlwZW9mIG1vZHVsZTwidSImJiEhbW9kdWxlLmV4cG9ydHMsdGhpcy5faXNFbGVjdHJvblJlbmRlcmVyPXR5cGVvZiBwcm9jZXNzPCJ1IiYmdHlwZW9mIHByb2Nlc3MudmVyc2lvbnM8InUiJiZ0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5lbGVjdHJvbjwidSImJnByb2Nlc3MudHlwZT09PSJyZW5kZXJlciIsdGhpcy5faXNXZWJXb3JrZXI9dHlwZW9mIHUuZ2xvYmFsLmltcG9ydFNjcmlwdHM9PSJmdW5jdGlvbiIsdGhpcy5faXNFbGVjdHJvbk5vZGVJbnRlZ3JhdGlvbldlYldvcmtlcj10aGlzLl9pc1dlYldvcmtlciYmdHlwZW9mIHByb2Nlc3M8InUiJiZ0eXBlb2YgcHJvY2Vzcy52ZXJzaW9uczwidSImJnR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uPCJ1IiYmcHJvY2Vzcy50eXBlPT09IndvcmtlciIpfXN0YXRpYyBfaXNXaW5kb3dzKCl7cmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3I8InUiJiZuYXZpZ2F0b3IudXNlckFnZW50JiZuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIldpbmRvd3MiKT49MD8hMDp0eXBlb2YgcHJvY2VzczwidSI/cHJvY2Vzcy5wbGF0Zm9ybT09PSJ3aW4zMiI6ITF9fXUuRW52aXJvbm1lbnQ9eX0pKEFNRExvYWRlcnx8KEFNRExvYWRlcj17fSkpO3ZhciBBTURMb2FkZXI7KGZ1bmN0aW9uKHUpe2NsYXNzIHl7Y29uc3RydWN0b3IocixjLGEpe3RoaXMudHlwZT1yLHRoaXMuZGV0YWlsPWMsdGhpcy50aW1lc3RhbXA9YX19dS5Mb2FkZXJFdmVudD15O2NsYXNzIG17Y29uc3RydWN0b3Iocil7dGhpcy5fZXZlbnRzPVtuZXcgeSgxLCIiLHIpXX1yZWNvcmQocixjKXt0aGlzLl9ldmVudHMucHVzaChuZXcgeShyLGMsdS5VdGlsaXRpZXMuZ2V0SGlnaFBlcmZvcm1hbmNlVGltZXN0YW1wKCkpKX1nZXRFdmVudHMoKXtyZXR1cm4gdGhpcy5fZXZlbnRzfX11LkxvYWRlckV2ZW50UmVjb3JkZXI9bTtjbGFzcyBwe3JlY29yZChyLGMpe31nZXRFdmVudHMoKXtyZXR1cm5bXX19cC5JTlNUQU5DRT1uZXcgcCx1Lk51bGxMb2FkZXJFdmVudFJlY29yZGVyPXB9KShBTURMb2FkZXJ8fChBTURMb2FkZXI9e30pKTt2YXIgQU1ETG9hZGVyOyhmdW5jdGlvbih1KXtjbGFzcyB5e3N0YXRpYyBmaWxlVXJpVG9GaWxlUGF0aChwLGgpe2lmKGg9ZGVjb2RlVVJJKGgpLnJlcGxhY2UoLyUyMy9nLCIjIikscCl7aWYoL15maWxlOlwvXC9cLy8udGVzdChoKSlyZXR1cm4gaC5zdWJzdHIoOCk7aWYoL15maWxlOlwvXC8vLnRlc3QoaCkpcmV0dXJuIGguc3Vic3RyKDUpfWVsc2UgaWYoL15maWxlOlwvXC8vLnRlc3QoaCkpcmV0dXJuIGguc3Vic3RyKDcpO3JldHVybiBofXN0YXRpYyBzdGFydHNXaXRoKHAsaCl7cmV0dXJuIHAubGVuZ3RoPj1oLmxlbmd0aCYmcC5zdWJzdHIoMCxoLmxlbmd0aCk9PT1ofXN0YXRpYyBlbmRzV2l0aChwLGgpe3JldHVybiBwLmxlbmd0aD49aC5sZW5ndGgmJnAuc3Vic3RyKHAubGVuZ3RoLWgubGVuZ3RoKT09PWh9c3RhdGljIGNvbnRhaW5zUXVlcnlTdHJpbmcocCl7cmV0dXJuL15bXlwjXSpcPy9naS50ZXN0KHApfXN0YXRpYyBpc0Fic29sdXRlUGF0aChwKXtyZXR1cm4vXigoaHR0cDpcL1wvKXwoaHR0cHM6XC9cLyl8KGZpbGU6XC9cLyl8KFwvKSkvLnRlc3QocCl9c3RhdGljIGZvckVhY2hQcm9wZXJ0eShwLGgpe2lmKHApe2xldCByO2ZvcihyIGluIHApcC5oYXNPd25Qcm9wZXJ0eShyKSYmaChyLHBbcl0pfX1zdGF0aWMgaXNFbXB0eShwKXtsZXQgaD0hMDtyZXR1cm4geS5mb3JFYWNoUHJvcGVydHkocCwoKT0+e2g9ITF9KSxofXN0YXRpYyByZWN1cnNpdmVDbG9uZShwKXtpZighcHx8dHlwZW9mIHAhPSJvYmplY3QifHxwIGluc3RhbmNlb2YgUmVnRXhwfHwhQXJyYXkuaXNBcnJheShwKSYmT2JqZWN0LmdldFByb3RvdHlwZU9mKHApIT09T2JqZWN0LnByb3RvdHlwZSlyZXR1cm4gcDtsZXQgaD1BcnJheS5pc0FycmF5KHApP1tdOnt9O3JldHVybiB5LmZvckVhY2hQcm9wZXJ0eShwLChyLGMpPT57YyYmdHlwZW9mIGM9PSJvYmplY3QiP2hbcl09eS5yZWN1cnNpdmVDbG9uZShjKTpoW3JdPWN9KSxofXN0YXRpYyBnZW5lcmF0ZUFub255bW91c01vZHVsZSgpe3JldHVybiI9PT1hbm9ueW1vdXMiK3kuTkVYVF9BTk9OWU1PVVNfSUQrKysiPT09In1zdGF0aWMgaXNBbm9ueW1vdXNNb2R1bGUocCl7cmV0dXJuIHkuc3RhcnRzV2l0aChwLCI9PT1hbm9ueW1vdXMiKX1zdGF0aWMgZ2V0SGlnaFBlcmZvcm1hbmNlVGltZXN0YW1wKCl7cmV0dXJuIHRoaXMuUEVSRk9STUFOQ0VfTk9XX1BST0JFRHx8KHRoaXMuUEVSRk9STUFOQ0VfTk9XX1BST0JFRD0hMCx0aGlzLkhBU19QRVJGT1JNQU5DRV9OT1c9dS5nbG9iYWwucGVyZm9ybWFuY2UmJnR5cGVvZiB1Lmdsb2JhbC5wZXJmb3JtYW5jZS5ub3c9PSJmdW5jdGlvbiIpLHRoaXMuSEFTX1BFUkZPUk1BTkNFX05PVz91Lmdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKTpEYXRlLm5vdygpfX15Lk5FWFRfQU5PTllNT1VTX0lEPTEseS5QRVJGT1JNQU5DRV9OT1dfUFJPQkVEPSExLHkuSEFTX1BFUkZPUk1BTkNFX05PVz0hMSx1LlV0aWxpdGllcz15fSkoQU1ETG9hZGVyfHwoQU1ETG9hZGVyPXt9KSk7dmFyIEFNRExvYWRlcjsoZnVuY3Rpb24odSl7ZnVuY3Rpb24geShoKXtpZihoIGluc3RhbmNlb2YgRXJyb3IpcmV0dXJuIGg7Y29uc3Qgcj1uZXcgRXJyb3IoaC5tZXNzYWdlfHxTdHJpbmcoaCl8fCJVbmtub3duIEVycm9yIik7cmV0dXJuIGguc3RhY2smJihyLnN0YWNrPWguc3RhY2spLHJ9dS5lbnN1cmVFcnJvcj15O2NsYXNzIG17c3RhdGljIHZhbGlkYXRlQ29uZmlndXJhdGlvbk9wdGlvbnMocil7ZnVuY3Rpb24gYyhhKXtpZihhLnBoYXNlPT09ImxvYWRpbmciKXtjb25zb2xlLmVycm9yKCdMb2FkaW5nICInK2EubW9kdWxlSWQrJyIgZmFpbGVkJyksY29uc29sZS5lcnJvcihhKSxjb25zb2xlLmVycm9yKCJIZXJlIGFyZSB0aGUgbW9kdWxlcyB0aGF0IGRlcGVuZCBvbiBpdDoiKSxjb25zb2xlLmVycm9yKGEubmVlZGVkQnkpO3JldHVybn1pZihhLnBoYXNlPT09ImZhY3RvcnkiKXtjb25zb2xlLmVycm9yKCdUaGUgZmFjdG9yeSBmdW5jdGlvbiBvZiAiJythLm1vZHVsZUlkKyciIGhhcyB0aHJvd24gYW4gZXhjZXB0aW9uJyksY29uc29sZS5lcnJvcihhKSxjb25zb2xlLmVycm9yKCJIZXJlIGFyZSB0aGUgbW9kdWxlcyB0aGF0IGRlcGVuZCBvbiBpdDoiKSxjb25zb2xlLmVycm9yKGEubmVlZGVkQnkpO3JldHVybn19aWYocj1yfHx7fSx0eXBlb2Ygci5iYXNlVXJsIT0ic3RyaW5nIiYmKHIuYmFzZVVybD0iIiksdHlwZW9mIHIuaXNCdWlsZCE9ImJvb2xlYW4iJiYoci5pc0J1aWxkPSExKSx0eXBlb2Ygci5wYXRocyE9Im9iamVjdCImJihyLnBhdGhzPXt9KSx0eXBlb2Ygci5jb25maWchPSJvYmplY3QiJiYoci5jb25maWc9e30pLHR5cGVvZiByLmNhdGNoRXJyb3I+InUiJiYoci5jYXRjaEVycm9yPSExKSx0eXBlb2Ygci5yZWNvcmRTdGF0cz4idSImJihyLnJlY29yZFN0YXRzPSExKSx0eXBlb2Ygci51cmxBcmdzIT0ic3RyaW5nIiYmKHIudXJsQXJncz0iIiksdHlwZW9mIHIub25FcnJvciE9ImZ1bmN0aW9uIiYmKHIub25FcnJvcj1jKSxBcnJheS5pc0FycmF5KHIuaWdub3JlRHVwbGljYXRlTW9kdWxlcyl8fChyLmlnbm9yZUR1cGxpY2F0ZU1vZHVsZXM9W10pLHIuYmFzZVVybC5sZW5ndGg+MCYmKHUuVXRpbGl0aWVzLmVuZHNXaXRoKHIuYmFzZVVybCwiLyIpfHwoci5iYXNlVXJsKz0iLyIpKSx0eXBlb2Ygci5jc3BOb25jZSE9InN0cmluZyImJihyLmNzcE5vbmNlPSIiKSx0eXBlb2Ygci5wcmVmZXJTY3JpcHRUYWdzPiJ1IiYmKHIucHJlZmVyU2NyaXB0VGFncz0hMSksci5ub2RlQ2FjaGVkRGF0YSYmdHlwZW9mIHIubm9kZUNhY2hlZERhdGE9PSJvYmplY3QiJiYodHlwZW9mIHIubm9kZUNhY2hlZERhdGEuc2VlZCE9InN0cmluZyImJihyLm5vZGVDYWNoZWREYXRhLnNlZWQ9InNlZWQiKSwodHlwZW9mIHIubm9kZUNhY2hlZERhdGEud3JpdGVEZWxheSE9Im51bWJlciJ8fHIubm9kZUNhY2hlZERhdGEud3JpdGVEZWxheTwwKSYmKHIubm9kZUNhY2hlZERhdGEud3JpdGVEZWxheT0xZTMqNyksIXIubm9kZUNhY2hlZERhdGEucGF0aHx8dHlwZW9mIHIubm9kZUNhY2hlZERhdGEucGF0aCE9InN0cmluZyIpKXtjb25zdCBhPXkobmV3IEVycm9yKCJJTlZBTElEIGNhY2hlZCBkYXRhIGNvbmZpZ3VyYXRpb24sICdwYXRoJyBNVVNUIGJlIHNldCIpKTthLnBoYXNlPSJjb25maWd1cmF0aW9uIixyLm9uRXJyb3IoYSksci5ub2RlQ2FjaGVkRGF0YT12b2lkIDB9cmV0dXJuIHJ9c3RhdGljIG1lcmdlQ29uZmlndXJhdGlvbk9wdGlvbnMocj1udWxsLGM9bnVsbCl7bGV0IGE9dS5VdGlsaXRpZXMucmVjdXJzaXZlQ2xvbmUoY3x8e30pO3JldHVybiB1LlV0aWxpdGllcy5mb3JFYWNoUHJvcGVydHkociwodCxlKT0+e3Q9PT0iaWdub3JlRHVwbGljYXRlTW9kdWxlcyImJnR5cGVvZiBhLmlnbm9yZUR1cGxpY2F0ZU1vZHVsZXM8InUiP2EuaWdub3JlRHVwbGljYXRlTW9kdWxlcz1hLmlnbm9yZUR1cGxpY2F0ZU1vZHVsZXMuY29uY2F0KGUpOnQ9PT0icGF0aHMiJiZ0eXBlb2YgYS5wYXRoczwidSI/dS5VdGlsaXRpZXMuZm9yRWFjaFByb3BlcnR5KGUsKGkscyk9PmEucGF0aHNbaV09cyk6dD09PSJjb25maWciJiZ0eXBlb2YgYS5jb25maWc8InUiP3UuVXRpbGl0aWVzLmZvckVhY2hQcm9wZXJ0eShlLChpLHMpPT5hLmNvbmZpZ1tpXT1zKTphW3RdPXUuVXRpbGl0aWVzLnJlY3Vyc2l2ZUNsb25lKGUpfSksbS52YWxpZGF0ZUNvbmZpZ3VyYXRpb25PcHRpb25zKGEpfX11LkNvbmZpZ3VyYXRpb25PcHRpb25zVXRpbD1tO2NsYXNzIHB7Y29uc3RydWN0b3IocixjKXtpZih0aGlzLl9lbnY9cix0aGlzLm9wdGlvbnM9bS5tZXJnZUNvbmZpZ3VyYXRpb25PcHRpb25zKGMpLHRoaXMuX2NyZWF0ZUlnbm9yZUR1cGxpY2F0ZU1vZHVsZXNNYXAoKSx0aGlzLl9jcmVhdGVTb3J0ZWRQYXRoc1J1bGVzKCksdGhpcy5vcHRpb25zLmJhc2VVcmw9PT0iIiYmdGhpcy5vcHRpb25zLm5vZGVSZXF1aXJlJiZ0aGlzLm9wdGlvbnMubm9kZVJlcXVpcmUubWFpbiYmdGhpcy5vcHRpb25zLm5vZGVSZXF1aXJlLm1haW4uZmlsZW5hbWUmJnRoaXMuX2Vudi5pc05vZGUpe2xldCBhPXRoaXMub3B0aW9ucy5ub2RlUmVxdWlyZS5tYWluLmZpbGVuYW1lLHQ9TWF0aC5tYXgoYS5sYXN0SW5kZXhPZigiLyIpLGEubGFzdEluZGV4T2YoIlxcIikpO3RoaXMub3B0aW9ucy5iYXNlVXJsPWEuc3Vic3RyaW5nKDAsdCsxKX19X2NyZWF0ZUlnbm9yZUR1cGxpY2F0ZU1vZHVsZXNNYXAoKXt0aGlzLmlnbm9yZUR1cGxpY2F0ZU1vZHVsZXNNYXA9e307Zm9yKGxldCByPTA7cjx0aGlzLm9wdGlvbnMuaWdub3JlRHVwbGljYXRlTW9kdWxlcy5sZW5ndGg7cisrKXRoaXMuaWdub3JlRHVwbGljYXRlTW9kdWxlc01hcFt0aGlzLm9wdGlvbnMuaWdub3JlRHVwbGljYXRlTW9kdWxlc1tyXV09ITB9X2NyZWF0ZVNvcnRlZFBhdGhzUnVsZXMoKXt0aGlzLnNvcnRlZFBhdGhzUnVsZXM9W10sdS5VdGlsaXRpZXMuZm9yRWFjaFByb3BlcnR5KHRoaXMub3B0aW9ucy5wYXRocywocixjKT0+e0FycmF5LmlzQXJyYXkoYyk/dGhpcy5zb3J0ZWRQYXRoc1J1bGVzLnB1c2goe2Zyb206cix0bzpjfSk6dGhpcy5zb3J0ZWRQYXRoc1J1bGVzLnB1c2goe2Zyb206cix0bzpbY119KX0pLHRoaXMuc29ydGVkUGF0aHNSdWxlcy5zb3J0KChyLGMpPT5jLmZyb20ubGVuZ3RoLXIuZnJvbS5sZW5ndGgpfWNsb25lQW5kTWVyZ2Uocil7cmV0dXJuIG5ldyBwKHRoaXMuX2VudixtLm1lcmdlQ29uZmlndXJhdGlvbk9wdGlvbnMocix0aGlzLm9wdGlvbnMpKX1nZXRPcHRpb25zTGl0ZXJhbCgpe3JldHVybiB0aGlzLm9wdGlvbnN9X2FwcGx5UGF0aHMocil7bGV0IGM7Zm9yKGxldCBhPTAsdD10aGlzLnNvcnRlZFBhdGhzUnVsZXMubGVuZ3RoO2E8dDthKyspaWYoYz10aGlzLnNvcnRlZFBhdGhzUnVsZXNbYV0sdS5VdGlsaXRpZXMuc3RhcnRzV2l0aChyLGMuZnJvbSkpe2xldCBlPVtdO2ZvcihsZXQgaT0wLHM9Yy50by5sZW5ndGg7aTxzO2krKyllLnB1c2goYy50b1tpXStyLnN1YnN0cihjLmZyb20ubGVuZ3RoKSk7cmV0dXJuIGV9cmV0dXJuW3JdfV9hZGRVcmxBcmdzVG9Vcmwocil7cmV0dXJuIHUuVXRpbGl0aWVzLmNvbnRhaW5zUXVlcnlTdHJpbmcocik/cisiJiIrdGhpcy5vcHRpb25zLnVybEFyZ3M6cisiPyIrdGhpcy5vcHRpb25zLnVybEFyZ3N9X2FkZFVybEFyZ3NJZk5lY2Vzc2FyeVRvVXJsKHIpe3JldHVybiB0aGlzLm9wdGlvbnMudXJsQXJncz90aGlzLl9hZGRVcmxBcmdzVG9Vcmwocik6cn1fYWRkVXJsQXJnc0lmTmVjZXNzYXJ5VG9VcmxzKHIpe2lmKHRoaXMub3B0aW9ucy51cmxBcmdzKWZvcihsZXQgYz0wLGE9ci5sZW5ndGg7YzxhO2MrKylyW2NdPXRoaXMuX2FkZFVybEFyZ3NUb1VybChyW2NdKTtyZXR1cm4gcn1tb2R1bGVJZFRvUGF0aHMocil7aWYodGhpcy5fZW52LmlzTm9kZSYmdGhpcy5vcHRpb25zLmFtZE1vZHVsZXNQYXR0ZXJuIGluc3RhbmNlb2YgUmVnRXhwJiYhdGhpcy5vcHRpb25zLmFtZE1vZHVsZXNQYXR0ZXJuLnRlc3QocikpcmV0dXJuIHRoaXMuaXNCdWlsZCgpP1siZW1wdHk6Il06WyJub2RlfCIrcl07bGV0IGM9cixhO2lmKCF1LlV0aWxpdGllcy5lbmRzV2l0aChjLCIuanMiKSYmIXUuVXRpbGl0aWVzLmlzQWJzb2x1dGVQYXRoKGMpKXthPXRoaXMuX2FwcGx5UGF0aHMoYyk7Zm9yKGxldCB0PTAsZT1hLmxlbmd0aDt0PGU7dCsrKXRoaXMuaXNCdWlsZCgpJiZhW3RdPT09ImVtcHR5OiJ8fCh1LlV0aWxpdGllcy5pc0Fic29sdXRlUGF0aChhW3RdKXx8KGFbdF09dGhpcy5vcHRpb25zLmJhc2VVcmwrYVt0XSksIXUuVXRpbGl0aWVzLmVuZHNXaXRoKGFbdF0sIi5qcyIpJiYhdS5VdGlsaXRpZXMuY29udGFpbnNRdWVyeVN0cmluZyhhW3RdKSYmKGFbdF09YVt0XSsiLmpzIikpfWVsc2UhdS5VdGlsaXRpZXMuZW5kc1dpdGgoYywiLmpzIikmJiF1LlV0aWxpdGllcy5jb250YWluc1F1ZXJ5U3RyaW5nKGMpJiYoYz1jKyIuanMiKSxhPVtjXTtyZXR1cm4gdGhpcy5fYWRkVXJsQXJnc0lmTmVjZXNzYXJ5VG9VcmxzKGEpfXJlcXVpcmVUb1VybChyKXtsZXQgYz1yO3JldHVybiB1LlV0aWxpdGllcy5pc0Fic29sdXRlUGF0aChjKXx8KGM9dGhpcy5fYXBwbHlQYXRocyhjKVswXSx1LlV0aWxpdGllcy5pc0Fic29sdXRlUGF0aChjKXx8KGM9dGhpcy5vcHRpb25zLmJhc2VVcmwrYykpLHRoaXMuX2FkZFVybEFyZ3NJZk5lY2Vzc2FyeVRvVXJsKGMpfWlzQnVpbGQoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmlzQnVpbGR9c2hvdWxkSW52b2tlRmFjdG9yeShyKXtyZXR1cm4hISghdGhpcy5vcHRpb25zLmlzQnVpbGR8fHUuVXRpbGl0aWVzLmlzQW5vbnltb3VzTW9kdWxlKHIpfHx0aGlzLm9wdGlvbnMuYnVpbGRGb3JjZUludm9rZUZhY3RvcnkmJnRoaXMub3B0aW9ucy5idWlsZEZvcmNlSW52b2tlRmFjdG9yeVtyXSl9aXNEdXBsaWNhdGVNZXNzYWdlSWdub3JlZEZvcihyKXtyZXR1cm4gdGhpcy5pZ25vcmVEdXBsaWNhdGVNb2R1bGVzTWFwLmhhc093blByb3BlcnR5KHIpfWdldENvbmZpZ0Zvck1vZHVsZShyKXtpZih0aGlzLm9wdGlvbnMuY29uZmlnKXJldHVybiB0aGlzLm9wdGlvbnMuY29uZmlnW3JdfXNob3VsZENhdGNoRXJyb3IoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmNhdGNoRXJyb3J9c2hvdWxkUmVjb3JkU3RhdHMoKXtyZXR1cm4gdGhpcy5vcHRpb25zLnJlY29yZFN0YXRzfW9uRXJyb3Iocil7dGhpcy5vcHRpb25zLm9uRXJyb3Iocil9fXUuQ29uZmlndXJhdGlvbj1wfSkoQU1ETG9hZGVyfHwoQU1ETG9hZGVyPXt9KSk7dmFyIEFNRExvYWRlcjsoZnVuY3Rpb24odSl7Y2xhc3MgeXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9lbnY9ZSx0aGlzLl9zY3JpcHRMb2FkZXI9bnVsbCx0aGlzLl9jYWxsYmFja01hcD17fX1sb2FkKGUsaSxzLG4pe2lmKCF0aGlzLl9zY3JpcHRMb2FkZXIpaWYodGhpcy5fZW52LmlzV2ViV29ya2VyKXRoaXMuX3NjcmlwdExvYWRlcj1uZXcgaDtlbHNlIGlmKHRoaXMuX2Vudi5pc0VsZWN0cm9uUmVuZGVyZXIpe2NvbnN0e3ByZWZlclNjcmlwdFRhZ3M6ZH09ZS5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpO2Q/dGhpcy5fc2NyaXB0TG9hZGVyPW5ldyBtOnRoaXMuX3NjcmlwdExvYWRlcj1uZXcgcih0aGlzLl9lbnYpfWVsc2UgdGhpcy5fZW52LmlzTm9kZT90aGlzLl9zY3JpcHRMb2FkZXI9bmV3IHIodGhpcy5fZW52KTp0aGlzLl9zY3JpcHRMb2FkZXI9bmV3IG07bGV0IGw9e2NhbGxiYWNrOnMsZXJyb3JiYWNrOm59O2lmKHRoaXMuX2NhbGxiYWNrTWFwLmhhc093blByb3BlcnR5KGkpKXt0aGlzLl9jYWxsYmFja01hcFtpXS5wdXNoKGwpO3JldHVybn10aGlzLl9jYWxsYmFja01hcFtpXT1bbF0sdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQoZSxpLCgpPT50aGlzLnRyaWdnZXJDYWxsYmFjayhpKSxkPT50aGlzLnRyaWdnZXJFcnJvcmJhY2soaSxkKSl9dHJpZ2dlckNhbGxiYWNrKGUpe2xldCBpPXRoaXMuX2NhbGxiYWNrTWFwW2VdO2RlbGV0ZSB0aGlzLl9jYWxsYmFja01hcFtlXTtmb3IobGV0IHM9MDtzPGkubGVuZ3RoO3MrKylpW3NdLmNhbGxiYWNrKCl9dHJpZ2dlckVycm9yYmFjayhlLGkpe2xldCBzPXRoaXMuX2NhbGxiYWNrTWFwW2VdO2RlbGV0ZSB0aGlzLl9jYWxsYmFja01hcFtlXTtmb3IobGV0IG49MDtuPHMubGVuZ3RoO24rKylzW25dLmVycm9yYmFjayhpKX19Y2xhc3MgbXthdHRhY2hMaXN0ZW5lcnMoZSxpLHMpe2xldCBuPSgpPT57ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixsKSxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIixkKX0sbD1vPT57bigpLGkoKX0sZD1vPT57bigpLHMobyl9O2UuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsbCksZS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsZCl9bG9hZChlLGkscyxuKXtpZigvXm5vZGVcfC8udGVzdChpKSl7bGV0IGw9ZS5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpLGQ9YyhlLmdldFJlY29yZGVyKCksbC5ub2RlUmVxdWlyZXx8dS5nbG9iYWwubm9kZVJlcXVpcmUpLG89aS5zcGxpdCgifCIpLF89bnVsbDt0cnl7Xz1kKG9bMV0pfWNhdGNoKGYpe24oZik7cmV0dXJufWUuZW5xdWV1ZURlZmluZUFub255bW91c01vZHVsZShbXSwoKT0+XykscygpfWVsc2V7bGV0IGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7bC5zZXRBdHRyaWJ1dGUoImFzeW5jIiwiYXN5bmMiKSxsLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpLHRoaXMuYXR0YWNoTGlzdGVuZXJzKGwscyxuKTtjb25zdHt0cnVzdGVkVHlwZXNQb2xpY3k6ZH09ZS5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpO2QmJihpPWQuY3JlYXRlU2NyaXB0VVJMKGkpKSxsLnNldEF0dHJpYnV0ZSgic3JjIixpKTtjb25zdHtjc3BOb25jZTpvfT1lLmdldENvbmZpZygpLmdldE9wdGlvbnNMaXRlcmFsKCk7byYmbC5zZXRBdHRyaWJ1dGUoIm5vbmNlIixvKSxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGwpfX19ZnVuY3Rpb24gcCh0KXtjb25zdHt0cnVzdGVkVHlwZXNQb2xpY3k6ZX09dC5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpO3RyeXtyZXR1cm4oZT9zZWxmLmV2YWwoZS5jcmVhdGVTY3JpcHQoIiIsInRydWUiKSk6bmV3IEZ1bmN0aW9uKCJ0cnVlIikpLmNhbGwoc2VsZiksITB9Y2F0Y2h7cmV0dXJuITF9fWNsYXNzIGh7Y29uc3RydWN0b3IoKXt0aGlzLl9jYWNoZWRDYW5Vc2VFdmFsPW51bGx9X2NhblVzZUV2YWwoZSl7cmV0dXJuIHRoaXMuX2NhY2hlZENhblVzZUV2YWw9PT1udWxsJiYodGhpcy5fY2FjaGVkQ2FuVXNlRXZhbD1wKGUpKSx0aGlzLl9jYWNoZWRDYW5Vc2VFdmFsfWxvYWQoZSxpLHMsbil7aWYoL15ub2RlXHwvLnRlc3QoaSkpe2NvbnN0IGw9ZS5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpLGQ9YyhlLmdldFJlY29yZGVyKCksbC5ub2RlUmVxdWlyZXx8dS5nbG9iYWwubm9kZVJlcXVpcmUpLG89aS5zcGxpdCgifCIpO2xldCBfPW51bGw7dHJ5e189ZChvWzFdKX1jYXRjaChmKXtuKGYpO3JldHVybn1lLmVucXVldWVEZWZpbmVBbm9ueW1vdXNNb2R1bGUoW10sZnVuY3Rpb24oKXtyZXR1cm4gX30pLHMoKX1lbHNle2NvbnN0e3RydXN0ZWRUeXBlc1BvbGljeTpsfT1lLmdldENvbmZpZygpLmdldE9wdGlvbnNMaXRlcmFsKCk7aWYoISgvXigoaHR0cDopfChodHRwczopfChmaWxlOikpLy50ZXN0KGkpJiZpLnN1YnN0cmluZygwLHNlbGYub3JpZ2luLmxlbmd0aCkhPT1zZWxmLm9yaWdpbikmJnRoaXMuX2NhblVzZUV2YWwoZSkpe2ZldGNoKGkpLnRoZW4obz0+e2lmKG8uc3RhdHVzIT09MjAwKXRocm93IG5ldyBFcnJvcihvLnN0YXR1c1RleHQpO3JldHVybiBvLnRleHQoKX0pLnRoZW4obz0+e289YCR7b30KLy8jIHNvdXJjZVVSTD0ke2l9YCwobD9zZWxmLmV2YWwobC5jcmVhdGVTY3JpcHQoIiIsbykpOm5ldyBGdW5jdGlvbihvKSkuY2FsbChzZWxmKSxzKCl9KS50aGVuKHZvaWQgMCxuKTtyZXR1cm59dHJ5e2wmJihpPWwuY3JlYXRlU2NyaXB0VVJMKGkpKSxpbXBvcnRTY3JpcHRzKGkpLHMoKX1jYXRjaChvKXtuKG8pfX19fWNsYXNzIHJ7Y29uc3RydWN0b3IoZSl7dGhpcy5fZW52PWUsdGhpcy5fZGlkSW5pdGlhbGl6ZT0hMSx0aGlzLl9kaWRQYXRjaE5vZGVSZXF1aXJlPSExfV9pbml0KGUpe3RoaXMuX2RpZEluaXRpYWxpemV8fCh0aGlzLl9kaWRJbml0aWFsaXplPSEwLHRoaXMuX2ZzPWUoImZzIiksdGhpcy5fdm09ZSgidm0iKSx0aGlzLl9wYXRoPWUoInBhdGgiKSx0aGlzLl9jcnlwdG89ZSgiY3J5cHRvIikpfV9pbml0Tm9kZVJlcXVpcmUoZSxpKXtjb25zdHtub2RlQ2FjaGVkRGF0YTpzfT1pLmdldENvbmZpZygpLmdldE9wdGlvbnNMaXRlcmFsKCk7aWYoIXN8fHRoaXMuX2RpZFBhdGNoTm9kZVJlcXVpcmUpcmV0dXJuO3RoaXMuX2RpZFBhdGNoTm9kZVJlcXVpcmU9ITA7Y29uc3Qgbj10aGlzLGw9ZSgibW9kdWxlIik7ZnVuY3Rpb24gZChvKXtjb25zdCBfPW8uY29uc3RydWN0b3I7bGV0IGY9ZnVuY3Rpb24odil7dHJ5e3JldHVybiBvLnJlcXVpcmUodil9ZmluYWxseXt9fTtyZXR1cm4gZi5yZXNvbHZlPWZ1bmN0aW9uKHYsRSl7cmV0dXJuIF8uX3Jlc29sdmVGaWxlbmFtZSh2LG8sITEsRSl9LGYucmVzb2x2ZS5wYXRocz1mdW5jdGlvbih2KXtyZXR1cm4gXy5fcmVzb2x2ZUxvb2t1cFBhdGhzKHYsbyl9LGYubWFpbj1wcm9jZXNzLm1haW5Nb2R1bGUsZi5leHRlbnNpb25zPV8uX2V4dGVuc2lvbnMsZi5jYWNoZT1fLl9jYWNoZSxmfWwucHJvdG90eXBlLl9jb21waWxlPWZ1bmN0aW9uKG8sXyl7Y29uc3QgZj1sLndyYXAoby5yZXBsYWNlKC9eIyEuKi8sIiIpKSxnPWkuZ2V0UmVjb3JkZXIoKSx2PW4uX2dldENhY2hlZERhdGFQYXRoKHMsXyksRT17ZmlsZW5hbWU6X307bGV0IEk7dHJ5e2NvbnN0IEQ9bi5fZnMucmVhZEZpbGVTeW5jKHYpO0k9RC5zbGljZSgwLDE2KSxFLmNhY2hlZERhdGE9RC5zbGljZSgxNiksZy5yZWNvcmQoNjAsdil9Y2F0Y2h7Zy5yZWNvcmQoNjEsdil9Y29uc3QgQz1uZXcgbi5fdm0uU2NyaXB0KGYsRSksUD1DLnJ1bkluVGhpc0NvbnRleHQoRSksdz1uLl9wYXRoLmRpcm5hbWUoXyksUj1kKHRoaXMpLFU9W3RoaXMuZXhwb3J0cyxSLHRoaXMsXyx3LHByb2Nlc3MsX2NvbW1vbmpzR2xvYmFsLEJ1ZmZlcl0sYj1QLmFwcGx5KHRoaXMuZXhwb3J0cyxVKTtyZXR1cm4gbi5faGFuZGxlQ2FjaGVkRGF0YShDLGYsdiwhRS5jYWNoZWREYXRhLGkpLG4uX3ZlcmlmeUNhY2hlZERhdGEoQyxmLHYsSSxpKSxifX1sb2FkKGUsaSxzLG4pe2NvbnN0IGw9ZS5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpLGQ9YyhlLmdldFJlY29yZGVyKCksbC5ub2RlUmVxdWlyZXx8dS5nbG9iYWwubm9kZVJlcXVpcmUpLG89bC5ub2RlSW5zdHJ1bWVudGVyfHxmdW5jdGlvbihmKXtyZXR1cm4gZn07dGhpcy5faW5pdChkKSx0aGlzLl9pbml0Tm9kZVJlcXVpcmUoZCxlKTtsZXQgXz1lLmdldFJlY29yZGVyKCk7aWYoL15ub2RlXHwvLnRlc3QoaSkpe2xldCBmPWkuc3BsaXQoInwiKSxnPW51bGw7dHJ5e2c9ZChmWzFdKX1jYXRjaCh2KXtuKHYpO3JldHVybn1lLmVucXVldWVEZWZpbmVBbm9ueW1vdXNNb2R1bGUoW10sKCk9PmcpLHMoKX1lbHNle2k9dS5VdGlsaXRpZXMuZmlsZVVyaVRvRmlsZVBhdGgodGhpcy5fZW52LmlzV2luZG93cyxpKTtjb25zdCBmPXRoaXMuX3BhdGgubm9ybWFsaXplKGkpLGc9dGhpcy5fZ2V0RWxlY3Ryb25SZW5kZXJlclNjcmlwdFBhdGhPclVyaShmKSx2PSEhbC5ub2RlQ2FjaGVkRGF0YSxFPXY/dGhpcy5fZ2V0Q2FjaGVkRGF0YVBhdGgobC5ub2RlQ2FjaGVkRGF0YSxpKTp2b2lkIDA7dGhpcy5fcmVhZFNvdXJjZUFuZENhY2hlZERhdGEoZixFLF8sKEksQyxQLHcpPT57aWYoSSl7bihJKTtyZXR1cm59bGV0IFI7Qy5jaGFyQ29kZUF0KDApPT09ci5fQk9NP1I9ci5fUFJFRklYK0Muc3Vic3RyaW5nKDEpK3IuX1NVRkZJWDpSPXIuX1BSRUZJWCtDK3IuX1NVRkZJWCxSPW8oUixmKTtjb25zdCBVPXtmaWxlbmFtZTpnLGNhY2hlZERhdGE6UH0sYj10aGlzLl9jcmVhdGVBbmRFdmFsU2NyaXB0KGUsUixVLHMsbik7dGhpcy5faGFuZGxlQ2FjaGVkRGF0YShiLFIsRSx2JiYhUCxlKSx0aGlzLl92ZXJpZnlDYWNoZWREYXRhKGIsUixFLHcsZSl9KX19X2NyZWF0ZUFuZEV2YWxTY3JpcHQoZSxpLHMsbixsKXtjb25zdCBkPWUuZ2V0UmVjb3JkZXIoKTtkLnJlY29yZCgzMSxzLmZpbGVuYW1lKTtjb25zdCBvPW5ldyB0aGlzLl92bS5TY3JpcHQoaSxzKSxfPW8ucnVuSW5UaGlzQ29udGV4dChzKSxmPWUuZ2V0R2xvYmFsQU1ERGVmaW5lRnVuYygpO2xldCBnPSExO2NvbnN0IHY9ZnVuY3Rpb24oKXtyZXR1cm4gZz0hMCxmLmFwcGx5KG51bGwsYXJndW1lbnRzKX07cmV0dXJuIHYuYW1kPWYuYW1kLF8uY2FsbCh1Lmdsb2JhbCxlLmdldEdsb2JhbEFNRFJlcXVpcmVGdW5jKCksdixzLmZpbGVuYW1lLHRoaXMuX3BhdGguZGlybmFtZShzLmZpbGVuYW1lKSksZC5yZWNvcmQoMzIscy5maWxlbmFtZSksZz9uKCk6bChuZXcgRXJyb3IoYERpZG4ndCByZWNlaXZlIGRlZmluZSBjYWxsIGluICR7cy5maWxlbmFtZX0hYCkpLG99X2dldEVsZWN0cm9uUmVuZGVyZXJTY3JpcHRQYXRoT3JVcmkoZSl7aWYoIXRoaXMuX2Vudi5pc0VsZWN0cm9uUmVuZGVyZXIpcmV0dXJuIGU7bGV0IGk9ZS5tYXRjaCgvXihbYS16XSlcOiguKikvaSk7cmV0dXJuIGk/YGZpbGU6Ly8vJHsoaVsxXS50b1VwcGVyQ2FzZSgpKyI6IitpWzJdKS5yZXBsYWNlKC9cXC9nLCIvIil9YDpgZmlsZTovLyR7ZX1gfV9nZXRDYWNoZWREYXRhUGF0aChlLGkpe2NvbnN0IHM9dGhpcy5fY3J5cHRvLmNyZWF0ZUhhc2goIm1kNSIpLnVwZGF0ZShpLCJ1dGY4IikudXBkYXRlKGUuc2VlZCwidXRmOCIpLnVwZGF0ZShwcm9jZXNzLmFyY2gsIiIpLmRpZ2VzdCgiaGV4Iiksbj10aGlzLl9wYXRoLmJhc2VuYW1lKGkpLnJlcGxhY2UoL1wuanMkLywiIik7cmV0dXJuIHRoaXMuX3BhdGguam9pbihlLnBhdGgsYCR7bn0tJHtzfS5jb2RlYCl9X2hhbmRsZUNhY2hlZERhdGEoZSxpLHMsbixsKXtlLmNhY2hlZERhdGFSZWplY3RlZD90aGlzLl9mcy51bmxpbmsocyxkPT57bC5nZXRSZWNvcmRlcigpLnJlY29yZCg2MixzKSx0aGlzLl9jcmVhdGVBbmRXcml0ZUNhY2hlZERhdGEoZSxpLHMsbCksZCYmbC5nZXRDb25maWcoKS5vbkVycm9yKGQpfSk6biYmdGhpcy5fY3JlYXRlQW5kV3JpdGVDYWNoZWREYXRhKGUsaSxzLGwpfV9jcmVhdGVBbmRXcml0ZUNhY2hlZERhdGEoZSxpLHMsbil7bGV0IGw9TWF0aC5jZWlsKG4uZ2V0Q29uZmlnKCkuZ2V0T3B0aW9uc0xpdGVyYWwoKS5ub2RlQ2FjaGVkRGF0YS53cml0ZURlbGF5KigxK01hdGgucmFuZG9tKCkpKSxkPS0xLG89MCxfO2NvbnN0IGY9KCk9PntzZXRUaW1lb3V0KCgpPT57X3x8KF89dGhpcy5fY3J5cHRvLmNyZWF0ZUhhc2goIm1kNSIpLnVwZGF0ZShpLCJ1dGY4IikuZGlnZXN0KCkpO2NvbnN0IGc9ZS5jcmVhdGVDYWNoZWREYXRhKCk7aWYoIShnLmxlbmd0aD09PTB8fGcubGVuZ3RoPT09ZHx8bz49NSkpe2lmKGcubGVuZ3RoPGQpe2YoKTtyZXR1cm59ZD1nLmxlbmd0aCx0aGlzLl9mcy53cml0ZUZpbGUocyxCdWZmZXIuY29uY2F0KFtfLGddKSx2PT57diYmbi5nZXRDb25maWcoKS5vbkVycm9yKHYpLG4uZ2V0UmVjb3JkZXIoKS5yZWNvcmQoNjMscyksZigpfSl9fSxsKk1hdGgucG93KDQsbysrKSl9O2YoKX1fcmVhZFNvdXJjZUFuZENhY2hlZERhdGEoZSxpLHMsbil7aWYoIWkpdGhpcy5fZnMucmVhZEZpbGUoZSx7ZW5jb2Rpbmc6InV0ZjgifSxuKTtlbHNle2xldCBsLGQsbyxfPTI7Y29uc3QgZj1nPT57Zz9uKGcpOi0tXz09PTAmJm4odm9pZCAwLGwsZCxvKX07dGhpcy5fZnMucmVhZEZpbGUoZSx7ZW5jb2Rpbmc6InV0ZjgifSwoZyx2KT0+e2w9dixmKGcpfSksdGhpcy5fZnMucmVhZEZpbGUoaSwoZyx2KT0+eyFnJiZ2JiZ2Lmxlbmd0aD4wPyhvPXYuc2xpY2UoMCwxNiksZD12LnNsaWNlKDE2KSxzLnJlY29yZCg2MCxpKSk6cy5yZWNvcmQoNjEsaSksZigpfSl9fV92ZXJpZnlDYWNoZWREYXRhKGUsaSxzLG4sbCl7biYmKGUuY2FjaGVkRGF0YVJlamVjdGVkfHxzZXRUaW1lb3V0KCgpPT57Y29uc3QgZD10aGlzLl9jcnlwdG8uY3JlYXRlSGFzaCgibWQ1IikudXBkYXRlKGksInV0ZjgiKS5kaWdlc3QoKTtuLmVxdWFscyhkKXx8KGwuZ2V0Q29uZmlnKCkub25FcnJvcihuZXcgRXJyb3IoYEZBSUxFRCBUTyBWRVJJRlkgQ0FDSEVEIERBVEEsIGRlbGV0aW5nIHN0YWxlICcke3N9JyBub3csIGJ1dCBhIFJFU1RBUlQgSVMgUkVRVUlSRURgKSksdGhpcy5fZnMudW5saW5rKHMsbz0+e28mJmwuZ2V0Q29uZmlnKCkub25FcnJvcihvKX0pKX0sTWF0aC5jZWlsKDVlMyooMStNYXRoLnJhbmRvbSgpKSkpKX19ci5fQk9NPTY1Mjc5LHIuX1BSRUZJWD0iKGZ1bmN0aW9uIChyZXF1aXJlLCBkZWZpbmUsIF9fZmlsZW5hbWUsIF9fZGlybmFtZSkgeyAiLHIuX1NVRkZJWD1gCn0pO2A7ZnVuY3Rpb24gYyh0LGUpe2lmKGUuX18kX19pc1JlY29yZGVkKXJldHVybiBlO2NvbnN0IGk9ZnVuY3Rpb24obil7dC5yZWNvcmQoMzMsbik7dHJ5e3JldHVybiBlKG4pfWZpbmFsbHl7dC5yZWNvcmQoMzQsbil9fTtyZXR1cm4gaS5fXyRfX2lzUmVjb3JkZWQ9ITAsaX11LmVuc3VyZVJlY29yZGVkTm9kZVJlcXVpcmU9YztmdW5jdGlvbiBhKHQpe3JldHVybiBuZXcgeSh0KX11LmNyZWF0ZVNjcmlwdExvYWRlcj1hfSkoQU1ETG9hZGVyfHwoQU1ETG9hZGVyPXt9KSk7dmFyIEFNRExvYWRlcjsoZnVuY3Rpb24odSl7Y2xhc3MgeXtjb25zdHJ1Y3Rvcih0KXtsZXQgZT10Lmxhc3RJbmRleE9mKCIvIik7ZSE9PS0xP3RoaXMuZnJvbU1vZHVsZVBhdGg9dC5zdWJzdHIoMCxlKzEpOnRoaXMuZnJvbU1vZHVsZVBhdGg9IiJ9c3RhdGljIF9ub3JtYWxpemVNb2R1bGVJZCh0KXtsZXQgZT10LGk7Zm9yKGk9L1wvXC5cLy87aS50ZXN0KGUpOyllPWUucmVwbGFjZShpLCIvIik7Zm9yKGU9ZS5yZXBsYWNlKC9eXC5cLy9nLCIiKSxpPS9cLygoW15cL10pfChbXlwvXVteXC9cLl0pfChbXlwvXC5dW15cL10pfChbXlwvXVteXC9dW15cL10rKSlcL1wuXC5cLy87aS50ZXN0KGUpOyllPWUucmVwbGFjZShpLCIvIik7cmV0dXJuIGU9ZS5yZXBsYWNlKC9eKChbXlwvXSl8KFteXC9dW15cL1wuXSl8KFteXC9cLl1bXlwvXSl8KFteXC9dW15cL11bXlwvXSspKVwvXC5cLlwvLywiIiksZX1yZXNvbHZlTW9kdWxlKHQpe2xldCBlPXQ7cmV0dXJuIHUuVXRpbGl0aWVzLmlzQWJzb2x1dGVQYXRoKGUpfHwodS5VdGlsaXRpZXMuc3RhcnRzV2l0aChlLCIuLyIpfHx1LlV0aWxpdGllcy5zdGFydHNXaXRoKGUsIi4uLyIpKSYmKGU9eS5fbm9ybWFsaXplTW9kdWxlSWQodGhpcy5mcm9tTW9kdWxlUGF0aCtlKSksZX19eS5ST09UPW5ldyB5KCIiKSx1Lk1vZHVsZUlkUmVzb2x2ZXI9eTtjbGFzcyBte2NvbnN0cnVjdG9yKHQsZSxpLHMsbixsKXt0aGlzLmlkPXQsdGhpcy5zdHJJZD1lLHRoaXMuZGVwZW5kZW5jaWVzPWksdGhpcy5fY2FsbGJhY2s9cyx0aGlzLl9lcnJvcmJhY2s9bix0aGlzLm1vZHVsZUlkUmVzb2x2ZXI9bCx0aGlzLmV4cG9ydHM9e30sdGhpcy5lcnJvcj1udWxsLHRoaXMuZXhwb3J0c1Bhc3NlZEluPSExLHRoaXMudW5yZXNvbHZlZERlcGVuZGVuY2llc0NvdW50PXRoaXMuZGVwZW5kZW5jaWVzLmxlbmd0aCx0aGlzLl9pc0NvbXBsZXRlPSExfXN0YXRpYyBfc2FmZUludm9rZUZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybntyZXR1cm5lZFZhbHVlOnQuYXBwbHkodS5nbG9iYWwsZSkscHJvZHVjZWRFcnJvcjpudWxsfX1jYXRjaChpKXtyZXR1cm57cmV0dXJuZWRWYWx1ZTpudWxsLHByb2R1Y2VkRXJyb3I6aX19fXN0YXRpYyBfaW52b2tlRmFjdG9yeSh0LGUsaSxzKXtyZXR1cm4gdC5zaG91bGRJbnZva2VGYWN0b3J5KGUpP3Quc2hvdWxkQ2F0Y2hFcnJvcigpP3RoaXMuX3NhZmVJbnZva2VGdW5jdGlvbihpLHMpOntyZXR1cm5lZFZhbHVlOmkuYXBwbHkodS5nbG9iYWwscykscHJvZHVjZWRFcnJvcjpudWxsfTp7cmV0dXJuZWRWYWx1ZTpudWxsLHByb2R1Y2VkRXJyb3I6bnVsbH19Y29tcGxldGUodCxlLGkscyl7dGhpcy5faXNDb21wbGV0ZT0hMDtsZXQgbj1udWxsO2lmKHRoaXMuX2NhbGxiYWNrKWlmKHR5cGVvZiB0aGlzLl9jYWxsYmFjaz09ImZ1bmN0aW9uIil7dC5yZWNvcmQoMjEsdGhpcy5zdHJJZCk7bGV0IGw9bS5faW52b2tlRmFjdG9yeShlLHRoaXMuc3RySWQsdGhpcy5fY2FsbGJhY2ssaSk7bj1sLnByb2R1Y2VkRXJyb3IsdC5yZWNvcmQoMjIsdGhpcy5zdHJJZCksIW4mJnR5cGVvZiBsLnJldHVybmVkVmFsdWU8InUiJiYoIXRoaXMuZXhwb3J0c1Bhc3NlZElufHx1LlV0aWxpdGllcy5pc0VtcHR5KHRoaXMuZXhwb3J0cykpJiYodGhpcy5leHBvcnRzPWwucmV0dXJuZWRWYWx1ZSl9ZWxzZSB0aGlzLmV4cG9ydHM9dGhpcy5fY2FsbGJhY2s7aWYobil7bGV0IGw9dS5lbnN1cmVFcnJvcihuKTtsLnBoYXNlPSJmYWN0b3J5IixsLm1vZHVsZUlkPXRoaXMuc3RySWQsbC5uZWVkZWRCeT1zKHRoaXMuaWQpLHRoaXMuZXJyb3I9bCxlLm9uRXJyb3IobCl9dGhpcy5kZXBlbmRlbmNpZXM9bnVsbCx0aGlzLl9jYWxsYmFjaz1udWxsLHRoaXMuX2Vycm9yYmFjaz1udWxsLHRoaXMubW9kdWxlSWRSZXNvbHZlcj1udWxsfW9uRGVwZW5kZW5jeUVycm9yKHQpe3JldHVybiB0aGlzLl9pc0NvbXBsZXRlPSEwLHRoaXMuZXJyb3I9dCx0aGlzLl9lcnJvcmJhY2s/KHRoaXMuX2Vycm9yYmFjayh0KSwhMCk6ITF9aXNDb21wbGV0ZSgpe3JldHVybiB0aGlzLl9pc0NvbXBsZXRlfX11Lk1vZHVsZT1tO2NsYXNzIHB7Y29uc3RydWN0b3IoKXt0aGlzLl9uZXh0SWQ9MCx0aGlzLl9zdHJNb2R1bGVJZFRvSW50TW9kdWxlSWQ9bmV3IE1hcCx0aGlzLl9pbnRNb2R1bGVJZFRvU3RyTW9kdWxlSWQ9W10sdGhpcy5nZXRNb2R1bGVJZCgiZXhwb3J0cyIpLHRoaXMuZ2V0TW9kdWxlSWQoIm1vZHVsZSIpLHRoaXMuZ2V0TW9kdWxlSWQoInJlcXVpcmUiKX1nZXRNYXhNb2R1bGVJZCgpe3JldHVybiB0aGlzLl9uZXh0SWR9Z2V0TW9kdWxlSWQodCl7bGV0IGU9dGhpcy5fc3RyTW9kdWxlSWRUb0ludE1vZHVsZUlkLmdldCh0KTtyZXR1cm4gdHlwZW9mIGU+InUiJiYoZT10aGlzLl9uZXh0SWQrKyx0aGlzLl9zdHJNb2R1bGVJZFRvSW50TW9kdWxlSWQuc2V0KHQsZSksdGhpcy5faW50TW9kdWxlSWRUb1N0ck1vZHVsZUlkW2VdPXQpLGV9Z2V0U3RyTW9kdWxlSWQodCl7cmV0dXJuIHRoaXMuX2ludE1vZHVsZUlkVG9TdHJNb2R1bGVJZFt0XX19Y2xhc3MgaHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmlkPXR9fWguRVhQT1JUUz1uZXcgaCgwKSxoLk1PRFVMRT1uZXcgaCgxKSxoLlJFUVVJUkU9bmV3IGgoMiksdS5SZWd1bGFyRGVwZW5kZW5jeT1oO2NsYXNzIHJ7Y29uc3RydWN0b3IodCxlLGkpe3RoaXMuaWQ9dCx0aGlzLnBsdWdpbklkPWUsdGhpcy5wbHVnaW5QYXJhbT1pfX11LlBsdWdpbkRlcGVuZGVuY3k9cjtjbGFzcyBje2NvbnN0cnVjdG9yKHQsZSxpLHMsbj0wKXt0aGlzLl9lbnY9dCx0aGlzLl9zY3JpcHRMb2FkZXI9ZSx0aGlzLl9sb2FkZXJBdmFpbGFibGVUaW1lc3RhbXA9bix0aGlzLl9kZWZpbmVGdW5jPWksdGhpcy5fcmVxdWlyZUZ1bmM9cyx0aGlzLl9tb2R1bGVJZFByb3ZpZGVyPW5ldyBwLHRoaXMuX2NvbmZpZz1uZXcgdS5Db25maWd1cmF0aW9uKHRoaXMuX2VudiksdGhpcy5faGFzRGVwZW5kZW5jeUN5Y2xlPSExLHRoaXMuX21vZHVsZXMyPVtdLHRoaXMuX2tub3duTW9kdWxlczI9W10sdGhpcy5faW52ZXJzZURlcGVuZGVuY2llczI9W10sdGhpcy5faW52ZXJzZVBsdWdpbkRlcGVuZGVuY2llczI9bmV3IE1hcCx0aGlzLl9jdXJyZW50QW5vbnltb3VzRGVmaW5lQ2FsbD1udWxsLHRoaXMuX3JlY29yZGVyPW51bGwsdGhpcy5fYnVpbGRJbmZvUGF0aD1bXSx0aGlzLl9idWlsZEluZm9EZWZpbmVTdGFjaz1bXSx0aGlzLl9idWlsZEluZm9EZXBlbmRlbmNpZXM9W10sdGhpcy5fcmVxdWlyZUZ1bmMubW9kdWxlTWFuYWdlcj10aGlzfXJlc2V0KCl7cmV0dXJuIG5ldyBjKHRoaXMuX2Vudix0aGlzLl9zY3JpcHRMb2FkZXIsdGhpcy5fZGVmaW5lRnVuYyx0aGlzLl9yZXF1aXJlRnVuYyx0aGlzLl9sb2FkZXJBdmFpbGFibGVUaW1lc3RhbXApfWdldEdsb2JhbEFNRERlZmluZUZ1bmMoKXtyZXR1cm4gdGhpcy5fZGVmaW5lRnVuY31nZXRHbG9iYWxBTURSZXF1aXJlRnVuYygpe3JldHVybiB0aGlzLl9yZXF1aXJlRnVuY31zdGF0aWMgX2ZpbmRSZWxldmFudExvY2F0aW9uSW5TdGFjayh0LGUpe2xldCBpPWw9PmwucmVwbGFjZSgvXFwvZywiLyIpLHM9aSh0KSxuPWUuc3BsaXQoL1xuLyk7Zm9yKGxldCBsPTA7bDxuLmxlbmd0aDtsKyspe2xldCBkPW5bbF0ubWF0Y2goLyguKik6KFxkKyk6KFxkKylcKT8kLyk7aWYoZCl7bGV0IG89ZFsxXSxfPWRbMl0sZj1kWzNdLGc9TWF0aC5tYXgoby5sYXN0SW5kZXhPZigiICIpKzEsby5sYXN0SW5kZXhPZigiKCIpKzEpO2lmKG89by5zdWJzdHIoZyksbz1pKG8pLG89PT1zKXtsZXQgdj17bGluZTpwYXJzZUludChfLDEwKSxjb2w6cGFyc2VJbnQoZiwxMCl9O3JldHVybiB2LmxpbmU9PT0xJiYodi5jb2wtPTUzKSx2fX19dGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY29ycmVsYXRlIGRlZmluZSBjYWxsIHNpdGUgZm9yIG5lZWRsZSAiK3QpfWdldEJ1aWxkSW5mbygpe2lmKCF0aGlzLl9jb25maWcuaXNCdWlsZCgpKXJldHVybiBudWxsO2xldCB0PVtdLGU9MDtmb3IobGV0IGk9MCxzPXRoaXMuX21vZHVsZXMyLmxlbmd0aDtpPHM7aSsrKXtsZXQgbj10aGlzLl9tb2R1bGVzMltpXTtpZighbiljb250aW51ZTtsZXQgbD10aGlzLl9idWlsZEluZm9QYXRoW24uaWRdfHxudWxsLGQ9dGhpcy5fYnVpbGRJbmZvRGVmaW5lU3RhY2tbbi5pZF18fG51bGwsbz10aGlzLl9idWlsZEluZm9EZXBlbmRlbmNpZXNbbi5pZF07dFtlKytdPXtpZDpuLnN0cklkLHBhdGg6bCxkZWZpbmVMb2NhdGlvbjpsJiZkP2MuX2ZpbmRSZWxldmFudExvY2F0aW9uSW5TdGFjayhsLGQpOm51bGwsZGVwZW5kZW5jaWVzOm8sc2hpbTpudWxsLGV4cG9ydHM6bi5leHBvcnRzfX1yZXR1cm4gdH1nZXRSZWNvcmRlcigpe3JldHVybiB0aGlzLl9yZWNvcmRlcnx8KHRoaXMuX2NvbmZpZy5zaG91bGRSZWNvcmRTdGF0cygpP3RoaXMuX3JlY29yZGVyPW5ldyB1LkxvYWRlckV2ZW50UmVjb3JkZXIodGhpcy5fbG9hZGVyQXZhaWxhYmxlVGltZXN0YW1wKTp0aGlzLl9yZWNvcmRlcj11Lk51bGxMb2FkZXJFdmVudFJlY29yZGVyLklOU1RBTkNFKSx0aGlzLl9yZWNvcmRlcn1nZXRMb2FkZXJFdmVudHMoKXtyZXR1cm4gdGhpcy5nZXRSZWNvcmRlcigpLmdldEV2ZW50cygpfWVucXVldWVEZWZpbmVBbm9ueW1vdXNNb2R1bGUodCxlKXtpZih0aGlzLl9jdXJyZW50QW5vbnltb3VzRGVmaW5lQ2FsbCE9PW51bGwpdGhyb3cgbmV3IEVycm9yKCJDYW4gb25seSBoYXZlIG9uZSBhbm9ueW1vdXMgZGVmaW5lIGNhbGwgcGVyIHNjcmlwdCBmaWxlIik7bGV0IGk9bnVsbDt0aGlzLl9jb25maWcuaXNCdWlsZCgpJiYoaT1uZXcgRXJyb3IoIlN0YWNrTG9jYXRpb24iKS5zdGFja3x8bnVsbCksdGhpcy5fY3VycmVudEFub255bW91c0RlZmluZUNhbGw9e3N0YWNrOmksZGVwZW5kZW5jaWVzOnQsY2FsbGJhY2s6ZX19ZGVmaW5lTW9kdWxlKHQsZSxpLHMsbixsPW5ldyB5KHQpKXtsZXQgZD10aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldE1vZHVsZUlkKHQpO2lmKHRoaXMuX21vZHVsZXMyW2RdKXt0aGlzLl9jb25maWcuaXNEdXBsaWNhdGVNZXNzYWdlSWdub3JlZEZvcih0KXx8Y29uc29sZS53YXJuKCJEdXBsaWNhdGUgZGVmaW5pdGlvbiBvZiBtb2R1bGUgJyIrdCsiJyIpO3JldHVybn1sZXQgbz1uZXcgbShkLHQsdGhpcy5fbm9ybWFsaXplRGVwZW5kZW5jaWVzKGUsbCksaSxzLGwpO3RoaXMuX21vZHVsZXMyW2RdPW8sdGhpcy5fY29uZmlnLmlzQnVpbGQoKSYmKHRoaXMuX2J1aWxkSW5mb0RlZmluZVN0YWNrW2RdPW4sdGhpcy5fYnVpbGRJbmZvRGVwZW5kZW5jaWVzW2RdPShvLmRlcGVuZGVuY2llc3x8W10pLm1hcChfPT50aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldFN0ck1vZHVsZUlkKF8uaWQpKSksdGhpcy5fcmVzb2x2ZShvKX1fbm9ybWFsaXplRGVwZW5kZW5jeSh0LGUpe2lmKHQ9PT0iZXhwb3J0cyIpcmV0dXJuIGguRVhQT1JUUztpZih0PT09Im1vZHVsZSIpcmV0dXJuIGguTU9EVUxFO2lmKHQ9PT0icmVxdWlyZSIpcmV0dXJuIGguUkVRVUlSRTtsZXQgaT10LmluZGV4T2YoIiEiKTtpZihpPj0wKXtsZXQgcz1lLnJlc29sdmVNb2R1bGUodC5zdWJzdHIoMCxpKSksbj1lLnJlc29sdmVNb2R1bGUodC5zdWJzdHIoaSsxKSksbD10aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldE1vZHVsZUlkKHMrIiEiK24pLGQ9dGhpcy5fbW9kdWxlSWRQcm92aWRlci5nZXRNb2R1bGVJZChzKTtyZXR1cm4gbmV3IHIobCxkLG4pfXJldHVybiBuZXcgaCh0aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldE1vZHVsZUlkKGUucmVzb2x2ZU1vZHVsZSh0KSkpfV9ub3JtYWxpemVEZXBlbmRlbmNpZXModCxlKXtsZXQgaT1bXSxzPTA7Zm9yKGxldCBuPTAsbD10Lmxlbmd0aDtuPGw7bisrKWlbcysrXT10aGlzLl9ub3JtYWxpemVEZXBlbmRlbmN5KHRbbl0sZSk7cmV0dXJuIGl9X3JlbGF0aXZlUmVxdWlyZSh0LGUsaSxzKXtpZih0eXBlb2YgZT09InN0cmluZyIpcmV0dXJuIHRoaXMuc3luY2hyb25vdXNSZXF1aXJlKGUsdCk7dGhpcy5kZWZpbmVNb2R1bGUodS5VdGlsaXRpZXMuZ2VuZXJhdGVBbm9ueW1vdXNNb2R1bGUoKSxlLGkscyxudWxsLHQpfXN5bmNocm9ub3VzUmVxdWlyZSh0LGU9bmV3IHkodCkpe2xldCBpPXRoaXMuX25vcm1hbGl6ZURlcGVuZGVuY3kodCxlKSxzPXRoaXMuX21vZHVsZXMyW2kuaWRdO2lmKCFzKXRocm93IG5ldyBFcnJvcigiQ2hlY2sgZGVwZW5kZW5jeSBsaXN0ISBTeW5jaHJvbm91cyByZXF1aXJlIGNhbm5vdCByZXNvbHZlIG1vZHVsZSAnIit0KyInLiBUaGlzIGlzIHRoZSBmaXJzdCBtZW50aW9uIG9mIHRoaXMgbW9kdWxlISIpO2lmKCFzLmlzQ29tcGxldGUoKSl0aHJvdyBuZXcgRXJyb3IoIkNoZWNrIGRlcGVuZGVuY3kgbGlzdCEgU3luY2hyb25vdXMgcmVxdWlyZSBjYW5ub3QgcmVzb2x2ZSBtb2R1bGUgJyIrdCsiJy4gVGhpcyBtb2R1bGUgaGFzIG5vdCBiZWVuIHJlc29sdmVkIGNvbXBsZXRlbHkgeWV0LiIpO2lmKHMuZXJyb3IpdGhyb3cgcy5lcnJvcjtyZXR1cm4gcy5leHBvcnRzfWNvbmZpZ3VyZSh0LGUpe2xldCBpPXRoaXMuX2NvbmZpZy5zaG91bGRSZWNvcmRTdGF0cygpO2U/dGhpcy5fY29uZmlnPW5ldyB1LkNvbmZpZ3VyYXRpb24odGhpcy5fZW52LHQpOnRoaXMuX2NvbmZpZz10aGlzLl9jb25maWcuY2xvbmVBbmRNZXJnZSh0KSx0aGlzLl9jb25maWcuc2hvdWxkUmVjb3JkU3RhdHMoKSYmIWkmJih0aGlzLl9yZWNvcmRlcj1udWxsKX1nZXRDb25maWcoKXtyZXR1cm4gdGhpcy5fY29uZmlnfV9vbkxvYWQodCl7aWYodGhpcy5fY3VycmVudEFub255bW91c0RlZmluZUNhbGwhPT1udWxsKXtsZXQgZT10aGlzLl9jdXJyZW50QW5vbnltb3VzRGVmaW5lQ2FsbDt0aGlzLl9jdXJyZW50QW5vbnltb3VzRGVmaW5lQ2FsbD1udWxsLHRoaXMuZGVmaW5lTW9kdWxlKHRoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0U3RyTW9kdWxlSWQodCksZS5kZXBlbmRlbmNpZXMsZS5jYWxsYmFjayxudWxsLGUuc3RhY2spfX1fY3JlYXRlTG9hZEVycm9yKHQsZSl7bGV0IGk9dGhpcy5fbW9kdWxlSWRQcm92aWRlci5nZXRTdHJNb2R1bGVJZCh0KSxzPSh0aGlzLl9pbnZlcnNlRGVwZW5kZW5jaWVzMlt0XXx8W10pLm1hcChsPT50aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldFN0ck1vZHVsZUlkKGwpKTtjb25zdCBuPXUuZW5zdXJlRXJyb3IoZSk7cmV0dXJuIG4ucGhhc2U9ImxvYWRpbmciLG4ubW9kdWxlSWQ9aSxuLm5lZWRlZEJ5PXMsbn1fb25Mb2FkRXJyb3IodCxlKXtjb25zdCBpPXRoaXMuX2NyZWF0ZUxvYWRFcnJvcih0LGUpO3RoaXMuX21vZHVsZXMyW3RdfHwodGhpcy5fbW9kdWxlczJbdF09bmV3IG0odCx0aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldFN0ck1vZHVsZUlkKHQpLFtdLCgpPT57fSxudWxsLG51bGwpKTtsZXQgcz1bXTtmb3IobGV0IGQ9MCxvPXRoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0TWF4TW9kdWxlSWQoKTtkPG87ZCsrKXNbZF09ITE7bGV0IG49ITEsbD1bXTtmb3IobC5wdXNoKHQpLHNbdF09ITA7bC5sZW5ndGg+MDspe2xldCBkPWwuc2hpZnQoKSxvPXRoaXMuX21vZHVsZXMyW2RdO28mJihuPW8ub25EZXBlbmRlbmN5RXJyb3IoaSl8fG4pO2xldCBfPXRoaXMuX2ludmVyc2VEZXBlbmRlbmNpZXMyW2RdO2lmKF8pZm9yKGxldCBmPTAsZz1fLmxlbmd0aDtmPGc7ZisrKXtsZXQgdj1fW2ZdO3Nbdl18fChsLnB1c2godiksc1t2XT0hMCl9fW58fHRoaXMuX2NvbmZpZy5vbkVycm9yKGkpfV9oYXNEZXBlbmRlbmN5UGF0aCh0LGUpe2xldCBpPXRoaXMuX21vZHVsZXMyW3RdO2lmKCFpKXJldHVybiExO2xldCBzPVtdO2ZvcihsZXQgbD0wLGQ9dGhpcy5fbW9kdWxlSWRQcm92aWRlci5nZXRNYXhNb2R1bGVJZCgpO2w8ZDtsKyspc1tsXT0hMTtsZXQgbj1bXTtmb3Iobi5wdXNoKGkpLHNbdF09ITA7bi5sZW5ndGg+MDspe2xldCBkPW4uc2hpZnQoKS5kZXBlbmRlbmNpZXM7aWYoZClmb3IobGV0IG89MCxfPWQubGVuZ3RoO288XztvKyspe2xldCBmPWRbb107aWYoZi5pZD09PWUpcmV0dXJuITA7bGV0IGc9dGhpcy5fbW9kdWxlczJbZi5pZF07ZyYmIXNbZi5pZF0mJihzW2YuaWRdPSEwLG4ucHVzaChnKSl9fXJldHVybiExfV9maW5kQ3ljbGVQYXRoKHQsZSxpKXtpZih0PT09ZXx8aT09PTUwKXJldHVyblt0XTtsZXQgcz10aGlzLl9tb2R1bGVzMlt0XTtpZighcylyZXR1cm4gbnVsbDtsZXQgbj1zLmRlcGVuZGVuY2llcztpZihuKWZvcihsZXQgbD0wLGQ9bi5sZW5ndGg7bDxkO2wrKyl7bGV0IG89dGhpcy5fZmluZEN5Y2xlUGF0aChuW2xdLmlkLGUsaSsxKTtpZihvIT09bnVsbClyZXR1cm4gby5wdXNoKHQpLG99cmV0dXJuIG51bGx9X2NyZWF0ZVJlcXVpcmUodCl7bGV0IGU9KGkscyxuKT0+dGhpcy5fcmVsYXRpdmVSZXF1aXJlKHQsaSxzLG4pO3JldHVybiBlLnRvVXJsPWk9PnRoaXMuX2NvbmZpZy5yZXF1aXJlVG9VcmwodC5yZXNvbHZlTW9kdWxlKGkpKSxlLmdldFN0YXRzPSgpPT50aGlzLmdldExvYWRlckV2ZW50cygpLGUuaGFzRGVwZW5kZW5jeUN5Y2xlPSgpPT50aGlzLl9oYXNEZXBlbmRlbmN5Q3ljbGUsZS5jb25maWc9KGkscz0hMSk9Pnt0aGlzLmNvbmZpZ3VyZShpLHMpfSxlLl9fJF9fbm9kZVJlcXVpcmU9dS5nbG9iYWwubm9kZVJlcXVpcmUsZX1fbG9hZE1vZHVsZSh0KXtpZih0aGlzLl9tb2R1bGVzMlt0XXx8dGhpcy5fa25vd25Nb2R1bGVzMlt0XSlyZXR1cm47dGhpcy5fa25vd25Nb2R1bGVzMlt0XT0hMDtsZXQgZT10aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldFN0ck1vZHVsZUlkKHQpLGk9dGhpcy5fY29uZmlnLm1vZHVsZUlkVG9QYXRocyhlKSxzPS9eQFteXC9dK1wvW15cL10rJC87dGhpcy5fZW52LmlzTm9kZSYmKGUuaW5kZXhPZigiLyIpPT09LTF8fHMudGVzdChlKSkmJmkucHVzaCgibm9kZXwiK2UpO2xldCBuPS0xLGw9ZD0+e2lmKG4rKyxuPj1pLmxlbmd0aCl0aGlzLl9vbkxvYWRFcnJvcih0LGQpO2Vsc2V7bGV0IG89aVtuXSxfPXRoaXMuZ2V0UmVjb3JkZXIoKTtpZih0aGlzLl9jb25maWcuaXNCdWlsZCgpJiZvPT09ImVtcHR5OiIpe3RoaXMuX2J1aWxkSW5mb1BhdGhbdF09byx0aGlzLmRlZmluZU1vZHVsZSh0aGlzLl9tb2R1bGVJZFByb3ZpZGVyLmdldFN0ck1vZHVsZUlkKHQpLFtdLG51bGwsbnVsbCxudWxsKSx0aGlzLl9vbkxvYWQodCk7cmV0dXJufV8ucmVjb3JkKDEwLG8pLHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHRoaXMsbywoKT0+e3RoaXMuX2NvbmZpZy5pc0J1aWxkKCkmJih0aGlzLl9idWlsZEluZm9QYXRoW3RdPW8pLF8ucmVjb3JkKDExLG8pLHRoaXMuX29uTG9hZCh0KX0sZj0+e18ucmVjb3JkKDEyLG8pLGwoZil9KX19O2wobnVsbCl9X2xvYWRQbHVnaW5EZXBlbmRlbmN5KHQsZSl7aWYodGhpcy5fbW9kdWxlczJbZS5pZF18fHRoaXMuX2tub3duTW9kdWxlczJbZS5pZF0pcmV0dXJuO3RoaXMuX2tub3duTW9kdWxlczJbZS5pZF09ITA7bGV0IGk9cz0+e3RoaXMuZGVmaW5lTW9kdWxlKHRoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0U3RyTW9kdWxlSWQoZS5pZCksW10scyxudWxsLG51bGwpfTtpLmVycm9yPXM9Pnt0aGlzLl9jb25maWcub25FcnJvcih0aGlzLl9jcmVhdGVMb2FkRXJyb3IoZS5pZCxzKSl9LHQubG9hZChlLnBsdWdpblBhcmFtLHRoaXMuX2NyZWF0ZVJlcXVpcmUoeS5ST09UKSxpLHRoaXMuX2NvbmZpZy5nZXRPcHRpb25zTGl0ZXJhbCgpKX1fcmVzb2x2ZSh0KXtsZXQgZT10LmRlcGVuZGVuY2llcztpZihlKWZvcihsZXQgaT0wLHM9ZS5sZW5ndGg7aTxzO2krKyl7bGV0IG49ZVtpXTtpZihuPT09aC5FWFBPUlRTKXt0LmV4cG9ydHNQYXNzZWRJbj0hMCx0LnVucmVzb2x2ZWREZXBlbmRlbmNpZXNDb3VudC0tO2NvbnRpbnVlfWlmKG49PT1oLk1PRFVMRSl7dC51bnJlc29sdmVkRGVwZW5kZW5jaWVzQ291bnQtLTtjb250aW51ZX1pZihuPT09aC5SRVFVSVJFKXt0LnVucmVzb2x2ZWREZXBlbmRlbmNpZXNDb3VudC0tO2NvbnRpbnVlfWxldCBsPXRoaXMuX21vZHVsZXMyW24uaWRdO2lmKGwmJmwuaXNDb21wbGV0ZSgpKXtpZihsLmVycm9yKXt0Lm9uRGVwZW5kZW5jeUVycm9yKGwuZXJyb3IpO3JldHVybn10LnVucmVzb2x2ZWREZXBlbmRlbmNpZXNDb3VudC0tO2NvbnRpbnVlfWlmKHRoaXMuX2hhc0RlcGVuZGVuY3lQYXRoKG4uaWQsdC5pZCkpe3RoaXMuX2hhc0RlcGVuZGVuY3lDeWNsZT0hMCxjb25zb2xlLndhcm4oIlRoZXJlIGlzIGEgZGVwZW5kZW5jeSBjeWNsZSBiZXR3ZWVuICciK3RoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0U3RyTW9kdWxlSWQobi5pZCkrIicgYW5kICciK3RoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0U3RyTW9kdWxlSWQodC5pZCkrIicuIFRoZSBjeWNsaWMgcGF0aCBmb2xsb3dzOiIpO2xldCBkPXRoaXMuX2ZpbmRDeWNsZVBhdGgobi5pZCx0LmlkLDApfHxbXTtkLnJldmVyc2UoKSxkLnB1c2gobi5pZCksY29uc29sZS53YXJuKGQubWFwKG89PnRoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0U3RyTW9kdWxlSWQobykpLmpvaW4oYCA9PiAKYCkpLHQudW5yZXNvbHZlZERlcGVuZGVuY2llc0NvdW50LS07Y29udGludWV9aWYodGhpcy5faW52ZXJzZURlcGVuZGVuY2llczJbbi5pZF09dGhpcy5faW52ZXJzZURlcGVuZGVuY2llczJbbi5pZF18fFtdLHRoaXMuX2ludmVyc2VEZXBlbmRlbmNpZXMyW24uaWRdLnB1c2godC5pZCksbiBpbnN0YW5jZW9mIHIpe2xldCBkPXRoaXMuX21vZHVsZXMyW24ucGx1Z2luSWRdO2lmKGQmJmQuaXNDb21wbGV0ZSgpKXt0aGlzLl9sb2FkUGx1Z2luRGVwZW5kZW5jeShkLmV4cG9ydHMsbik7Y29udGludWV9bGV0IG89dGhpcy5faW52ZXJzZVBsdWdpbkRlcGVuZGVuY2llczIuZ2V0KG4ucGx1Z2luSWQpO298fChvPVtdLHRoaXMuX2ludmVyc2VQbHVnaW5EZXBlbmRlbmNpZXMyLnNldChuLnBsdWdpbklkLG8pKSxvLnB1c2gobiksdGhpcy5fbG9hZE1vZHVsZShuLnBsdWdpbklkKTtjb250aW51ZX10aGlzLl9sb2FkTW9kdWxlKG4uaWQpfXQudW5yZXNvbHZlZERlcGVuZGVuY2llc0NvdW50PT09MCYmdGhpcy5fb25Nb2R1bGVDb21wbGV0ZSh0KX1fb25Nb2R1bGVDb21wbGV0ZSh0KXtsZXQgZT10aGlzLmdldFJlY29yZGVyKCk7aWYodC5pc0NvbXBsZXRlKCkpcmV0dXJuO2xldCBpPXQuZGVwZW5kZW5jaWVzLHM9W107aWYoaSlmb3IobGV0IG89MCxfPWkubGVuZ3RoO288XztvKyspe2xldCBmPWlbb107aWYoZj09PWguRVhQT1JUUyl7c1tvXT10LmV4cG9ydHM7Y29udGludWV9aWYoZj09PWguTU9EVUxFKXtzW29dPXtpZDp0LnN0cklkLGNvbmZpZzooKT0+dGhpcy5fY29uZmlnLmdldENvbmZpZ0Zvck1vZHVsZSh0LnN0cklkKX07Y29udGludWV9aWYoZj09PWguUkVRVUlSRSl7c1tvXT10aGlzLl9jcmVhdGVSZXF1aXJlKHQubW9kdWxlSWRSZXNvbHZlcik7Y29udGludWV9bGV0IGc9dGhpcy5fbW9kdWxlczJbZi5pZF07aWYoZyl7c1tvXT1nLmV4cG9ydHM7Y29udGludWV9c1tvXT1udWxsfWNvbnN0IG49bz0+KHRoaXMuX2ludmVyc2VEZXBlbmRlbmNpZXMyW29dfHxbXSkubWFwKF89PnRoaXMuX21vZHVsZUlkUHJvdmlkZXIuZ2V0U3RyTW9kdWxlSWQoXykpO3QuY29tcGxldGUoZSx0aGlzLl9jb25maWcscyxuKTtsZXQgbD10aGlzLl9pbnZlcnNlRGVwZW5kZW5jaWVzMlt0LmlkXTtpZih0aGlzLl9pbnZlcnNlRGVwZW5kZW5jaWVzMlt0LmlkXT1udWxsLGwpZm9yKGxldCBvPTAsXz1sLmxlbmd0aDtvPF87bysrKXtsZXQgZj1sW29dLGc9dGhpcy5fbW9kdWxlczJbZl07Zy51bnJlc29sdmVkRGVwZW5kZW5jaWVzQ291bnQtLSxnLnVucmVzb2x2ZWREZXBlbmRlbmNpZXNDb3VudD09PTAmJnRoaXMuX29uTW9kdWxlQ29tcGxldGUoZyl9bGV0IGQ9dGhpcy5faW52ZXJzZVBsdWdpbkRlcGVuZGVuY2llczIuZ2V0KHQuaWQpO2lmKGQpe3RoaXMuX2ludmVyc2VQbHVnaW5EZXBlbmRlbmNpZXMyLmRlbGV0ZSh0LmlkKTtmb3IobGV0IG89MCxfPWQubGVuZ3RoO288XztvKyspdGhpcy5fbG9hZFBsdWdpbkRlcGVuZGVuY3kodC5leHBvcnRzLGRbb10pfX19dS5Nb2R1bGVNYW5hZ2VyPWN9KShBTURMb2FkZXJ8fChBTURMb2FkZXI9e30pKTt2YXIgZGVmaW5lLEFNRExvYWRlcjsoZnVuY3Rpb24odSl7Y29uc3QgeT1uZXcgdS5FbnZpcm9ubWVudDtsZXQgbT1udWxsO2NvbnN0IHA9ZnVuY3Rpb24oYSx0LGUpe3R5cGVvZiBhIT0ic3RyaW5nIiYmKGU9dCx0PWEsYT1udWxsKSwodHlwZW9mIHQhPSJvYmplY3QifHwhQXJyYXkuaXNBcnJheSh0KSkmJihlPXQsdD1udWxsKSx0fHwodD1bInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIl0pLGE/bS5kZWZpbmVNb2R1bGUoYSx0LGUsbnVsbCxudWxsKTptLmVucXVldWVEZWZpbmVBbm9ueW1vdXNNb2R1bGUodCxlKX07cC5hbWQ9e2pRdWVyeTohMH07Y29uc3QgaD1mdW5jdGlvbihhLHQ9ITEpe20uY29uZmlndXJlKGEsdCl9LHI9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7aWYoYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBPYmplY3QmJiFBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpe2goYXJndW1lbnRzWzBdKTtyZXR1cm59aWYodHlwZW9mIGFyZ3VtZW50c1swXT09InN0cmluZyIpcmV0dXJuIG0uc3luY2hyb25vdXNSZXF1aXJlKGFyZ3VtZW50c1swXSl9aWYoKGFyZ3VtZW50cy5sZW5ndGg9PT0yfHxhcmd1bWVudHMubGVuZ3RoPT09MykmJkFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSl7bS5kZWZpbmVNb2R1bGUodS5VdGlsaXRpZXMuZ2VuZXJhdGVBbm9ueW1vdXNNb2R1bGUoKSxhcmd1bWVudHNbMF0sYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSxudWxsKTtyZXR1cm59dGhyb3cgbmV3IEVycm9yKCJVbnJlY29nbml6ZWQgcmVxdWlyZSBjYWxsIil9O3IuY29uZmlnPWgsci5nZXRDb25maWc9ZnVuY3Rpb24oKXtyZXR1cm4gbS5nZXRDb25maWcoKS5nZXRPcHRpb25zTGl0ZXJhbCgpfSxyLnJlc2V0PWZ1bmN0aW9uKCl7bT1tLnJlc2V0KCl9LHIuZ2V0QnVpbGRJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIG0uZ2V0QnVpbGRJbmZvKCl9LHIuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gbS5nZXRMb2FkZXJFdmVudHMoKX0sci5kZWZpbmU9cDtmdW5jdGlvbiBjKCl7aWYodHlwZW9mIHUuZ2xvYmFsLnJlcXVpcmU8InUifHx0eXBlb2YgcmVxdWlyZTwidSIpe2NvbnN0IGE9dS5nbG9iYWwucmVxdWlyZXx8cmVxdWlyZTtpZih0eXBlb2YgYT09ImZ1bmN0aW9uIiYmdHlwZW9mIGEucmVzb2x2ZT09ImZ1bmN0aW9uIil7Y29uc3QgdD11LmVuc3VyZVJlY29yZGVkTm9kZVJlcXVpcmUobS5nZXRSZWNvcmRlcigpLGEpO3UuZ2xvYmFsLm5vZGVSZXF1aXJlPXQsci5ub2RlUmVxdWlyZT10LHIuX18kX19ub2RlUmVxdWlyZT10fX15LmlzTm9kZSYmIXkuaXNFbGVjdHJvblJlbmRlcmVyJiYheS5pc0VsZWN0cm9uTm9kZUludGVncmF0aW9uV2ViV29ya2VyP21vZHVsZS5leHBvcnRzPXI6KHkuaXNFbGVjdHJvblJlbmRlcmVyfHwodS5nbG9iYWwuZGVmaW5lPXApLHUuZ2xvYmFsLnJlcXVpcmU9cil9dS5pbml0PWMsKHR5cGVvZiB1Lmdsb2JhbC5kZWZpbmUhPSJmdW5jdGlvbiJ8fCF1Lmdsb2JhbC5kZWZpbmUuYW1kKSYmKG09bmV3IHUuTW9kdWxlTWFuYWdlcih5LHUuY3JlYXRlU2NyaXB0TG9hZGVyKHkpLHAscix1LlV0aWxpdGllcy5nZXRIaWdoUGVyZm9ybWFuY2VUaW1lc3RhbXAoKSksdHlwZW9mIHUuZ2xvYmFsLnJlcXVpcmU8InUiJiZ0eXBlb2YgdS5nbG9iYWwucmVxdWlyZSE9ImZ1bmN0aW9uIiYmci5jb25maWcodS5nbG9iYWwucmVxdWlyZSksZGVmaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHAuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxkZWZpbmUuYW1kPXAuYW1kLHR5cGVvZiBkb05vdEluaXRMb2FkZXI+InUiJiZjKCkpfSkoQU1ETG9hZGVyfHwoQU1ETG9hZGVyPXt9KSk7CgovLyMgc291cmNlTWFwcGluZ1VSTD0uLi8uLi9taW4tbWFwcy92cy9sb2FkZXIuanMubWFw